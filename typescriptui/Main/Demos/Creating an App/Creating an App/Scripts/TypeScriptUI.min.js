var __extends,TSUI;(function(n,t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4)))&&(window.location=t)})(navigator.userAgent||navigator.vendor||window.opera,"#mobile"),window.Modernizr=function(n,t,i){function w(n){d.cssText=n}function f(n,t){return typeof n===t}function ut(n,t){return!!~(""+n).indexOf(t)}function b(n,t){var u,r;for(u in n)if(r=n[u],!ut(r,"-")&&d[r]!==i)return t=="pfx"?r:!0;return!1}function ft(n,t,r){var e,u;for(e in n)if(u=t[n[e]],u!==i)return r===!1?n[e]:f(u,"function")?u.bind(r||t):u;return!1}function c(n,t,i){var r=n.charAt(0).toUpperCase()+n.slice(1),u=(n+" "+tt.join(r+" ")+r).split(" ");return f(t,"string")||f(t,"undefined")?b(u,t):(u=(n+" "+it.join(r+" ")+r).split(" "),ft(u,t,i))}var r={},l=!0,u=t.documentElement,o="modernizr",k=t.createElement(o),d=k.style,et,ot={}.toString,g=" -webkit- -moz- -o- -ms- ".split(" "),nt="Webkit Moz O ms",tt=nt.split(" "),it=nt.toLowerCase().split(" "),e={},a=[],v=a.slice,s,rt=function(n,i,r,f){var l,a,c,v,e=t.createElement("div"),h=t.body,s=h||t.createElement("body");if(parseInt(r,10))while(r--)c=t.createElement("div"),c.id=f?f[r]:o+(r+1),e.appendChild(c);return l=["&#173;",'<style id="s',o,'">',n,"<\/style>"].join(""),e.id=o,(h?e:s).innerHTML+=l,s.appendChild(e),h||(s.style.background="",s.style.overflow="hidden",v=u.style.overflow,u.style.overflow="hidden",u.appendChild(s)),a=i(e,n),h?e.parentNode.removeChild(e):(s.parentNode.removeChild(s),u.style.overflow=v),!!a},y={}.hasOwnProperty,p,h;p=!f(y,"undefined")&&!f(y.call,"undefined")?function(n,t){return y.call(n,t)}:function(n,t){return t in n&&f(n.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(n){var t=this,i,r;if(typeof t!="function")throw new TypeError;return i=v.call(arguments,1),r=function(){var f,e,u;return this instanceof r?(f=function(){},f.prototype=t.prototype,e=new f,u=t.apply(e,i.concat(v.call(arguments))),Object(u)===u?u:e):t.apply(n,i.concat(v.call(arguments)))},r}),e.csstransforms3d=function(){var n=!!c("perspective");return n&&"webkitPerspective"in u.style&&rt("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t){n=t.offsetLeft===9&&t.offsetHeight===3}),n},e.csstransitions=function(){return c("transition")};for(h in e)p(e,h)&&(s=h.toLowerCase(),r[s]=e[h](),a.push((r[s]?"":"no-")+s));return r.addTest=function(n,t){if(typeof n=="object")for(var f in n)p(n,f)&&r.addTest(f,n[f]);else{if(n=n.toLowerCase(),r[n]!==i)return r;t=typeof t=="function"?t():t,typeof l!="undefined"&&l&&(u.className+=" "+(t?"":"no-")+n),r[n]=t}return r},w(""),k=et=null,function(n,t){function v(n,t){var i=n.createElement("p"),r=n.getElementsByTagName("head")[0]||n.documentElement;return i.innerHTML="x<style>"+t+"<\/style>",r.insertBefore(i.lastChild,r.firstChild)}function s(){var n=r.elements;return typeof n=="string"?n.split(" "):n}function u(n){var t=a[n[l]];return t||(t={},o++,n[l]=o,a[o]=t),t}function h(n,r,f){if(r||(r=t),i)return r.createElement(n);f||(f=u(r));var e;return e=f.cache[n]?f.cache[n].cloneNode():b.test(n)?(f.cache[n]=f.createElem(n)).cloneNode():f.createElem(n),e.canHaveChildren&&!w.test(n)?f.frag.appendChild(e):e}function y(n,r){if(n||(n=t),i)return n.createDocumentFragment();r=r||u(n);for(var e=r.frag.cloneNode(),f=0,o=s(),h=o.length;f<h;f++)e.createElement(o[f]);return e}function p(n,t){t.cache||(t.cache={},t.createElem=n.createElement,t.createFrag=n.createDocumentFragment,t.frag=t.createFrag()),n.createElement=function(i){return r.shivMethods?h(i,n,t):t.createElem(i)},n.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+s().join().replace(/\w+/g,function(n){return t.createElem(n),t.frag.createElement(n),'c("'+n+'")'})+");return n}")(r,t.frag)}function c(n){n||(n=t);var f=u(n);return r.shivCSS&&!e&&!f.hasCSS&&(f.hasCSS=!!v(n,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),i||p(n,f),n}var f=n.html5||{},w=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,b=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,e,l="_html5shiv",o=0,a={},i,r;(function(){try{var n=t.createElement("a");n.innerHTML="<xyz><\/xyz>",e="hidden"in n,i=n.childNodes.length==1||function(){t.createElement("a");var n=t.createDocumentFragment();return typeof n.cloneNode=="undefined"||typeof n.createDocumentFragment=="undefined"||typeof n.createElement=="undefined"}()}catch(r){e=!0,i=!0}})(),r={elements:f.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:f.shivCSS!==!1,supportsUnknownElements:i,shivMethods:f.shivMethods!==!1,type:"default",shivDocument:c,createElement:h,createDocumentFragment:y},n.html5=r,c(t)}(this,t),r._version="2.6.2",r._prefixes=g,r._domPrefixes=it,r._cssomPrefixes=tt,r.testProp=function(n){return b([n])},r.testAllProps=c,r.testStyles=rt,u.className=u.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(l?" js "+a.join(" "):""),r}(this,this.document),function(n,t,i){function h(n){return"[object Function]"==y.call(n)}function c(n){return"string"==typeof n}function l(){}function w(n){return!n||"loaded"==n||"complete"==n||"uninitialized"==n}function e(){var n=a.shift();v=1,n?n.t?s(function(){("c"==n.t?u.injectCss:u.injectJs)(n.s,0,n.a,n.x,n.e,1)},0):(n(),e()):v=0}function ut(n,i,f,h,c,l,y){function k(t){if(!nt&&w(p.readyState)&&(tt.r=nt=1,!v&&e(),p.onload=p.onreadystatechange=null,t)){"img"!=n&&s(function(){g.removeChild(p)},50);for(var u in r[i])r[i].hasOwnProperty(u)&&r[i][u].onload()}}var y=y||u.errorTimeout,p=t.createElement(n),nt=0,b=0,tt={t:f,s:i,e:c,a:l,x:y};1===r[i]&&(b=1,r[i]=[]),"object"==n?p.data=i:(p.src=i,p.type=n),p.width=p.height="0",p.onerror=p.onload=p.onreadystatechange=function(){k.call(this,b)},a.splice(h,0,tt),"img"!=n&&(b||2===r[i]?(g.insertBefore(p,d?null:o),s(k,y)):r[i].push(p))}function ft(n,t,i,r,u){return v=0,t=t||"j",c(n)?ut("c"==t?et:nt,n,t,this.i++,i,r,u):(a.splice(this.i++,0,n),1==a.length&&e()),this}function b(){var n=u;return n.loader={load:ft,i:0},n}var f=t.documentElement,s=n.setTimeout,o=t.getElementsByTagName("script")[0],y={}.toString,a=[],v=0,k="MozAppearance"in f.style,d=k&&!!t.createRange().compareNode,g=d?f:o.parentNode,f=n.opera&&"[object Opera]"==y.call(n.opera),f=!!t.attachEvent&&!f,nt=k?"object":f?"script":"img",et=f?"script":nt,tt=Array.isArray||function(n){return"[object Array]"==y.call(n)},p=[],r={},it={timeout:function(n,t){return t.length&&(n.timeout=t[0]),n}},rt,u;u=function(n){function a(n){for(var n=n.split("!"),f=p.length,t=n.pop(),e=n.length,t={url:t,origUrl:t,prefixes:n},u,r,i=0;i<e;i++)r=n[i].split("="),(u=it[r.shift()])&&(t=u(t,r));for(i=0;i<f;i++)t=p[i](t);return t}function f(n,t,u,f,e){var o=a(n),s=o.autoCallback;o.url.split(".").pop().split("?").shift(),o.bypass||(t&&(t=h(t)?t:t[n]||t[f]||t[n.split("/").pop().split("?")[0]]),o.instead?o.instead(n,t,u,f,e):(r[o.url]?o.noexec=!0:r[o.url]=1,u.load(o.url,o.forceCSS||!o.forceJS&&"css"==o.url.split(".").pop().split("?").shift()?"c":i,o.noexec,o.attrs,o.timeout),(h(t)||h(s))&&u.load(function(){b(),t&&t(o.origUrl,e,f),s&&s(o.origUrl,e,f),r[o.url]=2})))}function s(n,t){function a(n,o){if(n){if(c(n))o||(i=function(){var n=[].slice.call(arguments);s.apply(this,n),u()}),f(n,i,t,0,e);else if(Object(n)===n)for(r in v=function(){var t=0,i;for(i in n)n.hasOwnProperty(i)&&t++;return t}(),n)n.hasOwnProperty(r)&&(!o&&!--v&&(h(i)?i=function(){var n=[].slice.call(arguments);s.apply(this,n),u()}:i[r]=function(n){return function(){var t=[].slice.call(arguments);n&&n.apply(this,t),u()}}(s[r])),f(n[r],i,t,r,e))}else o||u()}var e=!!n.test,o=n.load||n.both,i=n.callback||l,s=i,u=n.complete||l,v,r;a(e?n.yep:n.nope,!!o),o&&a(o)}var e,t,o=this.yepnope.loader;if(c(n))f(n,0,o,0);else if(tt(n))for(e=0;e<n.length;e++)t=n[e],c(t)?f(t,0,o,0):tt(t)?u(t):Object(t)===t&&s(t,o);else Object(n)===n&&s(n,o)},u.addPrefix=function(n,t){it[n]=t},u.addFilter=function(n){p.push(n)},u.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",rt=function(){t.removeEventListener("DOMContentLoaded",rt,0),t.readyState="complete"},0)),n.yepnope=b(),n.yepnope.executeStack=e,n.yepnope.injectJs=function(n,i,r,f,h,c){var a=t.createElement("script"),v,y,f=f||u.errorTimeout;a.src=n;for(y in r)a.setAttribute(y,r[y]);i=c?e:i||l,a.onreadystatechange=a.onload=function(){!v&&w(a.readyState)&&(v=1,i(),a.onload=a.onreadystatechange=null)},s(function(){v||(v=1,i(1))},f),h?a.onload():o.parentNode.insertBefore(a,o)},n.yepnope.injectCss=function(n,i,r,u,f,h){var u=t.createElement("link"),c,i=h?e:i||l;u.href=n,u.rel="stylesheet",u.type="text/css";for(c in r)u.setAttribute(c,r[c]);f||(o.parentNode.insertBefore(u,o),s(i,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},function(n,t,i){"use strict";function u(t){r.logging&&n.console&&n.console.log&&n.console.log(t)}function e(n,t,i,u,f,e){var o=r.Util.getCSS(t,n,f),h,s,c,l,a;return o.length===1&&(l=o[0],o=[],o[0]=l,o[1]=l),o[0].toString().indexOf("%")!==-1?(c=parseFloat(o[0])/100,s=i.width*c,n!=="backgroundSize"&&(s-=(e||u).width*c)):n==="backgroundSize"?o[0]==="auto"?s=u.width:o[0].match(/contain|cover/)?(a=r.Util.resizeBounds(u.width,u.height,i.width,i.height,o[0]),s=a.width,h=a.height):s=parseInt(o[0],10):s=parseInt(o[0],10),o[1]==="auto"?h=s/u.width*u.height:o[1].toString().indexOf("%")!==-1?(c=parseFloat(o[1])/100,h=i.height*c,n!=="backgroundSize"&&(h-=(e||u).height*c)):h=parseInt(o[1],10),[s,h]}function h(n,t){var i=[];return{storage:i,width:n,height:t,clip:function(){i.push({type:"function",name:"clip",arguments:arguments})},translate:function(){i.push({type:"function",name:"translate",arguments:arguments})},fill:function(){i.push({type:"function",name:"fill",arguments:arguments})},save:function(){i.push({type:"function",name:"save",arguments:arguments})},restore:function(){i.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){i.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){i.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var n=[];return i.push({type:"function",name:"drawShape",arguments:n}),{moveTo:function(){n.push({name:"moveTo",arguments:arguments})},lineTo:function(){n.push({name:"lineTo",arguments:arguments})},arcTo:function(){n.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){n.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){n.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){i.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){i.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(n,t){i.push({type:"variable",name:n,arguments:t})}}}function o(n){return{zindex:n,children:[]}}var r={},s,f;r.Util={},r.Util.trimText=function(n){return function(t){return n?n.apply(t):((t||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),r.Util.parseBackgroundImage=function(n){var i,r,l,a,e,v=[],t,u=0,o=0,f,s,h=function(){i&&(r.substr(0,1)==='"'&&(r=r.substr(1,r.length-2)),r&&s.push(r),i.substr(0,1)==="-"&&(a=i.indexOf("-",1)+1)>0&&(l=i.substr(0,a),i=i.substr(a)),v.push({prefix:l,method:i.toLowerCase(),value:e,args:s})),s=[],i=l=r=e=""},c,y;for(h(),c=0,y=n.length;c<y;c++)if(t=n[c],u!==0||!(" \r\n\t".indexOf(t)>-1)){switch(t){case'"':f?f===t&&(f=null):f=t;break;case"(":if(f)break;else if(u===0){u=1,e+=t;continue}else o++;break;case")":if(f)break;else if(u===1)if(o===0){u=0,e+=t,h();continue}else o--;break;case",":if(f)break;else if(u===0){h();continue}else if(u===1&&o===0&&!i.match(/^url$/i)){s.push(r),r="",e+=t;continue}}e+=t,u===0?i+=t:r+=t}return h(),v},r.Util.Bounds=function(n){var t,i={};if(n.getBoundingClientRect)return t=n.getBoundingClientRect(),i.top=t.top,i.bottom=t.bottom||t.top+t.height,i.left=t.left,i.width=t.width||t.right-t.left,i.height=t.height||t.bottom-t.top,i},r.Util.getCSS=function(n,u,e){function c(t,i){var u=n.runtimeStyle&&n.runtimeStyle[t],f,r=n.style;return(!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(i)&&/^-?\d/.test(i)&&(f=r.left,u&&(n.runtimeStyle.left=n.currentStyle.left),r.left=t==="fontSize"?"1em":i||0,i=r.pixelLeft+"px",r.left=f,u&&(n.runtimeStyle.left=u)),!/^(thin|medium|thick)$/i.test(i))?Math.round(parseFloat(i))+"px":i}var o,l=u.match(/^background(Size|Position)$/),h;if(s!==n&&(f=t.defaultView.getComputedStyle(n,null)),o=f[u],l){if(o=(o||"").split(","),o=o[e||0]||o[0]||"auto",o=r.Util.trimText(o).split(" "),u!=="backgroundSize"||o[0]&&!o[0].match(/cover|contain|auto/)){if(o[0]=o[0].indexOf("%")===-1?c(u+"X",o[0]):o[0],o[1]===i){if(u==="backgroundSize")return o[1]="auto",o;o[1]=o[0]}o[1]=o[1].indexOf("%")===-1?c(u+"Y",o[1]):o[1]}}else/border(Top|Bottom)(Left|Right)Radius/.test(u)&&(h=o.split(" "),h.length<=1&&(h[1]=h[0]),h[0]=parseInt(h[0],10),h[1]=parseInt(h[1],10),o=h);return o},r.Util.resizeBounds=function(n,t,i,r,u){var s=i/r,o=n/t,f,e;return u&&u!=="auto"?s<o^u==="contain"?(e=r,f=r*o):(f=i,e=i/o):(f=i,e=r),{width:f,height:e}},r.Util.BackgroundPosition=function(n,t,i,r,u){var f=e("backgroundPosition",n,t,i,r,u);return{left:f[0],top:f[1]}},r.Util.BackgroundSize=function(n,t,i,r){var u=e("backgroundSize",n,t,i,r);return{width:u[0],height:u[1]}},r.Util.Extend=function(n,t){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);return t},r.Util.Children=function(n){var t;try{t=n.nodeName&&n.nodeName.toUpperCase()==="IFRAME"?n.contentDocument||n.contentWindow.document:function(n){var t=[];return n!==null&&function(n,t){var u=n.length,r=0,f;if(typeof t.length=="number")for(f=t.length;r<f;r++)n[u++]=t[r];else while(t[r]!==i)n[u++]=t[r++];return n.length=u,n}(t,n),t}(n.childNodes)}catch(r){u("html2canvas.Util.Children failed with exception: "+r.message),t=[]}return t},r.Util.Font=function(){var n={};return function(t,r,u){if(n[t+"-"+r]!==i)return n[t+"-"+r];var f=u.createElement("div"),e=u.createElement("img"),o=u.createElement("span"),h="Hidden Text",c,l,s;return f.style.visibility="hidden",f.style.fontFamily=t,f.style.fontSize=r,f.style.margin=0,f.style.padding=0,u.body.appendChild(f),e.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",e.width=1,e.height=1,e.style.margin=0,e.style.padding=0,e.style.verticalAlign="baseline",o.style.fontFamily=t,o.style.fontSize=r,o.style.margin=0,o.style.padding=0,o.appendChild(u.createTextNode(h)),f.appendChild(o),f.appendChild(e),c=e.offsetTop-o.offsetTop+1,f.removeChild(o),f.appendChild(u.createTextNode(h)),f.style.lineHeight="normal",e.style.verticalAlign="super",l=e.offsetTop-f.offsetTop+1,s={baseline:c,lineWidth:1,middle:l},n[t+"-"+r]=s,u.body.removeChild(f),s}}(),function(){r.Generate={};var n=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];r.Generate.parseGradient=function(t,i){for(var r,p=n.length,o,h,u,s,c,e,l,a,v,y,f=0;f<p;f+=1)if(o=t.match(n[f]),o)break;if(o)switch(o[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(r={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},u=o[2].match(/\w+/g),u)for(s=u.length,f=0;f<s;f+=1)switch(u[f]){case"top":r.y0=0,r.y1=i.height;break;case"right":r.x0=i.width,r.x1=0;break;case"bottom":r.y0=i.height,r.y1=0;break;case"left":r.x0=0,r.x1=i.width}if(r.x0===null&&r.x1===null&&(r.x0=r.x1=i.width/2),r.y0===null&&r.y1===null&&(r.y0=r.y1=i.height/2),u=o[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g),u)for(s=u.length,c=1/Math.max(s-1,1),f=0;f<s;f+=1)e=u[f].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),h=e[2]?parseFloat(e[2])/(e[3]==="%"?100:i.width):f*c,r.colorStops.push({color:e[1],stop:h});break;case"-webkit-gradient":if(r={type:o[2]==="radial"?"circle":o[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},u=o[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),u&&(r.x0=u[1]*i.width/100,r.y0=u[2]*i.height/100,r.x1=u[3]*i.width/100,r.y1=u[4]*i.height/100),u=o[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g),u)for(s=u.length,f=0;f<s;f+=1)e=u[f].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),h=parseFloat(e[2]),e[1]==="from"&&(h=0),e[1]==="to"&&(h=1),r.colorStops.push({color:e[3],stop:h});break;case"-moz-linear-gradient":if(r={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},u=o[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),u&&(r.x0=u[1]*i.width/100,r.y0=u[2]*i.height/100,r.x1=i.width-r.x0,r.y1=i.height-r.y0),u=o[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g),u)for(s=u.length,c=1/Math.max(s-1,1),f=0;f<s;f+=1)e=u[f].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),e[2]?(h=parseFloat(e[2]),e[3]&&(h/=100)):h=f*c,r.colorStops.push({color:e[1],stop:h});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(r={type:"circle",x0:0,y0:0,x1:i.width,y1:i.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},u=o[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),u&&(r.cx=u[1]*i.width/100,r.cy=u[2]*i.height/100),u=o[3].match(/\w+/),e=o[4].match(/[a-z\-]*/),u&&e)switch(e[0]){case"farthest-corner":case"cover":case"":l=Math.sqrt(Math.pow(r.cx,2)+Math.pow(r.cy,2)),a=Math.sqrt(Math.pow(r.cx,2)+Math.pow(r.y1-r.cy,2)),v=Math.sqrt(Math.pow(r.x1-r.cx,2)+Math.pow(r.y1-r.cy,2)),y=Math.sqrt(Math.pow(r.x1-r.cx,2)+Math.pow(r.cy,2)),r.rx=r.ry=Math.max(l,a,v,y);break;case"closest-corner":l=Math.sqrt(Math.pow(r.cx,2)+Math.pow(r.cy,2)),a=Math.sqrt(Math.pow(r.cx,2)+Math.pow(r.y1-r.cy,2)),v=Math.sqrt(Math.pow(r.x1-r.cx,2)+Math.pow(r.y1-r.cy,2)),y=Math.sqrt(Math.pow(r.x1-r.cx,2)+Math.pow(r.cy,2)),r.rx=r.ry=Math.min(l,a,v,y);break;case"farthest-side":u[0]==="circle"?r.rx=r.ry=Math.max(r.cx,r.cy,r.x1-r.cx,r.y1-r.cy):(r.type=u[0],r.rx=Math.max(r.cx,r.x1-r.cx),r.ry=Math.max(r.cy,r.y1-r.cy));break;case"closest-side":case"contain":u[0]==="circle"?r.rx=r.ry=Math.min(r.cx,r.cy,r.x1-r.cx,r.y1-r.cy):(r.type=u[0],r.rx=Math.min(r.cx,r.x1-r.cx),r.ry=Math.min(r.cy,r.y1-r.cy))}if(u=o[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g),u)for(s=u.length,c=1/Math.max(s-1,1),f=0;f<s;f+=1)e=u[f].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),h=e[2]?parseFloat(e[2])/(e[3]==="%"?100:i.width):f*c,r.colorStops.push({color:e[1],stop:h})}return r},r.Generate.Gradient=function(n,i){var h,o,f,s,e,c;if(i.width!==0&&i.height!==0){if(h=t.createElement("canvas"),o=h.getContext("2d"),h.width=i.width,h.height=i.height,f=r.Generate.parseGradient(n,i),f)if(f.type==="linear"){for(s=o.createLinearGradient(f.x0,f.y0,f.x1,f.y1),e=0,c=f.colorStops.length;e<c;e+=1)try{s.addColorStop(f.colorStops[e].stop,f.colorStops[e].color)}catch(a){u(["failed to add color stop: ",a,"; tried to add: ",f.colorStops[e],"; stop: ",e,"; in: ",n])}o.fillStyle=s,o.fillRect(0,0,i.width,i.height)}else if(f.type==="circle"){for(s=o.createRadialGradient(f.cx,f.cy,0,f.cx,f.cy,f.rx),e=0,c=f.colorStops.length;e<c;e+=1)try{s.addColorStop(f.colorStops[e].stop,f.colorStops[e].color)}catch(a){u(["failed to add color stop: ",a,"; tried to add: ",f.colorStops[e],"; stop: ",e,"; in: ",n])}o.fillStyle=s,o.fillRect(0,0,i.width,i.height)}else if(f.type==="ellipse"){var l=t.createElement("canvas"),v=l.getContext("2d"),p=Math.max(f.rx,f.ry),y=p*2;for(l.width=l.height=y,s=v.createRadialGradient(f.rx,f.ry,0,f.rx,f.ry,p),e=0,c=f.colorStops.length;e<c;e+=1)try{s.addColorStop(f.colorStops[e].stop,f.colorStops[e].color)}catch(a){u(["failed to add color stop: ",a,"; tried to add: ",f.colorStops[e],"; stop: ",e,"; in: ",n])}v.fillStyle=s,v.fillRect(0,0,y,y),o.fillStyle=f.colorStops[e-1].color,o.fillRect(0,0,h.width,h.height),o.drawImage(l,f.cx-f.rx,f.cy-f.ry,2*f.rx,2*f.ry)}return h}},r.Generate.ListAlpha=function(n){var t="",i;do i=n%26,t=String.fromCharCode(i+64)+t,n=n/26;while(n*26>26);return t},r.Generate.ListRoman=function(n){var i=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],r=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],u="",t,f=i.length;if(n<=0||n>=4e3)return n;for(t=0;t<f;t+=1)while(n>=r[t])n-=r[t],u+=i[t];return u}}(),r.Parse=function(f,e){function ot(){return Math.max(Math.max(c.body.scrollWidth,c.documentElement.scrollWidth),Math.max(c.body.offsetWidth,c.documentElement.offsetWidth),Math.max(c.body.clientWidth,c.documentElement.clientWidth))}function st(){return Math.max(Math.max(c.body.scrollHeight,c.documentElement.scrollHeight),Math.max(c.body.offsetHeight,c.documentElement.offsetHeight),Math.max(c.body.clientHeight,c.documentElement.clientHeight))}function p(n,t){var i=parseInt(s(n,t),10);return isNaN(i)?0:i}function k(n,t,i,r,u,f){f!=="transparent"&&(n.setVariable("fillStyle",f),n.fillRect(t,i,r,u),w+=1)}function dt(n,t){switch(t){case"lowercase":return n.toLowerCase();case"capitalize":return n.replace(/(^|\s|:|-|\(|\))([a-z])/g,function(n,t,i){if(n.length>0)return t+i.toUpperCase()});case"uppercase":return n.toUpperCase();default:return n}}function gt(n){return/^(normal|none|0px)$/.test(n)}function ht(n,t,i,u){n!==null&&r.Util.trimText(n).length>0&&(u.fillText(n,t,i),w+=1)}function ct(n,t,i,u){var f=s(t,"fontWeight"),e=s(t,"fontFamily"),o=s(t,"fontSize");switch(parseInt(f,10)){case 401:f="bold";break;case 400:f="normal"}return n.setVariable("fillStyle",u),n.setVariable("font",[s(t,"fontStyle"),s(t,"fontVariant"),f,o,e].join(" ")),n.setVariable("textAlign","left"),i!=="none"?r.Util.Font(e,o,c):void 0}function ni(n,t,i,r,u){switch(t){case"underline":k(n,i.left,Math.round(i.top+r.baseline+r.lineWidth),i.width,1,u);break;case"overline":k(n,i.left,Math.round(i.top),i.width,1,u);break;case"line-through":k(n,i.left,Math.ceil(i.top+r.middle+r.lineWidth),i.width,1,u)}}function ti(n,t,i,u){var f,e;return ft.rangeBounds?((i!=="none"||r.Util.trimText(t).length!==0)&&(f=ii(t,n.node,n.textOffset)),n.textOffset+=t.length):n.node&&typeof n.node.nodeValue=="string"&&(e=u?n.node.splitText(t.length):null,f=ri(n.node),n.node=e),f}function ii(n,t,i){var r=c.createRange();return r.setStart(t,i),r.setEnd(t,i+n.length),r.getBoundingClientRect()}function ri(n){var i=n.parentNode,t=c.createElement("wrapper"),f=n.cloneNode(!0),u;return t.appendChild(n.cloneNode(!0)),i.replaceChild(t,n),u=r.Util.Bounds(t),i.replaceChild(f,t),u}function lt(n,t,i){var f=i.ctx,c=s(n,"color"),o=s(n,"textDecoration"),h=s(n,"textAlign"),l,u,a={node:t,textOffset:0};r.Util.trimText(t.nodeValue).length>0&&(t.nodeValue=dt(t.nodeValue,s(n,"textTransform")),h=h.replace(["-webkit-auto"],["auto"]),u=!e.letterRendering&&/^(left|right|justify|auto)$/.test(h)&&gt(s(n,"letterSpacing"))?t.nodeValue.split(/(\b| )/):t.nodeValue.split(""),l=ct(f,n,o,c),e.chinese&&u.forEach(function(n,t){/.*[\u4E00-\u9FA5].*$/.test(n)&&(n=n.split(""),n.unshift(t,1),u.splice.apply(u,n))}),u.forEach(function(n,t){var i=ti(a,n,o,t<u.length-1);i&&(ht(n,i.left,i.bottom,f),ni(f,o,i,l,c))}))}function ui(n,t){var i=c.createElement("boundelement"),u,f;return i.style.display="inline",u=n.style.listStyleType,n.style.listStyleType="none",i.appendChild(c.createTextNode(t)),n.insertBefore(i,n.firstChild),f=r.Util.Bounds(i),n.removeChild(i),n.style.listStyleType=u,f}function fi(n){var t=-1,i=1,r=n.parentNode.childNodes;if(n.parentNode){while(r[++t]!==n)r[t].nodeType===1&&i++;return i}return-1}function ei(n,t){var i=fi(n),u;switch(t){case"decimal":u=i;break;case"decimal-leading-zero":u=i.toString().length===1?i="0"+i.toString():i.toString();break;case"upper-roman":u=r.Generate.ListRoman(i);break;case"lower-roman":u=r.Generate.ListRoman(i).toLowerCase();break;case"lower-alpha":u=r.Generate.ListAlpha(i).toLowerCase();break;case"upper-alpha":u=r.Generate.ListAlpha(i)}return u+". "}function oi(n,t,i){var f,r,u=t.ctx,e=s(n,"listStyleType"),o;if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(e)){if(r=ei(n,e),o=ui(n,r),ct(u,n,"none",s(n,"color")),s(n,"listStylePosition")==="inside")u.setVariable("textAlign","left"),f=i.left;else return;ht(r,f,o.bottom,u)}}function at(n){var t=f[n];return t&&t.succeeded===!0?t.img:!1}function vt(n,t){var i=Math.max(n.left,t.left),r=Math.max(n.top,t.top),u=Math.min(n.left+n.width,t.left+t.width),f=Math.min(n.top+n.height,t.top+t.height);return{left:i,top:r,width:u-i,height:f-r}}function si(n,t){var i;return t?n!=="auto"?(i=o(n),t.children.push(i),i):t:o(0)}function yt(n,t,i,r,u){var f=p(t,"paddingLeft"),e=p(t,"paddingTop"),o=p(t,"paddingRight"),s=p(t,"paddingBottom");pt(n,i,0,0,i.width,i.height,r.left+f+u[3].width,r.top+e+u[0].width,r.width-(u[1].width+u[3].width+f+o),r.height-(u[0].width+u[2].width+e+s))}function hi(n){return["Top","Right","Bottom","Left"].map(function(t){return{width:p(n,"border"+t+"Width"),color:s(n,"border"+t+"Color")}})}function ci(n){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){return s(n,"border"+t+"Radius")})}function y(n,t,i,r){var u=function(n,t,i){return{x:n.x+(t.x-n.x)*i,y:n.y+(t.y-n.y)*i}};return{start:n,startControl:t,endControl:i,end:r,subdivide:function(f){var e=u(n,t,f),o=u(t,i,f),s=u(i,r,f),h=u(e,o,f),c=u(o,s,f),l=u(h,c,f);return[y(n,e,h,l),y(l,c,s,r)]},curveTo:function(n){n.push(["bezierCurve",t.x,t.y,i.x,i.y,r.x,r.y])},curveToReversed:function(r){r.push(["bezierCurve",i.x,i.y,t.x,t.y,n.x,n.y])}}}function v(n,t,i,r,u,f,e){t[0]>0||t[1]>0?(n.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(n),r[1].curveTo(n)):n.push(["line",f,e]),(i[0]>0||i[1]>0)&&n.push(["line",u[0].start.x,u[0].start.y])}function d(n,t,i,r,u,f,e){var o=[];return t[0]>0||t[1]>0?(o.push(["line",r[1].start.x,r[1].start.y]),r[1].curveTo(o)):o.push(["line",n.c1[0],n.c1[1]]),i[0]>0||i[1]>0?(o.push(["line",f[0].start.x,f[0].start.y]),f[0].curveTo(o),o.push(["line",e[0].end.x,e[0].end.y]),e[0].curveToReversed(o)):(o.push(["line",n.c2[0],n.c2[1]]),o.push(["line",n.c3[0],n.c3[1]])),t[0]>0||t[1]>0?(o.push(["line",u[1].end.x,u[1].end.y]),u[1].curveToReversed(o)):o.push(["line",n.c4[0],n.c4[1]]),o}function li(n,t,i){var r=n.left,u=n.top,f=n.width,e=n.height,v=t[0][0],y=t[0][1],o=t[1][0],p=t[1][1],s=t[2][0],h=t[2][1],w=t[3][0],c=t[3][1],a=f-o,b=e-s,k=f-h,d=e-c;return{topLeftOuter:l(r,u,v,y).topLeft.subdivide(.5),topLeftInner:l(r+i[3].width,u+i[0].width,Math.max(0,v-i[3].width),Math.max(0,y-i[0].width)).topLeft.subdivide(.5),topRightOuter:l(r+a,u,o,p).topRight.subdivide(.5),topRightInner:l(r+Math.min(a,f+i[3].width),u+i[0].width,a>f+i[3].width?0:o-i[3].width,p-i[0].width).topRight.subdivide(.5),bottomRightOuter:l(r+k,u+b,h,s).bottomRight.subdivide(.5),bottomRightInner:l(r+Math.min(k,f+i[3].width),u+Math.min(b,e+i[0].width),Math.max(0,h-i[1].width),Math.max(0,s-i[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:l(r,u+d,w,c).bottomLeft.subdivide(.5),bottomLeftInner:l(r+i[3].width,u+d,Math.max(0,w-i[3].width),Math.max(0,c-i[2].width)).bottomLeft.subdivide(.5)}}function ai(n,t,i,r,u){var e=s(n,"backgroundClip"),f=[];switch(e){case"content-box":case"padding-box":v(f,r[0],r[1],t.topLeftInner,t.topRightInner,u.left+i[3].width,u.top+i[0].width),v(f,r[1],r[2],t.topRightInner,t.bottomRightInner,u.left+u.width-i[1].width,u.top+i[0].width),v(f,r[2],r[3],t.bottomRightInner,t.bottomLeftInner,u.left+u.width-i[1].width,u.top+u.height-i[2].width),v(f,r[3],r[0],t.bottomLeftInner,t.topLeftInner,u.left+i[3].width,u.top+u.height-i[2].width);break;default:v(f,r[0],r[1],t.topLeftOuter,t.topRightOuter,u.left,u.top),v(f,r[1],r[2],t.topRightOuter,t.bottomRightOuter,u.left+u.width,u.top),v(f,r[2],r[3],t.bottomRightOuter,t.bottomLeftOuter,u.left+u.width,u.top+u.height),v(f,r[3],r[0],t.bottomLeftOuter,t.topLeftOuter,u.left,u.top+u.height)}return f}function vi(n,t,i){for(var l=t.left,p=t.top,a=t.width,v=t.height,u,r,e,o,c,s=ci(n),f=li(t,s,i),y={clip:ai(n,f,i,s,t),borders:[]},h=0;h<4;h++)if(i[h].width>0){u=l,r=p,e=a,o=v-i[2].width;switch(h){case 0:o=i[0].width,c=d({c1:[u,r],c2:[u+e,r],c3:[u+e-i[1].width,r+o],c4:[u+i[3].width,r+o]},s[0],s[1],f.topLeftOuter,f.topLeftInner,f.topRightOuter,f.topRightInner);break;case 1:u=l+a-i[1].width,e=i[1].width,c=d({c1:[u+e,r],c2:[u+e,r+o+i[2].width],c3:[u,r+o],c4:[u,r+i[0].width]},s[1],s[2],f.topRightOuter,f.topRightInner,f.bottomRightOuter,f.bottomRightInner);break;case 2:r=r+v-i[2].width,o=i[2].width,c=d({c1:[u+e,r+o],c2:[u,r+o],c3:[u+i[3].width,r],c4:[u+e-i[2].width,r]},s[2],s[3],f.bottomRightOuter,f.bottomRightInner,f.bottomLeftOuter,f.bottomLeftInner);break;case 3:e=i[3].width,c=d({c1:[u,r+o+i[2].width],c2:[u,r],c3:[u+e,r+i[0].width],c4:[u+e,r+o]},s[3],s[0],f.bottomLeftOuter,f.bottomLeftInner,f.topLeftOuter,f.topLeftInner)}y.borders.push({args:c,color:i[h].color})}return y}function it(n,t){var i=n.drawShape();return t.forEach(function(n,t){i[t===0?"moveTo":n[0]+"To"].apply(null,n.slice(1))}),i}function yi(n,t,i){i!=="transparent"&&(n.setVariable("fillStyle",i),it(n,t),n.fill(),w+=1)}function rt(n,t,i){var r=c.createElement("valuewrap"),f,e;["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"].forEach(function(t){try{r.style[t]=s(n,t)}catch(i){u("html2canvas: Parse: Exception caught in renderFormValue: "+i.message)}}),r.style.borderColor="black",r.style.borderStyle="solid",r.style.display="block",r.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(n.type)||n.nodeName==="SELECT")&&(r.style.lineHeight=s(n,"height")),r.style.top=t.top+"px",r.style.left=t.left+"px",f=n.nodeName==="SELECT"?(n.options[n.selectedIndex]||0).text:n.value,f||(f=n.placeholder),e=c.createTextNode(f),r.appendChild(e),b.appendChild(r),lt(n,e,i),b.removeChild(r)}function pt(n){n.drawImage.apply(n,Array.prototype.slice.call(arguments,1)),w+=1}function wt(i,f){var o=n.getComputedStyle(i,f),e,h,c,s;if(o&&o.content&&o.content!=="none"&&o.content!=="-moz-alt-content")return e=o.content+"",h=e.substr(0,1),h===e.substr(e.length-1)&&h.match(/'|"/)&&(e=e.substr(1,e.length-2)),c=e.substr(0,3)==="url",s=t.createElement(c?"img":"span"),s.className=a+"-before "+a+"-after",Object.keys(o).filter(pi).forEach(function(n){try{s.style[n]=o[n]}catch(t){u(["Tried to assign readonly property ",n,"Error:",t])}}),c?s.src=r.Util.parseBackgroundImage(e)[0].args[0]:s.innerHTML=e,s}function pi(t){return isNaN(n.parseInt(t,10))}function wi(n,t){var i=wt(n,":before"),r=wt(n,":after");(i||r)&&(i&&(n.className+=" "+a+"-before",n.parentNode.insertBefore(i,n),g(i,t,!0),n.parentNode.removeChild(i),n.className=n.className.replace(a+"-before","").trim()),r&&(n.className+=" "+a+"-after",n.appendChild(r),g(r,t,!0),n.removeChild(r),n.className=n.className.replace(a+"-after","").trim()))}function bt(n,t,i,r){var u=Math.round(r.left+i.left),f=Math.round(r.top+i.top);n.createPattern(t),n.translate(u,f),n.fill(),n.translate(-u,-f)}function ut(n,t,i,r,u,f,e,o){var s=[];s.push(["line",Math.round(u),Math.round(f)]),s.push(["line",Math.round(u+e),Math.round(f)]),s.push(["line",Math.round(u+e),Math.round(o+f)]),s.push(["line",Math.round(u),Math.round(o+f)]),it(n,s),n.save(),n.clip(),bt(n,t,i,r),n.restore()}function bi(n,t,i){k(n,t.left,t.top,t.width,t.height,i)}function ki(n,t,i,u,f){var h=r.Util.BackgroundSize(n,t,u,f),e=r.Util.BackgroundPosition(n,t,u,f,h),o=s(n,"backgroundRepeat").split(",").map(function(n){return n.trim()});u=gi(u,h),o=o[f]||o[0];switch(o){case"repeat-x":ut(i,u,e,t,t.left,t.top+e.top,99999,u.height);break;case"repeat-y":ut(i,u,e,t,t.left+e.left,t.top,u.width,99999);break;case"no-repeat":ut(i,u,e,t,t.left+e.left,t.top+e.top,u.width,u.height);break;default:bt(i,u,e,{top:t.top,left:t.left,width:u.width,height:u.height})}}function di(n,t,i){for(var f=s(n,"backgroundImage"),h=r.Util.parseBackgroundImage(f),e,o=h.length,c;o--;)(f=h[o],f.args&&f.args.length!==0)&&(c=f.method==="url"?f.args[0]:f.value,e=at(c),e?ki(n,t,i,e,o):u("html2canvas: Error loading background:",f))}function gi(n,t){if(n.width===t.width&&n.height===t.height)return n;var r,i=c.createElement("canvas");return i.width=t.width,i.height=t.height,r=i.getContext("2d"),pt(r,n,0,0,n.width,n.height,0,0,t.width,t.height),i}function nr(n,t,i){var r=s(t,"opacity")*(i?i.opacity:1);return n.setVariable("globalAlpha",r),r}function tr(n,t,i){var f=h(t?i.width:ot(),t?i.height:st()),u={ctx:f,zIndex:si(s(n,"zIndex"),t?t.zIndex:null),opacity:nr(f,n,t),cssPosition:s(n,"position"),borders:hi(n),clip:t&&t.clip?r.Util.Extend({},t.clip):null};return e.useOverflow===!0&&/(hidden|scroll|auto)/.test(s(n,"overflow"))===!0&&/(BODY)/i.test(n.nodeName)===!1&&(u.clip=u.clip?vt(u.clip,i):i),u.zIndex.children.push(u),u}function ir(n,t,i){var r={left:t.left+n[3].width,top:t.top+n[0].width,width:t.width-(n[1].width+n[3].width),height:t.height-(n[0].width+n[2].width)};return i&&(r=vt(r,i)),r}function kt(n,t,i){var f=r.Util.Bounds(n),l,v=et.test(n.nodeName)?"#efefef":s(n,"backgroundColor"),e=tr(n,t,f),h=e.borders,o=e.ctx,c=ir(h,f,e.clip),a=vi(n,f,h);it(o,a.clip),o.save(),o.clip(),c.height>0&&c.width>0&&(bi(o,f,v),di(n,c,o)),o.restore(),a.borders.forEach(function(n){yi(o,n.args,n.color)}),i||wi(n,e);switch(n.nodeName){case"IMG":(l=at(n.getAttribute("src")))?yt(o,n,l,f,h):u("html2canvas: Error loading <img>:"+n.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(n.type)&&(n.value||n.placeholder||[]).length>0&&rt(n,f,e);break;case"TEXTAREA":(n.value||n.placeholder||"").length>0&&rt(n,f,e);break;case"SELECT":(n.options||n.placeholder||"").length>0&&rt(n,f,e);break;case"LI":oi(n,e,c);break;case"CANVAS":yt(o,n,n,f,h)}return e}function rr(n){return s(n,"display")!=="none"&&(s(n,"visibility")!=="hidden"&&!n.hasAttribute("data-html2canvas-ignore")||n.hasAttribute("data-html2canvas-visible"))}function g(n,t,i){rr(n)&&(t=kt(n,t,i)||t,et.test(n.nodeName)||r.Util.Children(n).forEach(function(r){r.nodeType===1?g(r,t,i):r.nodeType===3&&lt(n,r,t)}))}function ur(n,t){function o(n){for(var s=r.Util.Children(n),c=s.length,f,u,h,t,e=0;e<c;e+=1)if(t=s[e],t.nodeType===3)i+=t.nodeValue.replace(/</g,"&lt;").replace(/>/g,"&gt;");else if(t.nodeType===1&&!/^(script|meta|title)$/.test(t.nodeName.toLowerCase())){if(i+="<"+t.nodeName.toLowerCase(),t.hasAttributes())for(f=t.attributes,h=f.length,u=0;u<h;u+=1)i+=" "+f[u].name+'="'+f[u].value+'"';i+=">",o(t),i+="<\/"+t.nodeName.toLowerCase()+">"}}var u=new Image,f=ot(),e=st(),i="";o(n),u.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' version='1.1' width='"+f+"' height='"+e+"'>","<foreignObject width='"+f+"' height='"+e+"'>","<html xmlns='http://www.w3.org/1999/xhtml' style='margin:0;'>",i.replace(/\#/g,"%23"),"<\/html>","<\/foreignObject>","<\/svg>"].join(""),u.onload=function(){t.svgRender=u}}function fr(){var n=kt(nt,null);return ft.svgRendering&&ur(t.documentElement,n),Array.prototype.slice.call(nt.children,0).forEach(function(t){g(t,n)}),n.backgroundColor=s(t.documentElement,"backgroundColor"),b.removeChild(tt),n}var l;n.scroll(0,0);var nt=e.elements===i?t.body:e.elements[0],w=0,c=nt.ownerDocument,ft=r.Util.Support(e,c),et=new RegExp("("+e.ignoreElements+")"),b=c.body,s=r.Util.getCSS,a="___html2canvas___pseudoelement",tt=c.createElement("style");return tt.innerHTML="."+a+'-before:before { content: "" !important; display: none !important; }.'+a+'-after:after { content: "" !important; display: none !important; }',b.appendChild(tt),f=f||{},l=function(n){return function(t,i,r,u){var o=r*n,s=u*n,f=t+r,e=i+u;return{topLeft:y({x:t,y:e},{x:t,y:e-s},{x:f-o,y:i},{x:f,y:i}),topRight:y({x:t,y:i},{x:t+o,y:i},{x:f,y:e-s},{x:f,y:e}),bottomRight:y({x:f,y:i},{x:f,y:i+s},{x:t+o,y:e},{x:t,y:e}),bottomLeft:y({x:f,y:e},{x:f-o,y:e},{x:t,y:i+s},{x:t,y:i})}}}(4*((Math.sqrt(2)-1)/3)),fr()},r.Preload=function(f){function rt(n){o.href=n,o.href=o.href;var t=o.protocol+o.host;return t===p}function h(){u("html2canvas: start: images: "+e.numLoaded+" / "+e.numTotal+" (failed: "+e.numFailed+")"),!e.firstRun&&e.numLoaded>=e.numTotal&&(u("Finished loading images: # "+e.numTotal+" (failed: "+e.numFailed+")"),typeof f.complete=="function"&&f.complete(e))}function k(t,r,u){var c,v=f.proxy,s;o.href=t,t=o.href,c="html2canvas_"+nt++,u.callbackname=c,v+=v.indexOf("?")>-1?"&":"?",v+="url="+encodeURIComponent(t)+"&callback="+c,s=a.createElement("script"),n[c]=function(t){t.substring(0,6)==="error:"?(u.succeeded=!1,e.numLoaded++,e.numFailed++,h()):(l(r,u),r.src=t),n[c]=i;try{delete n[c]}catch(f){}s.parentNode.removeChild(s),s=null,delete u.script,delete u.callbackname},s.setAttribute("type","text/javascript"),s.setAttribute("src",v),u.script=s,n.document.body.appendChild(s)}function d(t,i){var u=n.getComputedStyle(t,i),f=u.content;f.substr(0,3)==="url"&&s.loadImage(r.Util.parseBackgroundImage(f)[0].args[0]),y(u.backgroundImage,t)}function ut(n){d(n,":before"),d(n,":after")}function ft(n,t){var u=r.Generate.Gradient(n,t);u!==i&&(e[n]={img:u,succeeded:!0},e.numTotal++,e.numLoaded++,h())}function et(n){return n&&n.method&&n.args&&n.args.length>0}function y(n,t){var u;r.Util.parseBackgroundImage(n).filter(et).forEach(function(n){n.method==="url"?s.loadImage(n.args[0]):n.method.match(/\-?gradient$/)&&(u===i&&(u=r.Util.Bounds(t)),ft(n.value,u))})}function g(n){var t=!1;try{r.Util.Children(n).forEach(function(n){g(n)})}catch(f){}try{t=n.nodeType}catch(e){t=!1,u("html2canvas: failed to access some element's nodeType - Exception: "+e.message)}if(t===1||t===i){ut(n);try{y(r.Util.getCSS(n,"backgroundImage"),n)}catch(f){u("html2canvas: failed to get background-image - Exception: "+f.message)}y(n)}}function l(t,r){t.onload=function(){r.timer!==i&&n.clearTimeout(r.timer),e.numLoaded++,r.succeeded=!0,t.onerror=t.onload=null,h()},t.onerror=function(){if(t.crossOrigin==="anonymous"&&(n.clearTimeout(r.timer),f.proxy)){var i=t.src;t=new Image,r.img=t,t.src=i,k(t.src,t,r);return}e.numLoaded++,e.numFailed++,r.succeeded=!1,t.onerror=t.onload=null,h()}}var e={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},p,s,c,nt=0,w=f.elements[0]||t.body,a=w.ownerDocument,b=a.images,tt=b.length,o=a.createElement("a"),it=function(n){return n.crossOrigin!==i}(new Image),v;for(o.href=n.location.href,p=o.protocol+o.host,s={loadImage:function(t){var r,u;t&&e[t]===i&&(r=new Image,t.match(/data:image\/.*;base64,/i)?(r.src=t.replace(/url\(['"]{0,}|['"]{0,}\)$/ig,""),u=e[t]={img:r},e.numTotal++,l(r,u)):rt(t)||f.allowTaint===!0?(u=e[t]={img:r},e.numTotal++,l(r,u),r.src=t):it&&!f.allowTaint&&f.useCORS?(r.crossOrigin="anonymous",u=e[t]={img:r},e.numTotal++,l(r,u),r.src=t,r.customComplete=function(){this.img.complete?this.img.onerror():this.timer=n.setTimeout(this.img.customComplete,100)}.bind(u),r.customComplete()):f.proxy&&(u=e[t]={img:r},e.numTotal++,k(t,r,u)))},cleanupDOM:function(r){var o,s;if(!e.cleanupDone){r&&typeof r=="string"?u("html2canvas: Cleanup because: "+r):u("html2canvas: Cleanup after timeout: "+f.timeout+" ms.");for(s in e)if(e.hasOwnProperty(s)&&(o=e[s],typeof o=="object"&&o.callbackname&&o.succeeded===i)){n[o.callbackname]=i;try{delete n[o.callbackname]}catch(c){}o.script&&o.script.parentNode&&(o.script.setAttribute("src","about:blank"),o.script.parentNode.removeChild(o.script)),e.numLoaded++,e.numFailed++,u("html2canvas: Cleaned up failed img: '"+s+"' Steps: "+e.numLoaded+" / "+e.numTotal)}n.stop!==i?n.stop():t.execCommand!==i&&t.execCommand("Stop",!1),t.close!==i&&t.close(),e.cleanupDone=!0,r&&typeof r=="string"||h()}},renderingDone:function(){v&&n.clearTimeout(v)}},f.timeout>0&&(v=n.setTimeout(s.cleanupDOM,f.timeout)),u("html2canvas: Preload starts: finding background-images"),e.firstRun=!0,g(w),u("html2canvas: Preload: Finding images"),c=0;c<tt;c+=1)s.loadImage(b[c].getAttribute("src"));return e.firstRun=!1,u("html2canvas: Preload: Done."),e.numTotal===e.numLoaded&&h(),s},r.Renderer=function(n,u){function f(n){var t=[],i=function(n){var r=[],u=[];n.children.forEach(function(n){n.children&&n.children.length>0?(r.push(n),u.push(n.zindex)):t.push(n)}),u.sort(function(n,t){return n-t}),u.forEach(function(n){var t;r.some(function(i,r){return t=r,i.zindex===n}),i(r.splice(t,1)[0])})};return i(n.zIndex),t}function e(n){var t;if(typeof u.renderer=="string"&&r.Renderer[n]!==i)t=r.Renderer[n](u);else if(typeof n=="function")t=n(u);else throw new Error("Unknown renderer");if(typeof t!="function")throw new Error("Invalid renderer defined");return t}return e(u.renderer)(n,u,t,f(n),r)},r.Util.Support=function(n,t){function r(){var r=new Image,n=t.createElement("canvas"),f=n.getContext===i?!1:n.getContext("2d");if(f===!1)return!1;n.width=n.height=10,r.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'><foreignObject width='10' height='10'><div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>sup<\/div><\/foreignObject><\/svg>";try{f.drawImage(r,0,0),n.toDataURL()}catch(e){return!1}return u("html2canvas: Parse: SVG powered rendering available"),!0}function f(){var i,n,r,u,f=!1;return t.createRange&&(i=t.createRange(),i.getBoundingClientRect&&(n=t.createElement("boundtest"),n.style.height="123px",n.style.display="block",t.body.appendChild(n),i.selectNode(n),r=i.getBoundingClientRect(),u=r.height,u===123&&(f=!0),t.body.removeChild(n))),f}return{rangeBounds:f(),svgRendering:n.svgRendering&&r()}},n.html2canvas=function(t,i){t=t.length?t:[t];var e,o,f={logging:!1,elements:t,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return f=r.Util.Extend(i,f),r.logging=f.logging,f.complete=function(n){if((typeof f.onpreloaded!="function"||f.onpreloaded(n)!==!1)&&(e=r.Parse(n,f),typeof f.onparsed!="function"||f.onparsed(e)!==!1)&&(o=r.Renderer(e,f),typeof f.onrendered=="function"))f.onrendered(o)},n.setTimeout(function(){r.Preload(f)},0),{render:function(n,t){return r.Renderer(n,r.Util.Extend(t,f))},parse:function(n,t){return r.Parse(n,r.Util.Extend(t,f))},preload:function(n){return r.Preload(r.Util.Extend(n,f))},log:u}},n.html2canvas.log=u,n.html2canvas.Renderer={Canvas:i},r.Renderer.Canvas=function(n){function h(n,t){n.beginPath(),t.forEach(function(t){n[t.name].apply(n,t.arguments)}),n.closePath()}function c(n){if(s.indexOf(n.arguments[0].src)===-1){e.drawImage(n.arguments[0],0,0);try{e.getImageData(0,0,1,1)}catch(t){return f=o.createElement("canvas"),e=f.getContext("2d"),!1}s.push(n.arguments[0].src)}return!0}function l(n){return n==="transparent"||n==="rgba(0, 0, 0, 0)"}function a(t,i){switch(i.type){case"variable":t[i.name]=i.arguments;break;case"function":if(i.name==="createPattern"){if(i.arguments[0].width>0&&i.arguments[0].height>0)try{t.fillStyle=t.createPattern(i.arguments[0],"repeat")}catch(r){u("html2canvas: Renderer: Error creating pattern",r.message)}}else i.name==="drawShape"?h(t,i.arguments):i.name==="drawImage"?i.arguments[8]>0&&i.arguments[7]>0&&(!n.taintTest||n.taintTest&&c(i))&&t.drawImage.apply(t,i.arguments):t[i.name].apply(t,i.arguments)}}n=n||{};var o=t,s=[],f=t.createElement("canvas"),e=f.getContext("2d"),r=n.canvas||o.createElement("canvas");return function(n,t,f,e,o){var s=r.getContext("2d"),h,p,y,v,c,w;if(r.width=r.style.width=t.width||n.ctx.width,r.height=r.style.height=t.height||n.ctx.height,w=s.fillStyle,s.fillStyle=l(n.backgroundColor)&&t.background!==i?t.background:n.backgroundColor,s.fillRect(0,0,r.width,r.height),s.fillStyle=w,t.svgRendering&&n.svgRender!==i)s.drawImage(n.svgRender,0,0);else for(p=0,y=e.length;p<y;p+=1)h=e.splice(0,1)[0],h.canvasPosition=h.canvasPosition||{},s.textBaseline="bottom",h.clip&&(s.save(),s.beginPath(),s.rect(h.clip.left,h.clip.top,h.clip.width,h.clip.height),s.clip()),h.ctx.storage&&h.ctx.storage.forEach(a.bind(null,s)),h.clip&&s.restore();return(u("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),y=t.elements.length,y===1&&typeof t.elements[0]=="object"&&t.elements[0].nodeName!=="BODY")?(c=o.Util.Bounds(t.elements[0]),v=f.createElement("canvas"),v.width=c.width,v.height=c.height,s=v.getContext("2d"),s.drawImage(r,c.left,c.top,c.width,c.height,0,0,c.width,c.height),r=null,v):r}}}(window,document),function(n){n.fn.numeric=function(t,i){typeof t=="boolean"&&(t={decimal:t}),t=t||{},typeof t.negative=="undefined"&&(t.negative=!0),typeof t.decimalPlaces=="undefined"&&(t.decimalPlaces=-1),typeof t.min=="undefined"&&(t.min=null),typeof t.max=="undefined"&&(t.max=null);var r=t.decimal===!1?"":t.decimal||".",u=t.negative===!0?!0:!1,f=typeof t.decimalPlaces=="number"?t.decimalPlaces:2,e=typeof t.min=="number"?t.min:null,o=typeof t.max=="number"?t.max:null,i=typeof i=="function"?i:function(){};return this.data("numeric.decimal",r).data("numeric.negative",u).data("numeric.callback",i).data("numeric.decimalPlaces",f).data("numeric.min",e).data("numeric.max",o).keypress(n.fn.numeric.keypress).keyup(n.fn.numeric.keyup).blur(n.fn.numeric.blur)},n.fn.numeric_DecimalSeparator=function(n){return n!==undefined&&(typeof n=="boolean"?this.data("numeric.decimal",n===!1?"":"."):typeof n=="string"&&this.data("numeric.decimal",n.length>0?n[0]:"")),this.data("numeric.decimal")},n.fn.numeric_AllowNegatives=function(n){return typeof n=="boolean"&&this.data("numeric.negative",n),this.data("numeric.negative")},n.fn.numeric_DecimalPlaces=function(n){return typeof n=="number"&&this.data("numeric.decimalPlaces",n),this.data("numeric.decimalPlaces")},n.fn.numeric_Min=function(n){return typeof n=="number"&&this.data("numeric.min",n),this.data("numeric.min")},n.fn.numeric_Max=function(n){return typeof n=="number"&&this.data("numeric.max",n),this.data("numeric.max")},n.fn.numeric_Callback=function(n){return typeof n=="function"&&this.data("numeric.callback",n),this.data("numeric.callback")},n.fn.numeric.keypress=function(t){var u=n.data(this,"numeric.decimal"),f=n.data(this,"numeric.negative"),i=t.charCode?t.charCode:t.keyCode?t.keyCode:0,r;if(i==13&&this.nodeName.toLowerCase()=="input")return!0;if(i==13)return!1;if((r=!1,t.ctrlKey&&i==97||t.ctrlKey&&i==65)||t.ctrlKey&&i==120||t.ctrlKey&&i==88||t.ctrlKey&&i==99||t.ctrlKey&&i==67||t.ctrlKey&&i==122||t.ctrlKey&&i==90||t.ctrlKey&&i==118||t.ctrlKey&&i==86||t.shiftKey&&i==45)return!0;if(i<48||i>57){if(this.value.indexOf("-")!=0&&f&&i==45&&(this.value.length==0||n.fn.getSelectionStart(this)==0))return!0;u&&i==u.charCodeAt(0)&&this.value.indexOf(u)!=-1&&(r=!1),i!=8&&i!=9&&i!=13&&i!=35&&i!=36&&i!=37&&i!=38&&i!=39&&i!=40&&i!=46?r=!1:typeof t.charCode!="undefined"&&(t.keyCode==t.which&&t.which!=0?(r=!0,t.which==46&&(r=!1)):t.keyCode!=0&&t.charCode==0&&t.which==0&&(r=!0)),u&&i==u.charCodeAt(0)&&(r=this.value.indexOf(u)==-1?!0:!1)}else r=!0;return r},n.fn.numeric.keyup=function(){var t=this.value,l,a,v,y,s,e,i,u,f,p,w;if(t.length>0){var b=n.fn.getSelectionStart(this),r=n.data(this,"numeric.decimal"),k=n.data(this,"numeric.negative"),o=n.data(this,"numeric.decimalPlaces"),h=n.data(this,"numeric.min"),c=n.data(this,"numeric.max");for(r!=""&&(l=t.indexOf(r),l==0&&(this.value="0"+t),l==1&&t.charAt(0)=="-"&&(this.value="-0"+t.substring(1)),t=this.value),a=[0,1,2,3,4,5,6,7,8,9,"-",r],v=t.length,i=v-1;i>=0;i--){for(u=t.charAt(i),i!=0&&u=="-"?t=t.substring(0,i)+t.substring(i+1):i!=0||k||u!="-"||(t=t.substring(1)),y=!1,s=0;s<a.length;s++)if(u==a[s]){y=!0;break}y&&u!=" "||(t=t.substring(0,i)+t.substring(i+1))}if(e=t.indexOf(r),e>0){for(o===0&&(e-=1),i=v-1;i>e;i--)u=t.charAt(i),u==r&&(t=t.substring(0,i)+t.substring(i+1));o===0&&(e=-1)}f=parseFloat(t),isNaN(f)||(h!==null&&f<h?f=h:c!==null&&f>c&&(f=c),o===-1?(p=t.indexOf(r)!==-1,w=e===-1?0:t.length-e-1,t=f.toFixed(w),p&&t.indexOf(r)===-1&&(t+=r)):t=f.toFixed(o)),this.value=t,n.fn.setSelection(this,b)}},n.fn.numeric.blur=function(){var r=n.data(this,"numeric.decimal"),u=n.data(this,"numeric.callback"),t=this.value,i;t!=""&&(i=new RegExp("^\\d+$|\\d*"+r+"\\d+"),i.exec(t)||u.apply(this))},n.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",n.fn.numeric.keypress).unbind("blur",n.fn.numeric.blur)},n.fn.getSelectionStart=function(n){if(n.createTextRange){var t=document.selection.createRange().duplicate();return(t.moveEnd("character",n.value.length),t.text=="")?n.value.length:n.value.lastIndexOf(t.text)}return n.selectionStart},n.fn.setSelection=function(n,t){if(typeof t=="number"&&(t=[t,t]),t&&t.constructor==Array&&t.length==2)if(n.createTextRange){var i=n.createTextRange();i.collapse(!0),i.moveStart("character",t[0]),i.moveEnd("character",t[1]),i.select()}else n.setSelectionRange&&(n.focus(),n.setSelectionRange(t[0],t[1]))}}(jQuery),function(n){n.getType=function(n){return Object.prototype.toString.call(n)},n.isNumber=function(t){return n.getType(t)==="[object Number]"},n.isString=function(t){return n.getType(t)==="[object String]"},n.isDate=function(t){return n.getType(t)==="[object Date]"},n.isFunction=function(t){return n.getType(t)==="[object Function]"},n.isArray=function(t){return n.getType(t)==="[object Array]"},n.StopEvent=function(n){(!n.keyCode||n.keyCode===13||n.keyCode===8||n.keyCode>=17&&n.keyCode<=90||n.keyCode>=96&&n.keyCode<=111||n.keyCode>=186&&n.keyCode<=222)&&(n.stopPropagation(),n.stopImmediatePropagation(),n.preventDefault())},n.GetPosition=function(n){var r=n.AnimationElement(),t={top:n.Top(),left:n.Left()},i={top:0,left:0},u,f,e,o;return t.left.Units==="%"?(u=r.parent().width(),f=t.left.Value,i.left=f/100*u):i.left=t.left.Value,t.top.Units==="%"?(e=r.parent().height(),o=t.top.Value,i.top=o/100*e):i.top=t.top.Value,i},n.GetSize=function(n){var r=n.AnimationElement(),t={width:n.Width(),height:n.Height()},i={width:0,height:0},u,f,e,o;return t.width.Units==="%"?(u=r.parent().width(),f=t.width.Value,i.width=f/100*u):i.width=t.width.Value,t.height.Units==="%"?(e=r.parent().height(),o=t.height.Value,i.height=o/100*e):i.height=t.height.Value,i},n.OpenInNewWindow=function(n){var t=window.open(n,"_blank");t.focus()},n.roundTo=function(n,t){var r=n<0?-1:1,i;return n=Math.abs(n),i=n%t,i<=t/2?(n-i)*r:(n+t-i)*r},n.standardiseEvent=function(n){return n&&n.originalEvent&&n.originalEvent.touches&&n.originalEvent.touches.length>0&&(n.pageX=n.originalEvent.touches[0].pageX,n.pageY=n.originalEvent.touches[0].pageY),n}}(TSUI||(TSUI={})),function(n){(function(n){var t=function(){function n(n,t,i){typeof n=="undefined"&&(n=""),typeof t=="undefined"&&(t=""),typeof i=="undefined"&&(i=null),this.Message=n,this.Trace=t,this.InnerException=i,console.log(this.toString())}return n.prototype.toString=function(){return typeof this+": "+this.Message+"\n"+this.Trace+(this.InnerException===null?"":"\nInner exception:\n"+this.InnerException.toString())},n}();n.Exception=t})(n.Exceptions||(n.Exceptions={}));var t=n.Exceptions}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(n){var t=function(n){function t(t,i,r){typeof t=="undefined"&&(t=""),typeof i=="undefined"&&(i=""),typeof r=="undefined"&&(r=null),n.call(this,"Invalid argument! Name: "+t,i,r),this.ArgumentName=t,this.Trace=i,this.InnerException=r}return __extends(t,n),t}(n.Exception);n.ArgumentException=t})(n.Exceptions||(n.Exceptions={}));var t=n.Exceptions}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(n){var t=function(n){function t(t,i,r,u){typeof t=="undefined"&&(t=""),typeof i=="undefined"&&(i=""),typeof r=="undefined"&&(r=""),typeof u=="undefined"&&(u=null),n.call(this,"Incorrect type! Expected type "+i+" got "+t,r,u),this.GivenType=t,this.ExpectedType=i,this.Trace=r,this.InnerException=u}return __extends(t,n),t}(n.Exception);n.IncorrectTypeException=t})(n.Exceptions||(n.Exceptions={}));var t=n.Exceptions}(TSUI||(TSUI={})),function(n){(function(n){var t=function(){function n(){}return n.prototype.Compare=function(n,t){return n.toString().localCompare(t.toString())},n}();n.ToStringComparer=t})(n.Collections||(n.Collections={}));var t=n.Collections}(TSUI||(TSUI={})),function(n){(function(t){var i=function(){function i(t){if(typeof t=="undefined"&&(t=null),this.items=[],this.OnModified=new n.Events.CollectionModifiedEvent,t!==null)if(n.isNumber(t))this.items=new Array(t);else if(n.isArray(t))this.items=t.slice(0);else throw new n.Exceptions.ArgumentException("obj","TSUI.Components.List:constructor",new n.Exceptions.IncorrectTypeException(typeof t,"number or array","TSUI.Components.List:constructor"));else this.items=[]}return i.prototype.Add=function(t){this.items.push(t),this.OnModified.Invoke(new n.Events.CollectionModifiedEventArgs(this,n.Events.CollectionModifications.Add,new i([t])))},i.prototype.AddRange=function(t){this.items.push(t.ToArray()),this.OnModified.Invoke(new n.Events.CollectionModifiedEventArgs(this,n.Events.CollectionModifications.Add,t))},i.prototype.Clear=function(){var t=this.Clone();this.items=[],this.OnModified.Invoke(new n.Events.CollectionModifiedEventArgs(this,n.Events.CollectionModifications.Remove,t))},i.prototype.Clone=function(){return new i(this.items.slice(0))},i.prototype.Concat=function(n){var t=new i(this.Count()+n.Count());return t.AddRange(this),t.AddRange(n),t},i.prototype.Contains=function(n){return this.IndexOf(n)>-1},i.prototype.CopyTo=function(n,t,i){typeof t=="undefined"&&(t=0),typeof i=="undefined"&&(i=this.Count()),n.AddRange(this.Range(t,i))},i.prototype.Count=function(){return this.items.length},i.prototype.ElementAt=function(n){return n>-1&&n<this.Count()?this.items[n]:null},i.prototype.Equals=function(n){return this===n},i.prototype.IndexOf=function(n){return this.items.indexOf(n)},i.prototype.Insert=function(t,r){this.items.splice(r,0,t),this.OnModified.Invoke(new n.Events.CollectionModifiedEventArgs(this,n.Events.CollectionModifications.Add,new i([t])))},i.prototype.InsertRange=function(t,r){this.items.splice(r,0,[]),this.OnModified.Invoke(new n.Events.CollectionModifiedEventArgs(this,n.Events.CollectionModifications.Add,new i(t)))},i.prototype.Range=function(n,t){typeof t=="undefined"&&(t=this.Count()-n);var r=Math.min(n+t,this.Count());return new i(this.items.slice(n,r))},i.prototype.Remove=function(t,r){typeof r=="undefined"&&(r=!0);var u=this.IndexOf(t);u>-1&&(this.items.splice(u,1),r&&this.OnModified.Invoke(new n.Events.CollectionModifiedEventArgs(this,n.Events.CollectionModifications.Remove,new i([t]))))},i.prototype.RemoveAll=function(t){for(var i=0;i<t.Count();i++)this.Remove(t.ElementAt(i),!1);this.OnModified.Invoke(new n.Events.CollectionModifiedEventArgs(this,n.Events.CollectionModifications.Remove,t))},i.prototype.RemoveAt=function(t){var r=this.items.splice(t,1)[0];return this.OnModified.Invoke(new n.Events.CollectionModifiedEventArgs(this,n.Events.CollectionModifications.Remove,new i([r]))),r},i.prototype.RemoveRange=function(t,r){r=Math.min(r,this.Count());var u=new i(this.items.splice(t,r));return this.OnModified.Invoke(new n.Events.CollectionModifiedEventArgs(this,n.Events.CollectionModifications.Remove,u)),u},i.prototype.Reverse=function(){this.items=this.items.reverse(),this.OnModified.Invoke(new n.Events.CollectionModifiedEventArgs(this,n.Events.CollectionModifications.Reorder,this))},i.prototype.Sort=function(i){typeof i=="undefined"&&(i=new t.ToStringComparer),this.items=this.items.sort(i.Compare),this.OnModified.Invoke(new n.Events.CollectionModifiedEventArgs(this,n.Events.CollectionModifications.Reorder,this))},i.prototype.ToArray=function(){return this.items.slice(0)},i}();t.List=i})(n.Collections||(n.Collections={}));var t=n.Collections}(TSUI||(TSUI={})),function(n){(function(n){var r=function(){function n(){this.Handlers=[],this.OnHandlerAttached=null,this.OnHandlerAttachedContext=null,this.OnHandlerDettached=null,this.OnHandlerDettachedContext=null}return n.prototype.Attach=function(n){this.IsAttached(n)||(this.Handlers.push(n),this.OnHandlerAttached!==null&&this.OnHandlerAttached.call(this.OnHandlerAttachedContext))},n.prototype.Detach=function(n){this.IsAttached(n)&&(this.Handlers.splice(this.Handlers.indexOf(n),1),this.OnHandlerDettached!==null&&this.OnHandlerDettached.call(this.OnHandlerDettachedContext))},n.prototype.IsAttached=function(n){return this.Handlers.indexOf(n)>-1},n.prototype.Invoke=function(n){for(var t=0;t<this.Handlers.length;t++)this.Handlers[t].Invoke(n)},n}(),t,i;n.Event=r,t=function(){function n(n,t){this.Callback=n,this.Context=t}return n.prototype.Invoke=function(n){this.Callback.call(this.Context,n)},n}(),n.EventHandler=t,i=function(){function n(n){this.Sender=n}return n}(),n.EventArgs=i})(n.Events||(n.Events={}));var t=n.Events}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(n){var er=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,dt,gt,ni,ti,ii,ri,ui,fi,ei,oi,si,hi,ci,li,ai,vi,yi,pi,wi,bi,ki,di,gi,nr,tr,ir,rr,ur,fr;n.ClickEvent=er,t=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.ClickEventHandler=t,i=function(n){function t(t,i){n.call(this,t),this.Sender=t,this.jqEvent=i}return __extends(t,n),t}(n.EventArgs),n.ClickEventArgs=i,r=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.MouseDownEvent=r,u=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.MouseDownEventHandler=u,f=function(n){function t(t,i){n.call(this,t),this.Sender=t,this.jqEvent=i}return __extends(t,n),t}(n.EventArgs),n.MouseDownEventArgs=f,e=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.MouseUpEvent=e,o=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.MouseUpEventHandler=o,s=function(n){function t(t,i){n.call(this,t),this.Sender=t,this.jqEvent=i}return __extends(t,n),t}(n.EventArgs),n.MouseUpEventArgs=s,h=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.MouseMoveEvent=h,c=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.MouseMoveEventHandler=c,l=function(n){function t(t,i){n.call(this,t),this.Sender=t,this.jqEvent=i}return __extends(t,n),t}(n.EventArgs),n.MouseMoveEventArgs=l,a=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.SplitterMoveEvent=a,v=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.SplitterMoveEventHandler=v,y=function(n){function t(t){n.call(this,t),this.Sender=t}return __extends(t,n),t}(n.EventArgs),n.SplitterMoveEventArgs=y,p=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.OrientationChangedEvent=p,w=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.OrientationChangedEventHandler=w,b=function(n){function t(t){n.call(this,t),this.Sender=t}return __extends(t,n),t}(n.EventArgs),n.OrientationChangedEventArgs=b,k=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.ResizeEvent=k,d=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.ResizeEventHandler=d,g=function(n){function t(t,i){n.call(this,t),this.Sender=t,this.jqEvent=i}return __extends(t,n),t}(n.EventArgs),n.ResizeEventArgs=g,nt=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.MoveEvent=nt,tt=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.MoveEventHandler=tt,it=function(n){function t(t,i){n.call(this,t),this.Sender=t,this.jqEvent=i}return __extends(t,n),t}(n.EventArgs),n.MoveEventArgs=it,rt=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.CheckedChangeEvent=rt,ut=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.CheckedChangeEventHandler=ut,ft=function(n){function t(t){n.call(this,t),this.Sender=t}return __extends(t,n),t}(n.EventArgs),n.CheckedChangeEventArgs=ft,et=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.TextChangeEvent=et,ot=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.TextChangeEventHandler=ot,st=function(n){function t(t,i){n.call(this,t),this.Sender=t,this.jqEvent=i}return __extends(t,n),t}(n.EventArgs),n.TextChangeEventArgs=st,ht=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.CloseEvent=ht,ct=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.CloseEventHandler=ct,lt=function(n){function t(t){n.call(this,t),this.Sender=t}return __extends(t,n),t}(n.EventArgs),n.CloseEventArgs=lt,at=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.ShowEvent=at,vt=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.ShowEventHandler=vt,yt=function(n){function t(t){n.call(this,t),this.Sender=t}return __extends(t,n),t}(n.EventArgs),n.ShowEventArgs=yt,pt=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.HideEvent=pt,wt=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.HideEventHandler=wt,bt=function(n){function t(t){n.call(this,t),this.Sender=t}return __extends(t,n),t}(n.EventArgs),n.HideEventArgs=bt,kt=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.FocusEvent=kt,dt=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.FocusEventHandler=dt,gt=function(n){function t(t,i){typeof i=="undefined"&&(i=null),n.call(this,t),this.Sender=t,this.jqEvent=i}return __extends(t,n),t}(n.EventArgs),n.FocusEventArgs=gt,ni=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.BlurEvent=ni,ti=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.BlurEventHandler=ti,ii=function(n){function t(t,i){typeof i=="undefined"&&(i=null),n.call(this,t),this.Sender=t,this.jqEvent=i}return __extends(t,n),t}(n.EventArgs),n.BlurEventArgs=ii,ri=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.KeyDownEvent=ri,ui=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.KeyDownEventHandler=ui,fi=function(n){function t(t,i){typeof i=="undefined"&&(i=null),n.call(this,t),this.Sender=t,this.jqEvent=i}return __extends(t,n),t}(n.EventArgs),n.KeyDownEventArgs=fi,ei=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.KeyPressEvent=ei,oi=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.KeyPressEventHandler=oi,si=function(n){function t(t,i){typeof i=="undefined"&&(i=null),n.call(this,t),this.Sender=t,this.jqEvent=i}return __extends(t,n),t}(n.EventArgs),n.KeyPressEventArgs=si,hi=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.KeyUpEvent=hi,ci=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.KeyUpEventHandler=ci,li=function(n){function t(t,i){typeof i=="undefined"&&(i=null),n.call(this,t),this.Sender=t,this.jqEvent=i}return __extends(t,n),t}(n.EventArgs),n.KeyUpEventArgs=li,ai=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.ListItem_TextChangeEvent=ai,vi=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.ListItem_TextChangeEventHandler=vi,yi=function(n){function t(t){n.call(this,t),this.Sender=t}return __extends(t,n),t}(n.EventArgs),n.ListItem_TextChangeEventArgs=yi,pi=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.SelectedIndexChangeEvent=pi,wi=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.SelectedIndexChangeEventHandler=wi,bi=function(n){function t(t){n.call(this,t),this.Sender=t}return __extends(t,n),t}(n.EventArgs),n.SelectedIndexChangeEventArgs=bi,ki=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.ValueChangeEvent=ki,di=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.ValueChangeEventHandler=di,gi=function(n){function t(t){n.call(this,t),this.Sender=t}return __extends(t,n),t}(n.EventArgs),n.ValueChangeEventArgs=gi,nr=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.NameChangeEvent=nr,tr=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.NameChangeEventHandler=tr,ir=function(n){function t(t,i){n.call(this,t),this.Sender=t,this.oldName=i}return __extends(t,n),t}(n.EventArgs),n.NameChangeEventArgs=ir,rr=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),n.SelectionMadeEvent=rr,ur=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.SelectionMadeEventHandler=ur,fr=function(n){function t(t,i){typeof i=="undefined"&&(i=null),n.call(this,t),this.Sender=t,this.jqEvent=i}return __extends(t,n),t}(n.EventArgs),n.SelectionMadeEventArgs=fr})(n.Events||(n.Events={}));var t=n.Events}(TSUI||(TSUI={})),function(n){(function(n){(function(n){n[n.None=0]="None",n[n.Add=1]="Add",n[n.Remove=2]="Remove",n[n.Reorder=3]="Reorder"})(n.CollectionModifications||(n.CollectionModifications={}));var t=n.CollectionModifications})(n.Events||(n.Events={}));var t=n.Events}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(n){var r=function(n){function t(){n.apply(this,arguments),this.Handlers=[]}return __extends(t,n),t.prototype.Attach=function(t){n.prototype.Attach.call(this,t)},t.prototype.Detach=function(t){n.prototype.Detach.call(this,t)},t.prototype.IsAttached=function(t){return n.prototype.IsAttached.call(this,t)},t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.Event),t,i;n.CollectionModifiedEvent=r,t=function(n){function t(t,i){n.call(this,t,i),this.Callback=t,this.Context=i}return __extends(t,n),t.prototype.Invoke=function(t){n.prototype.Invoke.call(this,t)},t}(n.EventHandler),n.CollectionModifiedEventHandler=t,i=function(n){function t(t,i,r){n.call(this,t),this.Sender=t,this.Modification=i,this.ModifiedElements=r}return __extends(t,n),t}(n.EventArgs),n.CollectionModifiedEventArgs=i})(n.Events||(n.Events={}));var t=n.Events}(TSUI||(TSUI={})),function(){var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,n;window.requestAnimationFrame=t,n=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame,window.cancelAnimationFrame=n}(),function(n){(function(t){var o=function(){function n(n,t,i){typeof i=="undefined"&&(i=!1),this.callback=n,this.context=t,this.single=i,this.AnimationStartTime=-1}return n}(),i,r,f,u,e;t.AnimationCallback=o,i=-1,r=new n.Collections.List,t.RegisterAnimationCallback=function(n){return r.Add(n),n},t.RegisterAnimationForSingleCallback=function(n){return n.single=!0,r.Add(n),n},t.UnregisterAnimationCallback=function(n){return r.Remove(n),n},f=function(){r.Count()===0?i!==-1&&(window.requestAnimationFrame?(window.cancelAnimationFrame(i),i=-1):(clearInterval(i),i=-1)):i===-1&&(i=window.requestAnimationFrame?window.requestAnimationFrame(u):setInterval(u,70))},u=function(){for(var e=r.ToArray(),o=-1,s=new n.Collections.List,h=!1,f,t=0;t<e.length;t++)f=e[t],f.AnimationStartTime===-1&&(f.AnimationStartTime=Date.now()),o=Date.now()-f.AnimationStartTime,f.callback.call(e[t].context,o),f.single&&(s.Add(e[t]),h=!0);h&&r.RemoveAll(s),window.requestAnimationFrame?i=window.requestAnimationFrame(u):$("body").css({zIndex:$("body").css("z-index")==="1"?0:1})},r.OnModified.Attach(new n.Events.CollectionModifiedEventHandler(f,r)),e=function(){function n(){}return n.PrepareHTML2CanvasForAnimation=function(n,t){var i=n.find("*").not(".Hidden");n.attr("data-html2canvas-visible",""),i.attr("data-html2canvas-visible",""),html2canvas([n[0]],{onrendered:function(r){var u=$(r);u.css({position:"absolute",top:n.offset().top,left:n.offset().left,zIndex:n.css("z-index"),display:"none"}),$("body").append(u),n.removeAttr("data-html2canvas-visible"),i.removeAttr("data-html2canvas-visible"),t(u)}})},n.RestoreAfterAnimationHTML2Canvas=function(n,t){var i=parseInt(t.css("z-index"),10);t.css({opacity:1,zIndex:i}),n.css({display:"",opacity:0,visibility:"visible",zIndex:i+2}).animate({opacity:1},500,"swing",function(){n.css({opacity:1}),t.animate({opacity:0},500,"swing",function(){t.css("display","none"),t.remove(),n.css({zIndex:i})})})},n}(),t.AnimationHelper=e})(n.Animation||(n.Animation={}));var t=n.Animation}(TSUI||(TSUI={})),function(n){(function(n){var t=function(){function n(){}return n.prototype.Show=function(n,t){typeof t=="undefined"&&(t=null),n.AnimationElement().css({visibility:"",display:""}),t!==null&&t()},n.prototype.Hide=function(n,t){typeof t=="undefined"&&(t=null),n.AnimationElement().css({visibility:"hidden",display:""}),t!==null&&t()},n}();n.Animator=t})(n.Animation||(n.Animation={}));var t=n.Animation}(TSUI||(TSUI={})),function(n){(function(t){var i=function(){function i(){this._CanvasElem=null}return i.prototype.Show=function(r,u){var c,e,f,l;if(typeof u=="undefined"&&(u=null),c=this._EvaluateUseCanvasRender(r),e=!1,c){e=!0;try{f=r.AnimationElement(),this._CanvasElem===null?(l=this,t.AnimationHelper.PrepareHTML2CanvasForAnimation(f,function(n){l.DoHTML2CanvasShow(f,n,u)})):this.DoHTML2CanvasShow(f,this._CanvasElem,u)}catch(p){e=!1,i.UseCanvasRenderIfSensible=!1}}if(!e){var f=r.AnimationElement(),a=n.GetSize(r),o=a.width,s=a.height,h=n.GetPosition(r),v=(h.top/f.parent().height()*100).toString()+"%",y=(h.left/f.parent().width()*100).toString()+"%";f.css({width:o-o*i.ShrinkAmount*2,height:s-s*i.ShrinkAmount*2,left:f.parent().width()+50,visibility:"",display:""}),f.css({top:h.top+s*i.ShrinkAmount}).animate({left:h.left+o*i.ShrinkAmount,opacity:1},i.FlyTime,i.AnimationEasing).delay(i.DelayTime).animate({width:o,height:s,top:v,left:y,visibility:"",display:""},i.ResizeTime,u)}},i.prototype.Hide=function(r,u){var c,e,f,l;if(typeof u=="undefined"&&(u=null),c=this._EvaluateUseCanvasRender(r),e=!1,c){e=!0;try{f=r.AnimationElement(),this._CanvasElem===null?(l=this,t.AnimationHelper.PrepareHTML2CanvasForAnimation(f,function(n){l.DoHTML2CanvasHide(f,n,u)})):this.DoHTML2CanvasHide(f,this._CanvasElem,u)}catch(v){e=!1,i.UseCanvasRenderIfSensible=!1}}if(!e){var f=r.AnimationElement(),a=n.GetSize(r),o=a.width,s=a.height,h=n.GetPosition(r);f.animate({width:o-o*i.ShrinkAmount*2,height:s-s*i.ShrinkAmount*2,top:h.top+s*i.ShrinkAmount,left:h.left+o*i.ShrinkAmount},i.ResizeTime).delay(i.DelayTime).animate({left:f.parent().width()+50,opacity:0},i.FlyTime,i.AnimationEasing,function(){f.css({width:o,height:s,top:h.top,left:h.left,display:"",visibility:"hidden"}),u&&u()})}},i.prototype.DoHTML2CanvasShow=function(n,r,u){var f=parseInt(r.css("width"),10),e=parseInt(r.css("height"),10),o={top:parseInt(r.css("top"),10),left:parseInt(r.css("left"),10)},s=this;r.css({width:f-f*i.ShrinkAmount*2,height:e-e*i.ShrinkAmount*2,left:n.parent().width()+50,top:o.top+e*i.ShrinkAmount,opacity:0,visibility:"",display:""}).animate({left:o.left+f*i.ShrinkAmount,opacity:1},i.FlyTime,i.AnimationEasing).delay(i.DelayTime).animate({width:f,height:e,top:o.top,left:o.left,visibility:"",display:""},i.ResizeTime,function(){t.AnimationHelper.RestoreAfterAnimationHTML2Canvas(n,r),s._CanvasElem=null,u!==null&&u()})},i.prototype.DoHTML2CanvasHide=function(n,t,r){var u=parseInt(t.css("width"),10),f=parseInt(t.css("height"),10),e={top:parseInt(t.css("top"),10),left:parseInt(t.css("left"),10)};t.css("display","block"),n.css("display","none"),t.animate({width:u-u*i.ShrinkAmount*2,height:f-f*i.ShrinkAmount*2,top:e.top+f*i.ShrinkAmount,left:e.left+u*i.ShrinkAmount},i.ResizeTime).delay(i.DelayTime).animate({left:n.parent().width()+50,opacity:0},i.FlyTime,i.AnimationEasing,function(){t.remove(),n.css({width:u,height:f,top:e.top,left:e.left,display:"",visibility:"hidden"}),r&&r()})},i.prototype._EvaluateUseCanvasRender=function(n){var t=i.UseCanvasRenderIfSensible,r,u;return t&&(r=n.AnimationElement(),t=r.width()*r.height()>24e4,u=r.find("*"),t=t?u.length>15:u.length>50),t},i.prototype.PrepareHTML2CanvasForAnimation=function(n,r){var u,f;if(typeof r=="undefined"&&(r=null),this._EvaluateUseCanvasRender(n))try{u=this,u._CanvasElem=null,f=n.AnimationElement(),t.AnimationHelper.PrepareHTML2CanvasForAnimation(f,function(n){u._CanvasElem=n,r&&r()})}catch(e){i.UseCanvasRenderIfSensible=!1,u._CanvasElem=null,r&&r()}else r&&r()},i.FlyTime=500,i.ResizeTime=100,i.DelayTime=50,i.ShrinkAmount=.01,i.AnimationEasing="easeOutCubic",i.UseCanvasRenderIfSensible=!1,i}();t.AppWindowAnimator=i})(n.Animation||(n.Animation={}));var t=n.Animation}(TSUI||(TSUI={})),function(n){(function(n){var t=function(){function n(){}return n.prototype.Show=function(t,i){typeof i=="undefined"&&(i=null);var r=t.ContentPanel.Top().Value+t.ContentPanel.Height().Value+20;t.AnimationElement().stop(!0,!1),t.AnimationElement().animate({height:r},n.AnimationTime,n.AnimationEasing,function(){i!==null&&i()})},n.prototype.Hide=function(t,i){typeof i=="undefined"&&(i=null),t.AnimationElement().animate({height:t.MainTitleBar.ActualHeight()},n.AnimationTime,n.AnimationEasing,function(){i!==null&&i()})},n.AnimationTime=450,n.AnimationEasing="easeOutQuad",n}();n.ExpandableAnimator=t})(n.Animation||(n.Animation={}));var t=n.Animation}(TSUI||(TSUI={})),function(n){(function(n){var t=function(){function n(){}return n.prototype.Show=function(t,i){typeof i=="undefined"&&(i=null),t.AnimationElement().stop(!0,!0).css({display:"",visibility:"",opacity:0}),t.AnimationElement().animate({opacity:1},n.AnimationTime,n.AnimationEasing,function(){i!==null&&i()})},n.prototype.Hide=function(t,i){typeof i=="undefined"&&(i=null),t.AnimationElement().stop(!0,!0),t.AnimationElement().animate({opacity:0},n.AnimationTime,n.AnimationEasing,function(){$(this).css({visibility:"hidden",opacity:1}),i!==null&&i()})},n.AnimationTime=300,n.AnimationEasing="swing",n}();n.FadeAnimator=t})(n.Animation||(n.Animation={}));var t=n.Animation}(TSUI||(TSUI={})),function(n){(function(n){var t=function(){function n(){}return n.prototype.Show=function(t,i){var r,u;typeof i=="undefined"&&(i=null),r=t.AnimationElement(),r.stop(!0,!0),u=r.css("right"),r.css({right:-r.outerWidth(),visibility:"",display:""}).animate({right:u},n.AnimationTime,n.AnimationEasing,function(){i!==null&&i()})},n.prototype.Hide=function(t,i){var r,u;typeof i=="undefined"&&(i=null),r=t.AnimationElement(),r.stop(!0,!0),u=r.css("right"),r.animate({right:-r.outerWidth()},n.AnimationTime,n.AnimationEasing,function(){r.css({visibility:"hidden",display:"none",right:u}),i!==null&&i()})},n.AnimationTime=1e3,n.AnimationEasing="linear",n}();n.NotificationAnimator=t})(n.Animation||(n.Animation={}));var t=n.Animation}(TSUI||(TSUI={})),function(n){(function(n){var t=function(){function n(){}return n.prototype.Show=function(n,t){typeof t=="undefined"&&(t=null)},n.prototype.Hide=function(n,t){typeof t=="undefined"&&(t=null)},n.prototype.AnimateRestack=function(t,i,r){typeof r=="undefined"&&(r=null);var u=t.AnimationElement();u.animate({bottom:i},n.AnimationTime,n.AnimationEasing,function(){r!==null&&r()})},n.AnimationTime=1e3,n.AnimationEasing="easeInCubic",n}();n.NotificationRestackAnimator=t})(n.Animation||(n.Animation={}));var t=n.Animation}(TSUI||(TSUI={})),function(n){(function(t){var i=function(){function t(){}return t.prototype.Show=function(i,r){typeof r=="undefined"&&(r=null),$(".PageWindow_DisableOverlay").css({display:"block",opacity:0,zIndex:n.UI.OpenWindows*10-1}).animate({opacity:.6},200,"swing",function(){});var u=i.GetStyle("opacity");i.AnimationElement().stop(!0,!0),i.AnimationElement().css({opacity:0,visibility:"",display:""}).animate({opacity:u},t.AnimationTime,t.AnimationEasing,function(){r!==null&&r()})},t.prototype.Hide=function(n,i){typeof i=="undefined"&&(i=null),$(".PageWindow_DisableOverlay").animate({opacity:0},200,"swing",function(){$(this).css({display:""})}),n.AnimationElement().stop(!0,!0),n.AnimationElement().animate({opacity:0},t.AnimationTime,t.AnimationEasing,function(){n.AnimationElement().css({visibility:"hidden",opacity:1,display:"none"}),i!==null&&i()})},t.AnimationTime=250,t.AnimationEasing="easeOutQuad",t}();t.PageWindowAnimator=i})(n.Animation||(n.Animation={}));var t=n.Animation}(TSUI||(TSUI={})),function(n){(function(t){var i=function(){function t(){}return t.prototype.Show=function(i,r){typeof r=="undefined"&&(r=null),$(".SelectionWindow_DisableOverlay").css({display:"block",opacity:0,zIndex:n.UI.OpenWindows*10-1}).animate({opacity:.6},200,"swing",function(){});var u=i.GetStyle("opacity");i.AnimationElement().stop(!0,!0),i.AnimationElement().css({opacity:0,visibility:"",display:""}).animate({opacity:u},t.AnimationTime,t.AnimationEasing,function(){r!==null&&r()})},t.prototype.Hide=function(n,i){typeof i=="undefined"&&(i=null),$(".SelectionWindow_DisableOverlay").animate({opacity:0},200,"swing",function(){$(this).css({display:""})}),n.AnimationElement().stop(!0,!0),n.AnimationElement().animate({opacity:0},t.AnimationTime,t.AnimationEasing,function(){n.AnimationElement().css({visibility:"hidden",opacity:1,display:"none"}),i!==null&&i()})},t.AnimationTime=250,t.AnimationEasing="easeOutQuad",t}();t.SelectionWindowAnimator=i})(n.Animation||(n.Animation={}));var t=n.Animation}(TSUI||(TSUI={})),function(n){(function(n){var t=function(){function n(n,t,i){typeof t=="undefined"&&(t="px"),typeof i=="undefined"&&(i=!1),this.Value=n,this.Units=t,this.Auto=i}return n.FromString=function(t){if(t==="auto"||t===null||t.trim()==="")return new n(0,"",!0);var i=parseInt(t,10),r=t.indexOf("%")>-1?"%":t.indexOf("em")>-1?"em":"px";return new n(i,r)},n.prototype.toString=function(){return this.ToString()},n.prototype.ToString=function(){return this.Auto?"auto":this.Value.toString()+this.Units},n}();n.CSSNumber=t})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),function(n){(function(n){(function(n){n[n.Circular=0]="Circular",n[n.Horizontal=1]="Horizontal",n[n.Vertical=2]="Vertical"})(n.ProgressBarTypes||(n.ProgressBarTypes={}));var t=n.ProgressBarTypes})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),function(n){(function(n){(function(n){n[n.Circular=0]="Circular",n[n.Horizontal=1]="Horizontal",n[n.Vertical=2]="Vertical"})(n.ProgressSpinnerTypes||(n.ProgressSpinnerTypes={}));var t=n.ProgressSpinnerTypes})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),function(n){(function(n){(function(n){n[n.Horizontal=0]="Horizontal",n[n.Vertical=1]="Vertical"})(n.SplitterGrip_Orientations||(n.SplitterGrip_Orientations={}));var t=n.SplitterGrip_Orientations})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),function(n){(function(n){(function(n){n[n.Horizontal=0]="Horizontal",n[n.Vertical=1]="Vertical"})(n.StackPanelOrientations||(n.StackPanelOrientations={}));var t=n.StackPanelOrientations})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),function(n){(function(n){(function(n){n[n.Left=0]="Left",n[n.Right=1]="Right"})(n.TextAlignments||(n.TextAlignments={}));var t=n.TextAlignments})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),function(n){(function(n){(function(n){n[n.OffTop=0]="OffTop",n[n.In=1]="In",n[n.OffBottom=2]="OffBottom"})(n.TileBackgroundPositions||(n.TileBackgroundPositions={}));var t=n.TileBackgroundPositions})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),function(n){(function(n){(function(n){n[n.Small=0]="Small",n[n.Medium=1]="Medium",n[n.Large=2]="Large"})(n.TileSizes||(n.TileSizes={}));var t=n.TileSizes})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),function(n){(function(n){(function(n){n[n.Flip=0]="Flip",n[n.Iconic=1]="Iconic",n[n.Cycle=2]="Cycle"})(n.TileTypes||(n.TileTypes={}));var t=n.TileTypes})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),function(n){(function(n){(function(n){n[n.Discrete=0]="Discrete",n[n.Continuous=1]="Continuous"})(n.TrackBarModes||(n.TrackBarModes={}));var t=n.TrackBarModes})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),function(n){(function(t){var i=function(){function i(){this._rootElement=null,this.OnClick=new n.Events.ClickEvent,this.OnMouseDown=new n.Events.MouseDownEvent,this.OnMouseUp=new n.Events.MouseUpEvent,this.OnMouseMove=new n.Events.MouseMoveEvent,this.OnResize=new n.Events.ResizeEvent,this.OnMove=new n.Events.MoveEvent,this.OnShow=new n.Events.ShowEvent,this.OnHide=new n.Events.HideEvent,this.OnFocus=new n.Events.FocusEvent,this.OnBlur=new n.Events.BlurEvent,this.OnKeyDown=new n.Events.KeyDownEvent,this.OnKeyPress=new n.Events.KeyPressEvent,this.OnKeyUp=new n.Events.KeyUpEvent,this.TargetDocumentFor_MouseUp=!0,this.TargetDocumentFor_MouseMove=!0,this.Children=new n.Collections.List,this._Enabled=!0,this.OptimiseConstructForGraphics=!1,this._OnClickAttached=!1,this._OnMouseDownAttached=!1,this._OnMouseUpAttached=!1,this._OnMouseUp_GlobalHandler=null,this._OnMouseMoveAttached=!1,this._OnMouseMove_GlobalHandler=null,this._OnResizeAttached=!1,this._OnMoveAttached=!1,this._OnKeyPressAttached=!1,this._OnKeyUpAttached=!1,this._This_Resized_ChainHandler_Timeout=-1,this._This_Moved_ChainHandler_Timeout=-1,this.DOMConstructed=!1,this._WasSelectionEnabled=!1,this._Focusable=!1,this._SelectionEnabled=!1,this._TabIndex=0,this.OnClick.OnHandlerAttachedContext=this.OnClick.OnHandlerDettachedContext=this,this.OnClick.OnHandlerAttached=this.OnClick.OnHandlerDettached=this._OnOnClickChanged,this.OnMouseDown.OnHandlerAttachedContext=this.OnMouseDown.OnHandlerDettachedContext=this,this.OnMouseDown.OnHandlerAttached=this.OnMouseDown.OnHandlerDettached=this._OnOnMouseDownChanged,this.OnMouseUp.OnHandlerAttachedContext=this.OnMouseUp.OnHandlerDettachedContext=this,this.OnMouseUp.OnHandlerAttached=this.OnMouseUp.OnHandlerDettached=this._OnOnMouseUpChanged,this.OnMouseMove.OnHandlerAttachedContext=this.OnMouseMove.OnHandlerDettachedContext=this,this.OnMouseMove.OnHandlerAttached=this.OnMouseMove.OnHandlerDettached=this._OnOnMouseMoveChanged,this.OnResize.OnHandlerAttachedContext=this.OnResize.OnHandlerDettachedContext=this,this.OnResize.OnHandlerAttached=this.OnResize.OnHandlerDettached=this._OnOnResizeChanged,this.OnMove.OnHandlerAttachedContext=this.OnMove.OnHandlerDettachedContext=this,this.OnMove.OnHandlerAttached=this.OnMove.OnHandlerDettached=this._OnOnMoveChanged,this.OnKeyPress.OnHandlerAttachedContext=this.OnKeyPress.OnHandlerDettachedContext=this,this.OnKeyPress.OnHandlerAttached=this.OnKeyPress.OnHandlerDettached=this._OnOnKeyPressChanged,this.OnKeyUp.OnHandlerAttachedContext=this.OnKeyUp.OnHandlerDettachedContext=this,this.OnKeyUp.OnHandlerAttached=this.OnKeyUp.OnHandlerDettached=this._OnOnKeyUpChanged,this.OnResize.Attach(new n.Events.ResizeEventHandler(this._This_Resized_ChainHandler,this)),this.OnMove.Attach(new n.Events.MoveEventHandler(this._This_Moved_ChainHandler,this)),this._rootElement=$('<div class="Control">'),this.DisableSelection(),this.Children.OnModified.Attach(new n.Events.CollectionModifiedEventHandler(this._OnChildren_Modified,this))}return i.prototype.AnimationElement=function(){return this._rootElement},i.prototype._RestoreThis=function(n){return n.data._callback.call(n.data._this,n)},i.prototype._OnOnClickChanged=function(){if(this.DOMConstructed)if(this.OnClick.Handlers.length>0&&!this._OnClickAttached){this._OnClickAttached=!0;this._rootElement.on(i.OnClickEventName,{_this:this,_callback:this._OnClick},this._RestoreThis)}else this._OnClickAttached&&(this._OnClickAttached=!1,this._rootElement.off(i.OnClickEventName,this._RestoreThis))},i.prototype._OnClick=function(t){this.ActuallyEnabled()&&this.OnClick.Invoke(new n.Events.ClickEventArgs(this,t))},i.prototype._OnOnMouseDownChanged=function(){if(this.DOMConstructed)if(this.OnMouseDown.Handlers.length>0&&!this._OnMouseDownAttached){this._OnMouseDownAttached=!0;this._rootElement.on(i.OnMouseDownEventName,{_this:this,_callback:this._OnMouseDown},this._RestoreThis)}else this._OnMouseDownAttached&&(this._OnMouseDownAttached=!1,this._rootElement.off(i.OnMouseDownEventName,this._RestoreThis))},i.prototype._OnMouseDown=function(t){this.ActuallyEnabled()&&(t=n.standardiseEvent(t),this.OnMouseDown.Invoke(new n.Events.MouseDownEventArgs(this,t)))},i.prototype._OnOnMouseUpChanged=function(){if(this.DOMConstructed)if(this.TargetDocumentFor_MouseUp)this.OnMouseUp.Handlers.length>0&&!this._OnMouseUpAttached?(this._OnMouseUpAttached=!0,this._OnMouseUp_GlobalHandler=new n.Events.MouseUpEventHandler(function(t){this.OnMouseUp.Invoke(new n.Events.MouseUpEventArgs(this,t.jqEvent))},this),t.Global_MouseUpEvent.Attach(this._OnMouseUp_GlobalHandler)):this._OnMouseUpAttached&&(this._OnMouseUpAttached=!1,t.Global_MouseUpEvent.Detach(this._OnMouseUp_GlobalHandler));else if(this.OnMouseUp.Handlers.length>0&&!this._OnMouseUpAttached){this._OnMouseUpAttached=!0;this._rootElement.on(i.OnMouseUpEventName,{_this:this,_callback:this._OnMouseUp},this._RestoreThis)}else this._OnMouseUpAttached&&(this._OnMouseUpAttached=!1,this._rootElement.off(i.OnMouseUpEventName,this._RestoreThis))},i.prototype._OnMouseUp=function(t){this.ActuallyEnabled()&&this.OnMouseUp.Invoke(new n.Events.MouseUpEventArgs(this,t))},i.prototype._OnOnMouseMoveChanged=function(){if(this.DOMConstructed)if(this.TargetDocumentFor_MouseMove)this.OnMouseMove.Handlers.length>0&&!this._OnMouseMoveAttached?(this._OnMouseMoveAttached=!0,this._OnMouseMove_GlobalHandler=new n.Events.MouseMoveEventHandler(function(t){this.OnMouseMove.Invoke(new n.Events.MouseMoveEventArgs(this,t.jqEvent))},this),t.Global_MouseMoveEvent.Attach(this._OnMouseMove_GlobalHandler)):this._OnMouseMoveAttached&&(this._OnMouseMoveAttached=!1,t.Global_MouseMoveEvent.Detach(this._OnMouseMove_GlobalHandler));else if(this.OnMouseMove.Handlers.length>0&&!this._OnMouseMoveAttached){this._OnMouseMoveAttached=!0;this._rootElement.on(i.OnMouseMoveEventName,{_this:this,_callback:this._OnMouseMove},this._RestoreThis)}else this._OnMouseMoveAttached&&(this._OnMouseMoveAttached=!1,this._rootElement.off(i.OnMouseMoveEventName,this._RestoreThis))},i.prototype._OnMouseMove=function(t){this.ActuallyEnabled()&&this.OnMouseMove.Invoke(new n.Events.MouseMoveEventArgs(this,t))},i.prototype._OnOnResizeChanged=function(){if(this.DOMConstructed)if(this.OnResize.Handlers.length>0&&!this._OnResizeAttached){this._OnResizeAttached=!0;$(window).on("resize",{_this:this,_callback:this._OnResize},this._RestoreThis)}else this._OnResizeAttached&&(this._OnResizeAttached=!1,$(window).off("resize",this._RestoreThis))},i.prototype._OnResize=function(t){this.OnResize.Invoke(new n.Events.ResizeEventArgs(this,t))},i.prototype._OnOnMoveChanged=function(){if(this.DOMConstructed)if(this.OnMove.Handlers.length>0&&!this._OnMoveAttached){this._OnMoveAttached=!0;$(window).on("resize",{_this:this,_callback:this._OnMove},this._RestoreThis)}else this._OnMoveAttached&&(this._OnMoveAttached=!1,$(window).off("resize",this._RestoreThis))},i.prototype._OnMove=function(t){this.OnMove.Invoke(new n.Events.MoveEventArgs(this,t))},i.prototype._OnOnKeyPressChanged=function(){if(this.DOMConstructed)if(this.OnKeyPress.Handlers.length>0&&!this._OnKeyPressAttached){this._OnKeyPressAttached=!0;this._rootElement.on("keypress",{_this:this,_callback:this._OnKeyPress},this._RestoreThis)}else this._OnKeyPressAttached&&(this._OnKeyPressAttached=!1,this._rootElement.off("keypress",this._RestoreThis))},i.prototype._OnKeyPress=function(t){this.ActuallyEnabled()&&this.OnKeyPress.Invoke(new n.Events.KeyPressEventArgs(this,t))},i.prototype._OnOnKeyUpChanged=function(){if(this.DOMConstructed)if(this.OnKeyUp.Handlers.length>0&&!this._OnKeyUpAttached){this._OnKeyUpAttached=!0;this._rootElement.on("keyup",{_this:this,_callback:this._OnKeyUp},this._RestoreThis)}else this._OnKeyUpAttached&&(this._OnKeyUpAttached=!1,this._rootElement.off("keyup",this._RestoreThis))},i.prototype._OnKeyUp=function(t){this.ActuallyEnabled()&&this.OnKeyUp.Invoke(new n.Events.KeyUpEventArgs(this,t))},i.prototype._OnFocus=function(i){this.ActuallyEnabled()&&this.Visible()?this.Focusable()?(t.CurrentFocusedControl=this,this.AddClass("Focused"),t.JustUsedTabKeyTime+50>Date.now()&&this.AddClass("TabFocused"),this.OnFocus.Invoke(new n.Events.FocusEventArgs(this,i))):this.Blur():(n.StopEvent(i),this.Blur())},i.prototype._OnBlur=function(i){t.CurrentFocusedControl==this&&(t.CurrentFocusedControl=null),this.RemoveClass("Focused"),this.RemoveClass("TabFocused"),this.OnBlur.Invoke(new n.Events.BlurEventArgs(this,i))},i.prototype._OnKeyDown=function(i){if(i.keyCode===13)n.StopEvent(i),this.InvokeDefaultAction();else return t.OnKeyDown_Global_First(i),this.OnKeyDown.Invoke(new n.Events.KeyDownEventArgs(this,i)),t.OnKeyDown_Global_Last(i)},i.prototype._OnChildren_Modified=function(t){var i,r;if(this.DOMConstructed)switch(t.Modification){case n.Events.CollectionModifications.Add:for(i=0;i<t.ModifiedElements.Count();i++)t.ModifiedElements.ElementAt(i).ConstructDOM(this._rootElement);break;case n.Events.CollectionModifications.Remove:for(i=0;i<t.ModifiedElements.Count();i++)t.ModifiedElements.ElementAt(i).DestroyDOM();break;case n.Events.CollectionModifications.Reorder:for(i=0;i<t.ModifiedElements.Count();i++)r=t.ModifiedElements.ElementAt(i),r.DestroyDOM(),r.ConstructDOM(this._rootElement)}},i.prototype._This_Resized_ChainHandler=function(n){if(this._This_Resized_ChainHandler_Timeout===-1){var t=this;this._This_Resized_ChainHandler_Timeout=setTimeout(function(){for(var i=0;i<t.Children.Count();i++)t.Children.ElementAt(i).OnResize.Invoke(n);t._This_Resized_ChainHandler_Timeout=-1},100)}},i.prototype._This_Moved_ChainHandler=function(n){if(this._This_Moved_ChainHandler_Timeout===-1){var t=this;this._This_Moved_ChainHandler_Timeout=setTimeout(function(){for(var i=0;i<t.Children.Count();i++)t.Children.ElementAt(i).OnMove.Invoke(n);t._This_Moved_ChainHandler_Timeout=-1},100)}},i.prototype.ConstructDOM=function(n,t){var r,e;if(typeof t=="undefined"&&(t=null),!this.DOMConstructed){n.append(this._rootElement),this.DOMConstructed=!0,this._OnOnClickChanged(),this._OnOnKeyPressChanged(),this._OnOnKeyUpChanged(),this._OnOnMouseDownChanged(),this._OnOnMouseMoveChanged(),this._OnOnMouseUpChanged(),this._OnOnResizeChanged();this._rootElement.on("focus",{_this:this,_callback:this._OnFocus},this._RestoreThis);this._rootElement.on("blur",{_this:this,_callback:this._OnBlur},this._RestoreThis);this._rootElement.on("keydown",{_this:this,_callback:this._OnKeyDown},this._RestoreThis)}if(this.OptimiseConstructForGraphics)if(this.Children.Count()>0){var r=0,u=this,f=function(){var n=u.Children.ElementAt(r);n?(n.OptimiseConstructForGraphics=!0,n.ConstructDOM(u._rootElement,function(){r++,r<u.Children.Count()?setTimeout(f,i.OptimiseConstructForGraphics_DelayTime):t&&t()})):(r++,r<u.Children.Count()?setTimeout(f,i.OptimiseConstructForGraphics_DelayTime):t&&t())};f()}else t&&t();else{for(r=0;r<this.Children.Count();r++)e=this.Children.ElementAt(r),e.ConstructDOM(this._rootElement);t&&t()}},i.prototype.DestroyDOM=function(){this.DOMConstructed&&(this._rootElement.remove(),this._rootElement.off(),this._OnClickAttached=!1,this._OnMouseDownAttached=!1,this._OnMouseUpAttached=!1,this._OnMouseMoveAttached=!1,this._OnResizeAttached=!1,this._OnKeyPressAttached=!1,this._OnKeyUpAttached=!1,this.DOMConstructed=!1);for(var n=0;n<this.Children.Count();n++)this.Children.ElementAt(n).DestroyDOM()},i.prototype.ID=function(n){return typeof n=="undefined"&&(n=null),n!==null&&this._rootElement.attr("id",n),this._rootElement.attr("id")},i.prototype.GetStyle=function(n){return this._rootElement.css(n)},i.prototype.ApplyStyle=function(n,t){this._rootElement.css(n,t)},i.prototype.ApplyStyles=function(n){this._rootElement.css(n)},i.prototype.AddClass=function(n){this.HasClass(n)||this._rootElement.addClass(n)},i.prototype.RemoveClass=function(n){this._rootElement.removeClass(n)},i.prototype.HasClass=function(n){return this._rootElement.hasClass(n)},i.prototype.BackColor=function(n){return typeof n=="undefined"&&(n=null),n!==null&&this._rootElement.css("background-color",n),this._rootElement.css("background-color")},i.prototype.ForeColor=function(n){return n!==null&&this._rootElement.css("color",n),this._rootElement.css("color")},i.prototype.CSSNumberStyle=function(n,i){return typeof i=="undefined"&&(i=null),i!==null&&this._rootElement.css(n,i.ToString()),t.CSSNumber.FromString(this._rootElement.css(n))},i.prototype.Width=function(t){typeof t=="undefined"&&(t=null);var i=this.CSSNumberStyle("width",t);return t!==null&&this.OnResize.Invoke(new n.Events.ResizeEventArgs(this,null)),i},i.prototype.Height=function(t){typeof t=="undefined"&&(t=null);var i=this.CSSNumberStyle("height",t);return t!==null&&this.OnResize.Invoke(new n.Events.ResizeEventArgs(this,null)),i},i.prototype.ActualWidth=function(){return this._rootElement.outerWidth()},i.prototype.ActualHeight=function(){return this._rootElement.outerHeight()},i.prototype.Top=function(t){typeof t=="undefined"&&(t=null);var i=this.CSSNumberStyle("top",t);return this.OnMove.Invoke(new n.Events.MoveEventArgs(this,null)),i},i.prototype.Bottom=function(n){return typeof n=="undefined"&&(n=null),this.CSSNumberStyle("bottom",n)},i.prototype.Left=function(t){typeof t=="undefined"&&(t=null);var i=this.CSSNumberStyle("left",t);return this.OnMove.Invoke(new n.Events.MoveEventArgs(this,null)),i},i.prototype.Right=function(n){return typeof n=="undefined"&&(n=null),this.CSSNumberStyle("right",n)},i.prototype.PageTop=function(){return this._rootElement.offset().top},i.prototype.PageLeft=function(){return this._rootElement.offset().left},i.prototype.PageBottom=function(){return this._rootElement.offset().top+this.ActualHeight()},i.prototype.PageRight=function(){return this._rootElement.offset().left+this.ActualWidth()},i.prototype.MinWidth=function(n){return typeof n=="undefined"&&(n=null),this.CSSNumberStyle("min-width",n)},i.prototype.MinHeight=function(n){return typeof n=="undefined"&&(n=null),this.CSSNumberStyle("min-height",n)},i.prototype.MaxWidth=function(n){return typeof n=="undefined"&&(n=null),this.CSSNumberStyle("max-width",n)},i.prototype.MaxHeight=function(n){return typeof n=="undefined"&&(n=null),this.CSSNumberStyle("max-height",n)},i.prototype.Visible=function(n){return typeof n=="undefined"&&(n=null),n!==null&&this._rootElement.css({visibility:n?"":"hidden",display:""}),this._rootElement.is(":visible")&&this._rootElement.css("visibility")!=="hidden"},i.prototype.EnableByParent=function(){if(this._HandleEnableSet(this._Enabled),this._Enabled)for(var n=0;n<this.Children.Count();n++)this.Children.ElementAt(n).EnableByParent()},i.prototype.DisableByParent=function(){this._HandleEnableSet(!1);for(var n=0;n<this.Children.Count();n++)this.Children.ElementAt(n).DisableByParent()},i.prototype.Enabled=function(n){var t,i;if(typeof n=="undefined"&&(n=null),n!==null){for(this._Enabled=n,t=0;t<this.Children.Count();t++)i=this.Children.ElementAt(t),this._Enabled?i.EnableByParent():i.DisableByParent();this._HandleEnableSet(this._Enabled)}return this._Enabled},i.prototype.ActuallyEnabled=function(){return!this.HasClass("Disabled")},i.prototype._HandleEnableSet=function(n){n?(this._rootElement.removeClass("Disabled"),this._WasSelectionEnabled&&this.EnableSelection()):(this._rootElement.addClass("Disabled"),this._WasSelectionEnabled=this._SelectionEnabled,this.DisableSelection()),this._HandleFocusableSet(this.Focusable())},i.prototype._HandleFocusableSet=function(n){n&&!this.HasClass("Disabled")?(this._rootElement.attr("tabindex",this._TabIndex.toString()),this._rootElement.is(":focus")&&!this.HasClass("Focused")&&this.Focus()):this._rootElement.removeAttr("tabindex"),!this._Focusable&&this._rootElement.is(":focus")&&this.Blur()},i.prototype.Focusable=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(this._Focusable=n,this._TabIndex===0&&(this._TabIndex=++t._currTabIndex),this._HandleFocusableSet(n)),this._Focusable},i.prototype.Show=function(t,i){if(typeof t=="undefined"&&(t=null),typeof i=="undefined"&&(i=new n.Animation.FadeAnimator),this.Visible())t!==null&&t();else{this.Enabled(!1);var r=this;i.Show(this,function(){r.Enabled(!0),r.OnShow.Invoke(new n.Events.ShowEventArgs(r)),t!==null&&t()})}},i.prototype.Hide=function(t,i){if(typeof t=="undefined"&&(t=null),typeof i=="undefined"&&(i=new n.Animation.FadeAnimator),this.Visible()){this.Enabled(!1);var r=this;setTimeout(function(){i.Hide(r,function(){r.Enabled(!0),r.OnHide.Invoke(new n.Events.HideEventArgs(r)),t!==null&&t()})},200)}else t!==null&&t()},i.prototype.EnableSelection=function(){this._rootElement.enableSelection(),this._SelectionEnabled=!0},i.prototype.DisableSelection=function(){this._rootElement.disableSelection(),this._SelectionEnabled=!1},i.prototype.Focus=function(){this._rootElement.focus()},i.prototype.Blur=function(){this._rootElement.blur()},i.prototype.InvokeDefaultAction=function(){},i.prototype.IsRelativeLayout=function(){return this._rootElement.hasClass("RelativeLayout")},i.prototype.RelativeLayoutOn=function(){this.AddClass("RelativeLayout")},i.prototype.RelativeLayoutOff=function(){this.RemoveClass("RelativeLayout")},i.prototype.TabIndex=function(n){typeof n=="undefined"&&(n=null),n!==null&&(this._TabIndex=n,n===-2?this._rootElement.removeAttr("tabindex"):this._rootElement.attr("tabindex",n.toString()));var t=parseInt(this._rootElement.attr("tabindex"),10);return isNaN(t)&&(t=-2),t},i.OnClickEventName="click",i.OnMouseDownEventName="mousedown touchstart",i.OnMouseUpEventName="mouseup touchend",i.OnMouseMoveEventName="mousemove touchmove",i.OptimiseConstructForGraphics_DelayTime=30,i}();t.Control=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(n){var t=function(n){function t(){n.call(this),this._rootElement.addClass("Panel")}return __extends(t,n),t}(n.Control);n.Panel=t})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(t){function i(i){typeof i=="undefined"&&(i=null),t.call(this),this._Focusable_AddedByLink=!1,this._rootElement.addClass("Label"),this.Text(i||" "),this.OnClick.Attach(new n.Events.ClickEventHandler(this._This_Clicked,this))}return __extends(i,t),i.prototype._This_Clicked=function(){this.Focusable()&&this.Focus()},i.prototype.Text=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(n=n.replace("\n","<br />"),this._rootElement.html(n)),this._rootElement.text()},i.prototype.HTML=function(n){return typeof n=="undefined"&&(n=null),n!==null&&this._rootElement.html(n),this._rootElement.html()},i.prototype.Link=function(n){var r,u,t,i;return typeof n=="undefined"&&(n=null),n!==null&&(n===""?(this.Text(this.Text()),this._Focusable&&this._Focusable_AddedByLink&&this.Focusable(!1)):(r=this.Text(),u='<a href="'+n+'" target="_blank">'+r+"<\/a>",this.HTML(u),this._Focusable||(this.Focusable(!0),this._Focusable_AddedByLink=!0))),t=this._rootElement.find("a"),i=null,t.length>0&&(i=t.first().attr("href")),i},i.prototype.Focusable=function(n){typeof n=="undefined"&&(n=null);var i=t.prototype.Focusable.call(this,n);return n!==null&&(this._Focusable_AddedByLink=!1),i},i.prototype.InvokeDefaultAction=function(){var t=this.Link();t!==null?n.OpenInNewWindow(t):this._rootElement.click()},i}(t.Control);t.Label=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(n){var t=function(t){function i(){t.call(this),this._rootElement.addClass("Button"),this.TextLabel=new n.Label,this.Children.Add(this.TextLabel),this.Focusable(!0)}return __extends(i,t),i.prototype.Text=function(n){return typeof n=="undefined"&&(n=null),this.TextLabel.Text(n)},i.prototype.InvokeDefaultAction=function(){this._rootElement.click()},i}(n.Control);n.Button=t})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(t){function i(){t.call(this),this._PrevSeenValue="",this._TabIndex=0,this._rootElement.addClass("TextBox"),this.OnTextChange=new n.Events.TextChangeEvent,this._TextInput=$('<input type="text" tabindex="'+this._TabIndex.toString()+'"/>'),this.Focusable(!0),this.OnClick.Attach(new n.Events.ClickEventHandler(this._This_OnClick_FocusBugFix,this))}return __extends(i,t),i.prototype.TextInput=function(){return this._TextInput},i.prototype._This_OnClick_FocusBugFix=function(){this.ActuallyEnabled()&&!this._TextInput.is(":focus")&&this._TextInput.focus()},i.prototype._HandleFocusableSet=function(n){this._rootElement.removeAttr("tabindex"),n&&!this.HasClass("Disabled")?(this._TextInput.attr("tabindex",this._TabIndex.toString()),this._TextInput.is(":focus")&&!this.HasClass("Focused")&&this.Focus()):this._TextInput.removeAttr("tabindex"),!this._Focusable&&this._TextInput.is(":focus")&&this.Blur()},i.prototype._TextInput_OnFocus=function(n){this.ActuallyEnabled()?this._OnFocus(n):this._TextInput.blur()},i.prototype._TextInput_OnBlur=function(t){n.StopEvent(t),this._OnBlur(t)},i.prototype._TextInput_OnChange=function(t){this.ActuallyEnabled()?this._PrevSeenValue!==this.Text()&&(this._PrevSeenValue=this.Text(),this.OnTextChange.Invoke(new n.Events.TextChangeEventArgs(this,t))):t.keyCode!==9&&t.keyCode!==116&&n.StopEvent(t)},i.prototype.ConstructDOM=function(n,i){typeof i=="undefined"&&(i=null);var r=this;t.prototype.ConstructDOM.call(this,n,function(){r._rootElement.append(r._TextInput);r._TextInput.on("focus",function(n){r._TextInput_OnFocus(n)});r._TextInput.on("blur",function(n){r._TextInput_OnBlur(n)});r._TextInput.on("change, keyup",function(n){r._TextInput_OnChange(n)});i&&i()})},i.prototype.DestroyDOM=function(){this._TextInput.remove(),t.prototype.DestroyDOM.call(this)},i.prototype.Text=function(t){return typeof t=="undefined"&&(t=null),t!==null&&(this._TextInput.val(t),this._PrevSeenValue!==t&&(this._PrevSeenValue=t,this.OnTextChange.Invoke(new n.Events.TextChangeEventArgs(this,null)))),this._TextInput.val()},i.prototype.Masked=function(n){return typeof n=="undefined"&&(n=null),n!==null&&this._TextInput.attr("type",n?"password":"text"),this._TextInput.attr("type")==="password"},i.prototype.MaxLength=function(n){typeof n=="undefined"&&(n=null),n!==null&&this._TextInput.attr("maxlength",n.toString());var t=parseInt(this._TextInput.attr("maxlength"),10);return isNaN(t)&&(t=-1),t},i.prototype.Enabled=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(!n&&this.HasClass("Focused")?(this.RemoveClass("Focused"),this._TextInput.blur()):this._TextInput.is(":focus")&&!this.HasClass("Focused")&&this.AddClass("Focused")),t.prototype.Enabled.call(this,n)},i.prototype.Focus=function(){this._TextInput.focus()},i.prototype.Blur=function(){this._TextInput.blur()},i.prototype.TabIndex=function(n){typeof n=="undefined"&&(n=null),n!==null&&(this._TabIndex=n,n===-2?this._TextInput.removeAttr("tabindex"):this._TextInput.attr("tabindex",n.toString()));var t=parseInt(this._TextInput.attr("tabindex"),10);return isNaN(t)&&(t=-2),t},i}(t.Control);t.TextBox=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(t){function i(){t.call(this),this._PrevSeenValue=null,this._TabIndex=0,this._rootElement.addClass("TextBox Multiline"),this.OnTextChange=new n.Events.TextChangeEvent,this._TextInput=$('<textarea tabindex="'+this._TabIndex.toString()+'"/>'),this.Focusable(!0),this.OnClick.Attach(new n.Events.ClickEventHandler(this._This_OnClick_FocusBugFix,this))}return __extends(i,t),i.prototype.TextInput=function(){return this._TextInput},i.prototype._This_OnClick_FocusBugFix=function(){this.ActuallyEnabled()&&!this._TextInput.is(":focus")&&this._TextInput.focus()},i.prototype._HandleFocusableSet=function(n){this._rootElement.removeAttr("tabindex"),n&&!this.HasClass("Disabled")?(this._TextInput.attr("tabindex",this._TabIndex.toString()),this._TextInput.is(":focus")&&!this.HasClass("Focused")&&this.Focus()):this._TextInput.removeAttr("tabindex"),!this._Focusable&&this._TextInput.is(":focus")&&this.Blur()},i.prototype._TextInput_OnFocus=function(n){this.ActuallyEnabled()?this._OnFocus(n):this._TextInput.blur()},i.prototype._TextInput_OnBlur=function(t){n.StopEvent(t),this._OnBlur(t)},i.prototype._TextInput_OnChange=function(t){this.ActuallyEnabled()?this._PrevSeenValue!==this.Text()&&(this._PrevSeenValue=this.Text(),this.OnTextChange.Invoke(new n.Events.TextChangeEventArgs(this,t))):t.keyCode!==9&&t.keyCode!==116&&n.StopEvent(t)},i.prototype.ConstructDOM=function(n,i){typeof i=="undefined"&&(i=null);var r=this;t.prototype.ConstructDOM.call(this,n,function(){r._rootElement.append(r._TextInput);var n=r;r._TextInput.on("focus",function(t){n._TextInput_OnFocus(t)});r._TextInput.on("blur",function(t){n._TextInput_OnBlur(t)});r._TextInput.on("change, keyup",function(t){n._TextInput_OnChange(t)});i&&i()})},i.prototype.DestroyDOM=function(){this._TextInput.remove(),t.prototype.DestroyDOM.call(this)},i.prototype.Text=function(t){return typeof t=="undefined"&&(t=null),t!==null&&(this._TextInput.val(t),this._PrevSeenValue!==t&&(this._PrevSeenValue=t,this.OnTextChange.Invoke(new n.Events.TextChangeEventArgs(this,null)))),this._TextInput.val()},i.prototype.Masked=function(n){return typeof n=="undefined"&&(n=!1),!1},i.prototype.MaxLength=function(n){typeof n=="undefined"&&(n=null),n!==null&&this._TextInput.attr("maxlength",n.toString());var t=parseInt(this._TextInput.attr("maxlength"),10);return isNaN(t)&&(t=-1),t},i.prototype.Enabled=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(!n&&this.HasClass("Focused")?(this.RemoveClass("Focused"),this._TextInput.blur()):this._TextInput.is(":focus")&&!this.HasClass("Focused")&&this.AddClass("Focused")),t.prototype.Enabled.call(this,n)},i.prototype.Focus=function(){this._TextInput.focus()},i.prototype.Blur=function(){this._TextInput.blur()},i.prototype.TabIndex=function(n){typeof n=="undefined"&&(n=null),n!==null&&(this._TabIndex=n,n===-2?this._TextInput.removeAttr("tabindex"):this._TextInput.attr("tabindex",n.toString()));var t=parseInt(this._TextInput.attr("tabindex"),10);return isNaN(t)&&(t=-2),t},i}(t.Control);t.MultilineTextBox=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(t){function i(){t.call(this),this._NumericPrevSeenValue=null,this._rootElement.addClass("Numeric"),this.OnValueChange=new n.Events.ValueChangeEvent,this._TextInput.attr("type","numeric"),this._TextInput.numeric({decimal:".",negative:!0,decimalPlaces:2}),this.OnTextChange.Attach(new n.Events.TextChangeEventHandler(this._This_OnTextChange_ValueChange,this))}return __extends(i,t),i.prototype._This_OnTextChange_ValueChange=function(){var t=this.Value();this._NumericPrevSeenValue!==t&&(this._NumericPrevSeenValue=t,this.OnValueChange.Invoke(new n.Events.ValueChangeEventArgs(this)))},i.prototype.AllowNegatives=function(n){return typeof n=="undefined"&&(n=null),this._TextInput.numeric_AllowNegatives(n)},i.prototype.AllowDecimals=function(n){return typeof n=="undefined"&&(n=null),this._TextInput.numeric_DecimalSeparator(n)!==""},i.prototype.DecimalPlaces=function(n){return typeof n=="undefined"&&(n=null),this._TextInput.numeric_DecimalPlaces(n)},i.prototype.DecimalSeparator=function(n){return typeof n=="undefined"&&(n=null),this._TextInput.numeric_DecimalSeparator(n)},i.prototype.Min=function(n){return typeof n=="undefined"&&(n=null),this._TextInput.numeric_Min(n)},i.prototype.Max=function(n){return typeof n=="undefined"&&(n=null),this._TextInput.numeric_Max(n)},i.prototype.Value=function(t){var i,u,f,r;return typeof t=="undefined"&&(t=null),t!==null&&(i=this.DecimalPlaces(),i>-1&&(t=parseFloat(t.toFixed(i))),u=this.Min(),u!==null&&(t=Math.max(t,u)),f=this.Max(),f!==null&&(t=Math.min(t,f)),this._TextInput.val(i>-1?t.toFixed(i):t.toString()),this._NumericPrevSeenValue!==t&&(this._NumericPrevSeenValue=t,this.OnValueChange.Invoke(new n.Events.ValueChangeEventArgs(this)))),r=parseFloat(this._TextInput.val()),isNaN(r)&&(r=0),r},i}(t.TextBox);t.NumericTextBox=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(i){function r(){i.call(this),this._PrevSeenValue=null,this._Increment=1,this._rootElement.addClass("NumericUpDown"),this._UnderlyingTextBox=new t.NumericTextBox,this._UnderlyingTextBox.OnFocus.Attach(new n.Events.FocusEventHandler(this._UnderlyingControl_OnFocus,this)),this._UnderlyingTextBox.OnBlur.Attach(new n.Events.BlurEventHandler(this._UnderlyingControl_OnBlur,this)),this.Children.Add(this._UnderlyingTextBox),this._UpButton=new t.Button,this._UpButton.AddClass("Up"),this._UpButton.Text("^"),this._UpButton.OnClick.Attach(new n.Events.ClickEventHandler(this._UpButton_OnClick,this)),this._UpButton.OnFocus.Attach(new n.Events.FocusEventHandler(this._UnderlyingControl_OnFocus,this)),this._UpButton.OnBlur.Attach(new n.Events.BlurEventHandler(this._UnderlyingControl_OnBlur,this)),this.Children.Add(this._UpButton),this._DownButton=new t.Button,this._DownButton.AddClass("Down"),this._DownButton.Text("^"),this._DownButton.OnClick.Attach(new n.Events.ClickEventHandler(this._DownButton_OnClick,this)),this._DownButton.OnFocus.Attach(new n.Events.FocusEventHandler(this._UnderlyingControl_OnFocus,this)),this._DownButton.OnBlur.Attach(new n.Events.BlurEventHandler(this._UnderlyingControl_OnBlur,this)),this.Children.Add(this._DownButton),this.OnKeyDown.Attach(new n.Events.KeyDownEventHandler(this._This_OnKeyDown_IncrementHandler,this)),this.OnKeyUp.Attach(new n.Events.KeyUpEventHandler(this._This_OnKeyUp_IncrementHandler,this)),this.OnValueChange=new n.Events.ValueChangeEvent,this.Focusable(!0)}return __extends(r,i),r.prototype._UnderlyingControl_OnFocus=function(n){this._OnFocus(n.jqEvent)},r.prototype._UnderlyingControl_OnBlur=function(n){this._OnBlur(n.jqEvent)},r.prototype._This_OnKeyDown_IncrementHandler=function(t){this.ActuallyEnabled()&&(t.jqEvent.keyCode===38?(this.Value(this.Value()+this._Increment),n.StopEvent(t.jqEvent)):t.jqEvent.keyCode===40&&(this.Value(this.Value()-this._Increment),n.StopEvent(t.jqEvent)))},r.prototype._This_OnKeyUp_IncrementHandler=function(){var t=this.Value();this._PrevSeenValue!==t&&(this._PrevSeenValue=t,this.OnValueChange.Invoke(new n.Events.ValueChangeEventArgs(this)))},r.prototype._UpButton_OnClick=function(){this.Value(this.Value()+this._Increment)},r.prototype._DownButton_OnClick=function(){this.Value(this.Value()-this._Increment)},r.prototype.AllowNegatives=function(n){return this._UnderlyingTextBox.AllowNegatives(n)},r.prototype.AllowDecimals=function(n){return this._UnderlyingTextBox.AllowDecimals(n)},r.prototype.DecimalPlaces=function(n){return this._UnderlyingTextBox.DecimalPlaces(n)},r.prototype.DecimalSeparator=function(n){return this._UnderlyingTextBox.DecimalSeparator(n)},r.prototype.Min=function(n){return this._UnderlyingTextBox.Min(n)},r.prototype.Max=function(n){return this._UnderlyingTextBox.Max(n)},r.prototype.Increment=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(this._Increment=n),this._Increment},r.prototype.Value=function(t){typeof t=="undefined"&&(t=null);var i=this._UnderlyingTextBox.Value(t);return t!==null&&this._PrevSeenValue!==i&&(this._PrevSeenValue=i,this.OnValueChange.Invoke(new n.Events.ValueChangeEventArgs(this))),i},r.prototype._HandleFocusableSet=function(){this._rootElement.removeAttr("tabindex")},r.prototype.Focus=function(){this._UnderlyingTextBox.Focus()},r.prototype.Blur=function(){this._UnderlyingTextBox.Blur(),this._UpButton.Blur(),this._DownButton.Blur()},r}(t.Control);t.NumericUpDown=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(t){function i(i,r){typeof i=="undefined"&&(i=""),typeof r=="undefined"&&(r=""),t.call(this),this._NavigateToOnClick="",this._Focusable_AddedByLink=!1,this._rootElement.addClass("ImageBox"),this._ImageElement=$("<img>"),this.Source(i),r!==""&&this.AlternateText(r),this.OnClick.Attach(new n.Events.ClickEventHandler(this._This_OnClick_NavigateHandler,this))}return __extends(i,t),i.prototype._This_OnClick_NavigateHandler=function(){this.ActuallyEnabled()&&this._NavigateToOnClick!==""&&n.OpenInNewWindow(this._NavigateToOnClick)},i.prototype.ConstructDOM=function(n,i){typeof i=="undefined"&&(i=null);var r=this;t.prototype.ConstructDOM.call(this,n,function(){r._rootElement.append(r._ImageElement),i&&i()})},i.prototype.DestroyDOM=function(){this._ImageElement.remove(),t.prototype.DestroyDOM.call(this)},i.prototype.AlternateText=function(n){return typeof n=="undefined"&&(n=null),n!==null&&this._ImageElement.attr("alt",n),this._ImageElement.attr("alt")},i.prototype.Source=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(this._ImageElement.attr("src",n),n===""?this._rootElement.addClass("NoSource"):this._rootElement.removeClass("NoSource")),this._ImageElement.attr("src")},i.prototype.NavigateToOnClick=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(this._NavigateToOnClick=n,n!==""?(this.AddClass("Clickable"),this._Focusable_AddedByLink||(this.Focusable(!0),this._Focusable_AddedByLink=!0)):(this.RemoveClass("Clickable"),this._Focusable_AddedByLink&&this.Focusable(!1))),this._NavigateToOnClick},i.prototype.Focusable=function(n){typeof n=="undefined"&&(n=null);var i=t.prototype.Focusable.call(this,n);return n!==null&&(this._Focusable_AddedByLink=!1),i},i.prototype.InvokeDefaultAction=function(){this._ImageElement.click()},i}(t.Control);t.ImageBox=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(n){var t=function(n){function t(){n.call(this),this._RenderImageOnLoaded=!1,this._rootElement.addClass("CanvasBox"),this._CanvasElement=$('<canvas width="100%" height="100%">')}return __extends(t,n),t.prototype.ConstructDOM=function(t,i){typeof i=="undefined"&&(i=null);var r=this;n.prototype.ConstructDOM.call(this,t,function(){r._ImageElement.remove(),r._rootElement.append(r._CanvasElement),r._CanvasElement.append(r._ImageElement);r._ImageElement.on("load",function(){r._OnImageElementLoaded()});i&&i()})},t.prototype.DestroyDOM=function(){this._CanvasElement.remove(),n.prototype.DestroyDOM.call(this)},t.prototype.Context=function(){return this._RenderImageOnLoaded=!1,this._CanvasElement[0].getContext("2d")},t.prototype.Source=function(t){return typeof t=="undefined"&&(t=null),t!==null&&(this._RenderImageOnLoaded=!0),n.prototype.Source.call(this,t)},t.prototype._OnImageElementLoaded=function(){if(this._RenderImageOnLoaded){this._RenderImageOnLoaded=!1;var t=this.Context(),n=this._ImageElement.position();t.drawImage(this._ImageElement[0],n.left,n.top,100,100)}},t}(n.ImageBox);n.CanvasBox=t})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(n){var t=function(n){function t(t){n.call(this),this._rootElement.addClass("SVGBox"),this._ImageElement=$('<object type="image/svg+xml">'),this._OverlayElement=$('<div class="Overlay">'),this.Source(t)}return __extends(t,n),t.prototype.ConstructDOM=function(t,i){typeof i=="undefined"&&(i=null);var r=this;n.prototype.ConstructDOM.call(this,t,function(){r._rootElement.append(r._OverlayElement),i&&i()})},t.prototype.DestroyDOM=function(){this._OverlayElement.remove(),n.prototype.DestroyDOM.call(this)},t.prototype.Source=function(n){return typeof n=="undefined"&&(n=null),n!==null&&this._ImageElement.attr("data",n),this._ImageElement.attr("data")},t}(n.ImageBox);n.SVGBox=t})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(n){var t=function(t){function i(n){t.call(this,n),this._rootElement.addClass("Background")}return __extends(i,t),i.prototype.SetPosition=function(t){switch(t){case n.TileBackgroundPositions.OffTop:this._rootElement.addClass("OffTop"),this._rootElement.removeClass("In"),this._rootElement.removeClass("OffBottom");break;case n.TileBackgroundPositions.In:this._rootElement.addClass("In"),this._rootElement.removeClass("OffTop"),this._rootElement.removeClass("OffBottom");break;case n.TileBackgroundPositions.OffBottom:this._rootElement.addClass("OffBottom"),this._rootElement.removeClass("In"),this._rootElement.removeClass("OffTop")}},i}(n.ImageBox);n.TileBackground=t})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(n){var i=function(n){function t(t,i){typeof t=="undefined"&&(t="<"),typeof i=="undefined"&&(i="<"),n.call(this),this._OffVal=t,this._OnVal=i,this._rootElement.addClass("ToggleIndicatorLabel"),this.Focusable(!0)}return __extends(t,n),t.prototype.SetIndicatorToOn=function(){this.RemoveClass("Off"),this.AddClass("On"),this.Text(this._OnVal)},t.prototype.SetIndicatorToOff=function(){this.RemoveClass("On"),this.AddClass("Off"),this.Text(this._OffVal)},t.prototype.IsOn=function(){return this.HasClass("On")},t.prototype.InvokeDefaultAction=function(){this._rootElement.click()},t}(n.Label),t;n.ToggleIndicatorLabel=i,t=function(n){function t(){n.call(this),this._rootElement.addClass("ToggleIndicatorBox"),this._InnerDivElement=$("<div>"),this.Focusable(!0)}return __extends(t,n),t.prototype.ConstructDOM=function(t,i){typeof i=="undefined"&&(i=null);var r=this;n.prototype.ConstructDOM.call(this,t,function(){r._rootElement.append(r._InnerDivElement),i&&i()})},t.prototype.DestroyDOM=function(){this._InnerDivElement.remove(),n.prototype.DestroyDOM.call(this)},t.prototype.SetIndicatorToOn=function(){this.RemoveClass("Off"),this.AddClass("On")},t.prototype.SetIndicatorToOff=function(){this.RemoveClass("On"),this.AddClass("Off")},t.prototype.IsOn=function(){return this.HasClass("On")},t.prototype.InvokeDefaultAction=function(){this._rootElement.click()},t}(n.Control),n.ToggleIndicatorBox=t})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(i){function r(r){typeof r=="undefined"&&(r=!1),i.call(this),this._rootElement.addClass("CheckBox"),this.OnCheckedChange=new n.Events.CheckedChangeEvent,this.Focusable(!0),this.MainIndicator=new t.ToggleIndicatorBox,this.MainIndicator.RelativeLayoutOn(),this.MainIndicator.Focusable(!1),this.Children.Add(this.MainIndicator),this.TextLabel=new t.Label,this.TextLabel.RelativeLayoutOn(),this.Children.Add(this.TextLabel),this.OnClick.Attach(new n.Events.ClickEventHandler(this._This_OnClick,this)),this.Checked(r)}return __extends(r,i),r.prototype.ConstructDOM=function(n,t){typeof t=="undefined"&&(t=null);var r=this;i.prototype.ConstructDOM.call(this,n,function(){r.TextAlign(r.TextAlign()),t&&t()})},r.prototype._This_OnClick=function(){this.ActuallyEnabled()&&this.Checked(!this.Checked())},r.prototype.TextAlign=function(n){if(typeof n=="undefined"&&(n=null),n!==null){var i=this._TextAlign;this._TextAlign=n,this.DOMConstructed&&(this.MainIndicator.DestroyDOM(),this.TextLabel.DestroyDOM(),this._TextAlign===t.TextAlignments.Left?(this.TextLabel.ConstructDOM(this._rootElement),this.MainIndicator.ConstructDOM(this._rootElement),this.AddClass("LeftAlign")):this._TextAlign===t.TextAlignments.Right&&(this.MainIndicator.ConstructDOM(this._rootElement),this.TextLabel.ConstructDOM(this._rootElement),this.AddClass("RightAlign")))}return this._TextAlign},r.prototype.Text=function(n){return typeof n=="undefined"&&(n=null),this.TextLabel.Text(n)},r.prototype.Checked=function(t){return typeof t=="undefined"&&(t=null),t!==null&&(t?this.MainIndicator.SetIndicatorToOn():this.MainIndicator.SetIndicatorToOff(),this.OnCheckedChange.Invoke(new n.Events.CheckedChangeEventArgs(this))),this.MainIndicator.IsOn()},r.prototype.InvokeDefaultAction=function(){this._rootElement.click()},r}(t.Control);t.CheckBox=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){t.RadioButtonGroups=[];var i=function(i){function r(r){typeof r=="undefined"&&(r=!1),i.call(this),this._Group="",this._rootElement.addClass("RadioButton"),this.OnCheckedChange=new n.Events.CheckedChangeEvent,this.Focusable(!0),this.MainIndicator=new t.ToggleIndicatorBox,this.MainIndicator.RelativeLayoutOn(),this.MainIndicator.Focusable(!1),this.Children.Add(this.MainIndicator),this.TextLabel=new t.Label,this.TextLabel.RelativeLayoutOn(),this.Children.Add(this.TextLabel),this.OnClick.Attach(new n.Events.ClickEventHandler(this._This_OnClick,this)),this.Checked(r)}return __extends(r,i),r.prototype.ConstructDOM=function(n,t){typeof t=="undefined"&&(t=null);var r=this;i.prototype.ConstructDOM.call(this,n,function(){r.TextAlign(r.TextAlign()),t&&t()})},r.prototype._This_OnClick=function(){this.ActuallyEnabled()&&(this.Group()?this.Checked(!0):this.Checked(!this.Checked()))},r.prototype.TextAlign=function(n){if(typeof n=="undefined"&&(n=null),n!==null){var i=this._TextAlign;this._TextAlign=n,this.DOMConstructed&&(this.MainIndicator.DestroyDOM(),this.TextLabel.DestroyDOM(),this._TextAlign===t.TextAlignments.Left?(this.TextLabel.ConstructDOM(this._rootElement),this.MainIndicator.ConstructDOM(this._rootElement),this.AddClass("LeftAlign")):this._TextAlign===t.TextAlignments.Right&&(this.MainIndicator.ConstructDOM(this._rootElement),this.TextLabel.ConstructDOM(this._rootElement),this.AddClass("RightAlign")))}return this._TextAlign},r.prototype.Text=function(n){return typeof n=="undefined"&&(n=null),this.TextLabel.Text(n)},r.prototype.Checked=function(i){var f,r,u;if(typeof i=="undefined"&&(i=null),i!==null){if(f=this.Checked(),i){if(this.MainIndicator.SetIndicatorToOn(),this._Group!=="")for(r=0;r<t.RadioButtonGroups[this._Group].length;r++)u=t.RadioButtonGroups[this._Group][r],u!=this&&u.Checked(!1)}else this.MainIndicator.SetIndicatorToOff();i!==f&&this.OnCheckedChange.Invoke(new n.Events.CheckedChangeEventArgs(this))}return this.MainIndicator.IsOn()},r.prototype.InvokeDefaultAction=function(){this._rootElement.click()},r.prototype.Group=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(this._Group!==""&&t.RadioButtonGroups[this._Group].splice(t.RadioButtonGroups[this._Group].indexOf(this),1),this._Group=n,this._Group!==""&&(t.RadioButtonGroups[this._Group]===undefined&&(t.RadioButtonGroups[this._Group]=[]),t.RadioButtonGroups[this._Group].push(this),this.Checked(this.Checked()))),this._Group},r}(t.Control);t.RadioButton=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(i){function r(r){typeof r=="undefined"&&(r=!1),i.call(this),this._rootElement.addClass("ToggleButton"),this.OnCheckedChange=new n.Events.CheckedChangeEvent,this.Focusable(!0),this.TogglePanel=new t.Panel,this.TogglePanel.AddClass("TogglePanel"),this.Children.Add(this.TogglePanel),this.TogglePanelInner=new t.Panel,this.TogglePanelInner.AddClass("TogglePanelInner"),this.TogglePanel.Children.Add(this.TogglePanelInner),this.WhitePanel=new t.Panel,this.WhitePanel.AddClass("White"),this.TogglePanelInner.Children.Add(this.WhitePanel),this.BluePanel=new t.Panel,this.BluePanel.AddClass("Blue"),this.TogglePanelInner.Children.Add(this.BluePanel),this.GripBox=new t.Panel,this.GripBox.AddClass("Grip"),this.Children.Add(this.GripBox),this.TextLabel=new t.Label("Off"),this.Children.Add(this.TextLabel),this.OnClick.Attach(new n.Events.ClickEventHandler(this._This_OnClick,this)),this.Checked(r)}return __extends(r,i),r.prototype._This_OnClick=function(){this.ActuallyEnabled()&&this.Checked(!this.Checked())},r.prototype.Checked=function(t){if(typeof t=="undefined"&&(t=null),t!==null){var i=this.Checked();t?(this._rootElement.addClass("On"),this.Text("On")):(this._rootElement.removeClass("On"),this.Text("Off")),t!==i&&this.OnCheckedChange.Invoke(new n.Events.CheckedChangeEventArgs(this))}return this._rootElement.hasClass("On")},r.prototype.Text=function(n){return typeof n=="undefined"&&(n=null),this.TextLabel.Text(n)},r.prototype.InvokeDefaultAction=function(){this._rootElement.click()},r}(t.Control);t.ToggleButton=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(i){function r(){i.call(this),this.Rows=new n.Collections.List,this._rootElement.addClass("StackPanel"),this.Rows.OnModified.Attach(new n.Events.CollectionModifiedEventHandler(this._OnRows_Modified,this)),this.Orientation(t.StackPanelOrientations.Vertical)}return __extends(r,i),r.prototype._OnRows_Modified=function(t){var i;switch(t.Modification){case n.Events.CollectionModifications.Add:for(i=0;i<t.ModifiedElements.Count();i++)this.Children.Add(t.ModifiedElements.ElementAt(i));break;case n.Events.CollectionModifications.Remove:for(i=0;i<t.ModifiedElements.Count();i++)this.Children.Remove(t.ModifiedElements.ElementAt(i));break;case n.Events.CollectionModifications.Reorder:for(this.Children.Clear(),i=0;i<t.ModifiedElements.Count();i++)this.Children.Add(t.ModifiedElements.ElementAt(i))}},r.prototype.Orientation=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(n===t.StackPanelOrientations.Horizontal?(this.RemoveClass("Vertical"),this.AddClass("Horizontal")):(this.RemoveClass("Horizontal"),this.AddClass("Vertical"))),this.HasClass("Horizontal")?t.StackPanelOrientations.Horizontal:t.StackPanelOrientations.Vertical},r}(t.Control);t.StackPanel=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(n){var t=function(n){function t(){n.call(this),this._rootElement.addClass("Row")}return __extends(t,n),t}(n.Control);n.StackPanelRow=t})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),function(n){(function(t){var i=function(){function t(t,i){this.OnTextChange=new n.Events.ListItem_TextChangeEvent,this.Index=-1,this._Value=null,this._Text="",this._Value=i,this._Text=t}return t.prototype.Value=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(this._Value=n),this._Value},t.prototype.Text=function(t){return typeof t=="undefined"&&(t=null),t!==null&&(this._Text=t,this.OnTextChange.Invoke(new n.Events.ListItem_TextChangeEventArgs(this))),this._Text},t}();t.ListItem=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(i){function r(){i.call(this),this.OnSelectionMade=new n.Events.SelectionMadeEvent,this.OnSelectedIndexChange=new n.Events.SelectedIndexChangeEvent,this.Items=new n.Collections.List,this._FocusIndex=-1,this._GetElementWithHighestSequentialTabIndex_Cache=null,this._SelectedIndex=-1,this._SelectedRow=null,this._rootElement.addClass("ListBox"),this.Items.OnModified.Attach(new n.Events.CollectionModifiedEventHandler(this._Items_OnModified,this)),this.Focusable(!0)}return __extends(r,i),r.prototype._Items_OnModified=function(t){var u,i,r;this._GetElementWithHighestSequentialTabIndex_Cache=null;switch(t.Modification){case n.Events.CollectionModifications.Add:for(i=0;i<t.ModifiedElements.Count();i++)r=t.ModifiedElements.ElementAt(i),this._AddRowForItem(r);break;case n.Events.CollectionModifications.Remove:for(i=0;i<t.ModifiedElements.Count();i++)r=t.ModifiedElements.ElementAt(i),u=r.Index,this.Rows.RemoveAt(u);break;case n.Events.CollectionModifications.Reorder:for(this.Rows.Clear(),i=0;i<t.ModifiedElements.Count();i++)r=t.ModifiedElements.ElementAt(i),this._AddRowForItem(r)}},r.prototype._AddRowForItem=function(n){var t=this._CreateRow(n);n.Index=this.Rows.Count(),this.Rows.Add(t)},r.prototype._CreateRow=function(i){var r=new t.StackPanelRow,u=new t.Label(i.Text());return u.RelativeLayoutOn(),r.Children.Add(u),r.Focusable(!0),r.OnFocus.Attach(new n.Events.FocusEventHandler(this._UnderlyingControl_OnFocus,this)),r.OnBlur.Attach(new n.Events.BlurEventHandler(this._UnderlyingControl_OnBlur,this)),r.OnClick.Attach(new n.Events.ClickEventHandler(this._StackPanelRow_Clicked,this)),r.OnKeyDown.Attach(new n.Events.KeyDownEventHandler(this._UnderlyingControl_KeyDown,this)),r.InvokeDefaultAction=function(){this._rootElement.click()},r},r.prototype._HandleFocusableSet=function(){this._rootElement.removeAttr("tabindex")},r.prototype._OnFocus=function(n){i.prototype._OnFocus.call(this,n),t.preventTabKey=!0,this.ActuallyEnabled()&&(this.AddClass("Focused"),t.JustUsedTabKeyTime+50>Date.now()&&this.AddClass("TabFocused"))},r.prototype._OnBlur=function(n){i.prototype._OnBlur.call(this,n),t.preventTabKey=!1,this.RemoveClass("Focused"),this.RemoveClass("TabFocused")},r.prototype._UnderlyingControl_KeyDown=function(i){this.ActuallyEnabled()?i.jqEvent.keyCode===38?(this._FocusIndex>0&&(this._FocusIndex>-1&&this.Rows.ElementAt(this._FocusIndex).Blur(),this._FocusIndex--,this.Rows.ElementAt(this._FocusIndex).Focus()),n.StopEvent(i.jqEvent)):i.jqEvent.keyCode===40?(this._FocusIndex<this.Items.Count()-1&&(this._FocusIndex>-1&&this.Rows.ElementAt(this._FocusIndex).Blur(),this._FocusIndex++,this.Rows.ElementAt(this._FocusIndex).Focus()),n.StopEvent(i.jqEvent)):i.jqEvent.keyCode===9&&(i.jqEvent.shiftKey?this._FocusIndex>0?(t.preventTabKey=!0,this.Rows.ElementAt(this._FocusIndex).Blur(),this._FocusIndex--,this.Rows.ElementAt(this._FocusIndex).Focus(),n.StopEvent(i.jqEvent)):this._FocusIndex===-1?(this._FocusIndex=this.Rows.Count()-1,this.Rows.ElementAt(this._FocusIndex).Blur(),t.preventTabKey=!0,n.StopEvent(i.jqEvent)):(this._FocusIndex=-1,t.preventTabKey=!1):this._FocusIndex===-1&&this.Items.Count()>0?(t.preventTabKey=!0,this._FocusIndex++,this.Rows.ElementAt(this._FocusIndex).Focus(),n.StopEvent(i.jqEvent)):this._FocusIndex<this.Items.Count()-1?(t.preventTabKey=!0,this.Rows.ElementAt(this._FocusIndex).Blur(),this._FocusIndex++,this.Rows.ElementAt(this._FocusIndex).Focus(),n.StopEvent(i.jqEvent)):(this._FocusIndex!==-1&&this.Rows.ElementAt(this._FocusIndex).Blur(),this._GetElementWithHighestSequentialTabIndex().Focus(),t.preventTabKey=!1,this._FocusIndex=-1)):n.StopEvent(i.jqEvent)},r.prototype._GetElementWithHighestSequentialTabIndex=function(){var r,t,n,s;if(this._GetElementWithHighestSequentialTabIndex_Cache===null){var u=this.Rows.ElementAt(0).TabIndex(),f=this.Rows.ElementAt(0),i=0,e=[],o=[];for(n=0;n<this.Rows.Count();n++)r=this.Rows.ElementAt(n),t=r.TabIndex(),e.push(t),t>i&&(i=t,o[t]=r);for(n=u+1;n<=i;n++)if(e.indexOf(n)===-1){if(s=$('*[tabindex="'+n.toString(10)+'"]'),s.length>0)break}else u=n,f=o[n];this._GetElementWithHighestSequentialTabIndex_Cache=f}return this._GetElementWithHighestSequentialTabIndex_Cache},r.prototype._UnderlyingControl_OnFocus=function(n){if(n.Sender instanceof t.StackPanelRow){var i=this._FocusIndex;this._FocusIndex=this.Rows.IndexOf(n.Sender),this._FocusIndex!==0&&i===-1&&t.JustUsedTabKeyTime+50>Date.now()&&(this._FocusIndex=this.Rows.Count()-1,this.Rows.ElementAt(this._FocusIndex).Focus())}else this._FocusIndex=-1;this._OnFocus(n.jqEvent)},r.prototype._UnderlyingControl_OnBlur=function(n){this._OnBlur(n.jqEvent)},r.prototype._StackPanelRow_Clicked=function(t){n.StopEvent(t.jqEvent);var i=this.Rows.IndexOf(t.Sender);t.Sender.Focus(),this.SelectedIndex(i)},r.prototype.SelectedIndex=function(t){if(typeof t=="undefined"&&(t=null),t!==null){if(t<-1||t>this.Items.Count())throw new n.Exceptions.ArgumentException("SelectedIndex");var i=this._SelectedIndex;this._SelectedIndex=t,t===-1?this._SelectedRow!==null&&this._SelectedRow.RemoveClass("Selected"):(this._SelectedRow!==null&&this._SelectedRow.RemoveClass("Selected"),this._SelectedRow=this.Rows.ElementAt(t),this._SelectedRow.AddClass("Selected")),this.OnSelectionMade.Invoke(new n.Events.SelectionMadeEventArgs(this)),i!==this._SelectedIndex&&this.OnSelectedIndexChange.Invoke(new n.Events.SelectedIndexChangeEventArgs(this))}return this._SelectedIndex},r.prototype.Focus=function(){this.Rows.ElementAt(0).Focus(),this._FocusIndex=0},r.prototype.Blur=function(){this._FocusIndex>-1&&(this.Rows.ElementAt(this._FocusIndex).Blur(),this._FocusIndex=-1)},r}(t.StackPanel);t.ListBox=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(i){function r(){i.call(this),this.OnSelectedIndexChange=new n.Events.SelectedIndexChangeEvent,this._JustClosedItems=!1,this._HideItemsTimeout=-1,this._IgnoreNextBlur=!1,this._rootElement.addClass("DropDownBox"),this._InputContentPanel=new t.Panel,this.Children.Add(this._InputContentPanel),this._UnderlyingTextBox=new t.Label,this._UnderlyingTextBox.Focusable(!0),this._UnderlyingTextBox.OnFocus.Attach(new n.Events.FocusEventHandler(this._UnderlyingControl_OnFocus,this)),this._UnderlyingTextBox.OnBlur.Attach(new n.Events.BlurEventHandler(this._UnderlyingControl_OnBlur,this)),this._InputContentPanel.Children.Add(this._UnderlyingTextBox),this._DropDownToggle=new t.ToggleIndicatorLabel,this._DropDownToggle.SetIndicatorToOff(),this._DropDownToggle.Focusable(!1),this._DropDownToggle.OnClick.Attach(new n.Events.ClickEventHandler(this._DropDownToggle_OnClick,this)),this._InputContentPanel.Children.Add(this._DropDownToggle),this.Focusable(!0),this._SelectionWindow=new t.SelectionWindow,this._SelectionWindow.ContentPanel.OnSelectionMade.Attach(new n.Events.SelectionMadeEventHandler(this.SelectionWindow_OnSelectionMade,this)),this._SelectionWindow.ContentPanel.OnSelectedIndexChange.Attach(new n.Events.SelectedIndexChangeEventHandler(this.SelectionWindow_OnSelectedIndexChanged,this)),this._SelectionWindow.OnClose.Attach(new n.Events.CloseEventHandler(this.SelectionWindow_Close,this)),this.Items=this._SelectionWindow.ContentPanel.Items,this._SelectionWindow.ConstructDOM($("body"))}return __extends(r,i),r.prototype._HandleFocusableSet=function(){this._rootElement.removeAttr("tabindex")},r.prototype.SelectionWindow_Close=function(){this._JustClosedItems=!0,this.Focus()},r.prototype.SelectionWindow_OnSelectionMade=function(){this.HideItems()},r.prototype.SelectionWindow_OnSelectedIndexChanged=function(){this._UnderlyingTextBox.Text(this.Items.ElementAt(this.SelectedIndex()).Text()),this.OnSelectedIndexChange.Invoke(new n.Events.SelectedIndexChangeEventArgs(this))},r.prototype._OnFocus=function(n){i.prototype._OnFocus.call(this,n),t.preventTabKey=!0,this._HideItemsTimeout!==-1&&(clearTimeout(this._HideItemsTimeout),this._HideItemsTimeout=-1),this.ActuallyEnabled()&&(this._SelectionWindow.Visible()||this._JustClosedItems||(this._IgnoreNextBlur=!0,this.ShowItems())),this._JustClosedItems=!1},r.prototype._OnBlur=function(n){if(!this._IgnoreNextBlur&&(i.prototype._OnBlur.call(this,n),t.preventTabKey=!1,this._HideItemsTimeout!==-1&&(clearTimeout(this._HideItemsTimeout),this._HideItemsTimeout=-1),this._SelectionWindow.Visible())){var r=this;this._HideItemsTimeout=setTimeout(function(){r.HideItems()},50)}this._IgnoreNextBlur=!1},r.prototype._DropDownToggle_OnClick=function(t){this._UnderlyingTextBox.Focus(),n.StopEvent(t.jqEvent)},r.prototype._UnderlyingControl_OnFocus=function(n){this._OnFocus(n.jqEvent)},r.prototype._UnderlyingControl_OnBlur=function(n){this._OnBlur(n.jqEvent)},r.prototype.SelectedIndex=function(n){return typeof n=="undefined"&&(n=null),this._SelectionWindow.ContentPanel.SelectedIndex(n)},r.prototype.Focus=function(){this._UnderlyingTextBox.Focus()},r.prototype.Blur=function(){this._UnderlyingTextBox.Blur()},r.prototype.ShowItems=function(){this._SelectionWindow.PositionCenterWindow(),this._SelectionWindow.Show(),this._DropDownToggle.SetIndicatorToOn(),this.AddClass("Open")},r.prototype.HideItems=function(){this._SelectionWindow.Hide(),this._DropDownToggle.SetIndicatorToOff(),this.RemoveClass("Open")},r.prototype.Enabled=function(n){var t=i.prototype.Enabled.call(this,n);return!t&&this._SelectionWindow.Visible()&&this.HideItems(),t},r}(t.Control);t.DropDownBox=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(i){function r(n){typeof n=="undefined"&&(n=t.ProgressBarTypes.Horizontal),i.call(this),this._Type=t.ProgressBarTypes.Horizontal,this._Reverse=!1,this._Progress=0,this._ShowText=!0,this._rootElement.addClass("ProgressBar"),this._UnderlyingCanvas=new t.CanvasBox,this.Children.Add(this._UnderlyingCanvas),this._BarColourElem=$('<span class="Bar">'),this.Type(n)}return __extends(r,i),r.prototype.ConstructDOM=function(n,t){typeof t=="undefined"&&(t=null);var r=this;i.prototype.ConstructDOM.call(this,n,function(){r._rootElement.append(r._BarColourElem),r._Render(),t&&t()})},r.prototype.DestroyDOM=function(){this._BarColourElem.remove(),i.prototype.DestroyDOM.call(this)},r.prototype.Type=function(n){if(typeof n=="undefined"&&(n=null),n!==null){this.RemoveClass("Circular"),this.RemoveClass("Horizontal"),this.RemoveClass("Vertical");switch(n){case t.ProgressBarTypes.Circular:this.AddClass("Circular");break;case t.ProgressBarTypes.Horizontal:this.AddClass("Horizontal");break;case t.ProgressBarTypes.Vertical:this.AddClass("Vertical")}this._Type=n,this._Render()}return this._Type},r.prototype.Reverse=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(this._Reverse=n,this._Render()),this._Reverse},r.prototype.Progress=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(n=Math.max(0,Math.min(100,n)),this._Progress=n,this._Render()),this._Progress},r.prototype.ShowText=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(this._ShowText=n,this._Render()),this._ShowText},r.prototype._Render=function(){this.DOMConstructed&&n.Animation.RegisterAnimationForSingleCallback(new n.Animation.AnimationCallback(function(){var u=this.Progress(),s,h,f,c;u/=100;var n=this._UnderlyingCanvas.Context(),i=n.canvas.width=this.ActualWidth(),r=n.canvas.height=this.ActualHeight(),o=this.Reverse();n.fillStyle=this._BarColourElem.css("background-color"),n.strokeStyle=this._BarColourElem.css("background-color"),n.lineWidth=5,n.clearRect(0,0,i,r),n.textAlign="center",n.textBaseline="middle",s=this.Progress().toFixed(0)+"%",h=this.ShowText();switch(this.Type()){case t.ProgressBarTypes.Circular:f=2*Math.PI*u,c=(i-n.lineWidth-2)/2,n.font=(c*.65).toString()+"px Arial",u===1&&(f=2*Math.PI-.01),o&&(f=2*Math.PI-f),f-=Math.PI/2,u>.01&&(n.beginPath(),n.moveTo(i/2,n.lineWidth+1),n.arc(i/2,r/2,c,-Math.PI/2,f,o),n.stroke()),h&&(n.fillStyle=this._rootElement.css("color"),n.fillText(s,i/2,r/2,c*2-10));break;case t.ProgressBarTypes.Horizontal:var e=u*i,l=o?i-e:0,a=0,v=e,y=r;n.font="16px Arial",n.fillRect(l,a,v,y),h&&(n.fillStyle=this._rootElement.css("color"),n.fillText(s,i/2,r/2,i));break;case t.ProgressBarTypes.Vertical:var e=u*r,l=0,a=o?r-e:0,v=i,y=e;n.font="16px Arial",n.fillRect(l,a,v,y),h&&(n.fillStyle=this._rootElement.css("color"),n.fillText(s,i/2,r/2,i))}},this,!0))},r}(t.Control);t.ProgressBar=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(i){function r(n){typeof n=="undefined"&&(n=t.ProgressSpinnerTypes.Horizontal),i.call(this),this._Type=t.ProgressSpinnerTypes.Horizontal,this._AnimationDuration=2e3,this._ReverseAnimation=!1,this._AnimationCallbackObj=null,this._rootElement.addClass("ProgressSpinner"),this._UnderlyingCanvas=new t.CanvasBox,this.Children.Add(this._UnderlyingCanvas),this.Type(n)}return __extends(r,i),r.prototype.Type=function(n){if(typeof n=="undefined"&&(n=null),n!==null){this.RemoveClass("Circular"),this.RemoveClass("Horizontal"),this.RemoveClass("Vertical");switch(n){case t.ProgressSpinnerTypes.Circular:this.AddClass("Circular");break;case t.ProgressSpinnerTypes.Horizontal:this.AddClass("Horizontal");break;case t.ProgressSpinnerTypes.Vertical:this.AddClass("Vertical")}this._Type=n,this._Animate()}return this._Type},r.prototype.AnimationDuration=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(this._AnimationDuration=n),this._AnimationDuration},r.prototype.Reverse=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(this._ReverseAnimation=n),this._ReverseAnimation},r.prototype._Animate=function(){this._AnimationCallbackObj!==null&&(n.Animation.UnregisterAnimationCallback(this._AnimationCallbackObj),this._AnimationCallbackObj=null);var i=this;this._AnimationCallbackObj=n.Animation.RegisterAnimationCallback(new n.Animation.AnimationCallback(function(n){var y,o;if(this.Visible()){var i=this._UnderlyingCanvas.Context(),u=i.canvas.width=this.ActualWidth(),s=i.canvas.height=this.ActualHeight(),v=n/this._AnimationDuration%2,h=this.Type(),f=0;i.clearRect(0,0,u,s),h===t.ProgressSpinnerTypes.Vertical?(i.rotate(Math.PI/2),i.translate(0,-u),f=(u-2)/2):f=(s-2)/2,f=3;var c=(u-f*2-2)/2,w=f*3/c;i.shadowBlur=0,i.fillStyle=this._rootElement.css("color"),i.strokeStyle=this._rootElement.css("color"),i.beginPath(),h===t.ProgressSpinnerTypes.Vertical&&(y=s,s=u,u=y);var p=this._ReverseAnimation,e=f+1,r=0,l=0,a=0;for(o=-2;o<3;o++)p&&(r=u-r),h==0?(a=2+(v+.2*o)+.5,a%=2,r=Math.PI*(Math.pow(a-1,3)+1),l=p?2*Math.PI-r:r,r=c*Math.sin(l),e=c*Math.cos(l),r+=u/2,e+=s/2,i.moveTo(r+.5,e+.5),i.arc(r+.5,e+.5,f,0,2*Math.PI)):(h===t.ProgressSpinnerTypes.Horizontal||h===t.ProgressSpinnerTypes.Vertical)&&(r=(u/2-f*3*o)*(Math.pow(2*v-(2+.2*o),3)+1),i.moveTo(r+.5,e+.5),i.arc(r+.5,e+.5,f,0,2*Math.PI));i.fill()}},this))},r}(t.Control);t.ProgressSpinner=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(i){function r(){i.call(this),this.bool=!1,this._rootElement.addClass("SplitContainer"),this.Panel1=new t.Panel,this.Panel2=new t.Panel,this.Panel1.AddClass("Panel1"),this.Panel2.AddClass("Panel2"),this.Children.Add(this.Panel1),this.Children.Add(this.Panel2),this.MainSplitterGrip=new t.SplitterGrip,this.Children.Add(this.MainSplitterGrip),this.MainSplitterGrip.OnMouseDown.Attach(new n.Events.MouseDownEventHandler(this.MainSplitterGrip_OnMouseDown,this)),this._MainSplitterGrip_MouseUpHandler=new n.Events.MouseUpEventHandler(this.MainSplitterGrip_OnMouseUp,this),this._MainSplitterGrip_MouseMoveHandler=new n.Events.MouseMoveEventHandler(this.MainSplitterGrip_OnMouseMove,this),this.MainSplitterGrip.OnSplitterMove.Attach(new n.Events.SplitterMoveEventHandler(this.MainSplitterGrip_OnSplitterMove,this)),this.MainSplitterGrip.OnOrientationChanged.Attach(new n.Events.OrientationChangedEventHandler(this.MainSplitterGrip_OnOrientationChanged,this)),this.OnResize.Attach(new n.Events.ResizeEventHandler(this._This_Resized,this)),this.Width(new t.CSSNumber(100,"%")),this.Height(new t.CSSNumber(100,"%"))}return __extends(r,i),r.prototype.ConstructDOM=function(n,t){typeof t=="undefined"&&(t=null);var r=this;i.prototype.ConstructDOM.call(this,n,function(){r.MainSplitterGrip.Orientation(r.MainSplitterGrip.Orientation()),r.MainSplitterGrip.SplitterDistance(r.MainSplitterGrip.SplitterDistance()),r.MainSplitterGrip.SplitterWidth(r.MainSplitterGrip.SplitterWidth()),t&&t()})},r.prototype.Orientation=function(n){return this.MainSplitterGrip.Orientation(n)},r.prototype.MainSplitterGrip_OnMouseDown=function(t){this._MainSplitterGrip_Dragging=!0,n.StopEvent(t.jqEvent),this.MainSplitterGrip.OnMouseUp.Attach(this._MainSplitterGrip_MouseUpHandler),this.MainSplitterGrip.OnMouseMove.Attach(this._MainSplitterGrip_MouseMoveHandler)},r.prototype.MainSplitterGrip_OnMouseUp=function(t){this._MainSplitterGrip_Dragging&&(this._MainSplitterGrip_Dragging=!1,n.StopEvent(t.jqEvent),this.MainSplitterGrip.OnMouseUp.Detach(this._MainSplitterGrip_MouseUpHandler),this.MainSplitterGrip.OnMouseMove.Detach(this._MainSplitterGrip_MouseMoveHandler))},r.prototype.MainSplitterGrip_OnMouseMove=function(i){if(this._MainSplitterGrip_Dragging){if(this.MainSplitterGrip.ActuallyEnabled()){var r=this.ActualWidth(),u=this.ActualHeight(),f=(i.jqEvent.pageX-this.PageLeft())/r*100,e=(i.jqEvent.pageY-this.PageTop())/u*100;this.MainSplitterGrip.Orientation()===t.SplitterGrip_Orientations.Horizontal?this.MainSplitterGrip.SplitterDistance(e):this.MainSplitterGrip.SplitterDistance(f)}else this._MainSplitterGrip_Dragging=!1;n.StopEvent(i.jqEvent)}},r.prototype.MainSplitterGrip_OnSplitterMove=function(){var n=this.MainSplitterGrip.SplitterDistance(),e=!0,i,u,r,f;this.MainSplitterGrip.Orientation()===t.SplitterGrip_Orientations.Horizontal?(i=this.Panel1.MinHeight(),u=i.Units==="px"?i.Value/this.ActualHeight()*100:i.Value,!i.Auto&&n<u&&(n=u,this.MainSplitterGrip.Top(new t.CSSNumber(n,"%")),e=!1),e&&(i=this.Panel2.MinHeight(),u=i.Units==="px"?i.Value/this.ActualHeight()*100:i.Value,u=100-u,!i.Auto&&n>u&&(n=u,this.MainSplitterGrip.Top(new t.CSSNumber(n,"%")),e=!1))):(r=this.Panel1.MinWidth(),f=r.Units==="px"?r.Value/this.ActualWidth()*100:r.Value,!r.Auto&&n<f&&(n=f,this.MainSplitterGrip.Left(new t.CSSNumber(n,"%")),e=!1),e&&(r=this.Panel2.MinWidth(),f=r.Units==="px"?r.Value/this.ActualWidth()*100:r.Value,f=100-f,!r.Auto&&n>f&&(n=f,this.MainSplitterGrip.Left(new t.CSSNumber(n,"%")),e=!1))),this.MainSplitterGrip.Orientation()===t.SplitterGrip_Orientations.Horizontal?(this.Panel1.Height(new t.CSSNumber(n,"%")),this.Panel2.Height(new t.CSSNumber(100-n,"%")),this.Panel2.Top(new t.CSSNumber(n,"%"))):(this.Panel1.Width(new t.CSSNumber(n,"%")),this.Panel2.Width(new t.CSSNumber(100-n,"%")),this.Panel2.Left(new t.CSSNumber(n,"%")))},r.prototype.MainSplitterGrip_OnOrientationChanged=function(){this.MainSplitterGrip.Orientation()===t.SplitterGrip_Orientations.Horizontal?(this.Panel1.Width(new t.CSSNumber(100,"%")),this.Panel2.Width(new t.CSSNumber(100,"%")),this.Panel1.Left(new t.CSSNumber(0)),this.Panel2.Left(new t.CSSNumber(0))):(this.Panel1.Height(new t.CSSNumber(100,"%")),this.Panel2.Height(new t.CSSNumber(100,"%")),this.Panel1.Top(new t.CSSNumber(0)),this.Panel2.Top(new t.CSSNumber(0))),this.MainSplitterGrip.SplitterDistance(this.MainSplitterGrip.SplitterDistance())},r.prototype._This_Resized=function(){this.MainSplitterGrip.SplitterDistance(this.MainSplitterGrip.SplitterDistance())},r}(t.Control);t.SplitContainer=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(i){function r(){i.call(this),this._Orientation=t.SplitterGrip_Orientations.Vertical,this._SplitterDistance=50,this._SplitterWidth=15,this._rootElement.addClass("SplitterGrip"),this.OnSplitterMove=new n.Events.SplitterMoveEvent,this.OnOrientationChanged=new n.Events.OrientationChangedEvent}return __extends(r,i),r.prototype.ConstructDOM=function(n,t){typeof t=="undefined"&&(t=null);var r=this;i.prototype.ConstructDOM.call(this,n,function(){r._rootElement.text("&nbsp;"),t&&t()})},r.prototype.MaxDistance=function(){return 99.5},r.prototype.Orientation=function(i){if(typeof i=="undefined"&&(i=null),i!==null){this._Orientation=i;var r=this.Orientation();this._rootElement.css({height:r===t.SplitterGrip_Orientations.Horizontal?i.toString()+"%":"100%",width:r===t.SplitterGrip_Orientations.Vertical?i.toString()+"%":"100%",top:r===t.SplitterGrip_Orientations.Horizontal?i.toString()+"%":"0px",left:r===t.SplitterGrip_Orientations.Vertical?i.toString()+"%":"0px"}),r===t.SplitterGrip_Orientations.Horizontal?(this._rootElement.removeClass("Vertical"),this._rootElement.addClass("Horizontal")):(this._rootElement.removeClass("Horizontal"),this._rootElement.addClass("Vertical")),this.OnOrientationChanged.Invoke(new n.Events.OrientationChangedEventArgs(this))}return this._Orientation},r.prototype.SplitterDistance=function(i){var r,u;return typeof i=="undefined"&&(i=null),i!==null&&(r=this.MaxDistance(),i=i<0?0:i>r?r:i,this._SplitterDistance=i,u=this.Orientation(),this._rootElement.css({top:u===t.SplitterGrip_Orientations.Horizontal?i.toString()+"%":"0px",left:u===t.SplitterGrip_Orientations.Vertical?i.toString()+"%":"0px"}),this.OnSplitterMove.Invoke(new n.Events.SplitterMoveEventArgs(this))),this._SplitterDistance},r.prototype.SplitterWidth=function(n){if(typeof n=="undefined"&&(n=null),n!==null){this._SplitterWidth=n;var i=this.Orientation();this._rootElement.css({height:i===t.SplitterGrip_Orientations.Horizontal?n.toString()+"px":"100%",width:i===t.SplitterGrip_Orientations.Vertical?n.toString()+"px":"100%"})}return this._SplitterWidth},r}(t.Control);t.SplitterGrip=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(t){function i(){t.call(this),this.OnNameChange=new n.Events.NameChangeEvent,this._Name="A Tab",this._rootElement.addClass("Tab"),this.ApplyStyle("display","none")}return __extends(i,t),i.prototype.Name=function(t){if(typeof t=="undefined"&&(t=null),t!==null){var i=this._Name;this._Name=t,i!==t&&this.OnNameChange.Invoke(new n.Events.NameChangeEventArgs(this,i))}return this._Name},i.prototype.Hide=function(i,r){typeof r=="undefined"&&(r=new n.Animation.FadeAnimator);var u=this;t.prototype.Hide.call(this,function(){u.AnimationElement().css({display:"none"}),i&&i()},r)},i}(t.Panel);t.Tab=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(i){function r(){i.call(this),this.OnSelectedIndexChange=new n.Events.SelectedIndexChangeEvent,this.Tabs=new n.Collections.List,this._TabButtons=[],this._FocusIndex=-1,this._GetElementWithHighestSequentialTabIndex_Cache=null,this._SelectedIndex=-1,this._rootElement.addClass("TabControl"),this._TabButtonsPanel=new t.Panel,this._TabButtonsPanel.AddClass("TabButtons"),this.Children.Add(this._TabButtonsPanel),this._TabButtonsInnerPanel=new t.Panel,this._TabButtonsInnerPanel.RelativeLayoutOn(),this._TabButtonsPanel.Children.Add(this._TabButtonsInnerPanel),this._TabsContainer=new t.Panel,this._TabsContainer.AddClass("TabsContainer"),this.Children.Add(this._TabsContainer),this._SelectedTabBar=new t.Panel,this._SelectedTabBar.AddClass("SelectedTabBar"),this._TabButtonsInnerPanel.Children.Add(this._SelectedTabBar),this.Tabs.OnModified.Attach(new n.Events.CollectionModifiedEventHandler(this._Tabs_OnModified,this))}return __extends(r,i),r.prototype.ConstructDOM=function(n,r){typeof r=="undefined"&&(r=null);var u=this;i.prototype.ConstructDOM.call(this,n,function(){var o,s,e,f,i,n;if(u.Tabs.Count()>0){for(i=u.Tabs.ElementAt(0),n=u._TabButtons[i.Name()],n.AddClass("Selected"),i.Visible(!0),u._SelectedIndex=0,o=n.AnimationElement().position().left,s=n.ActualWidth(),u._SelectedTabBar.AnimationElement().css({left:o,width:s}),e=0,f=0;f<u.Tabs.Count();f++)i=u.Tabs.ElementAt(f),n=u._TabButtons[i.Name()],e+=n.ActualWidth();u._TabButtonsInnerPanel.Width(new t.CSSNumber(e+10))}r&&r()})},r.prototype._UnderlyingControl_KeyDown=function(i){this.ActuallyEnabled()?i.jqEvent.keyCode===38?(this._FocusIndex>0&&(this._FocusIndex>-1&&this._TabButtons[this.Tabs.ElementAt(this._FocusIndex).Name()].Blur(),this._FocusIndex--,this._TabButtons[this.Tabs.ElementAt(this._FocusIndex).Name()].Focus()),n.StopEvent(i.jqEvent)):i.jqEvent.keyCode===40?(this._FocusIndex<this.Tabs.Count()-1&&(this._FocusIndex>-1&&this._TabButtons[this.Tabs.ElementAt(this._FocusIndex).Name()].Blur(),this._FocusIndex++,this._TabButtons[this.Tabs.ElementAt(this._FocusIndex).Name()].Focus()),n.StopEvent(i.jqEvent)):i.jqEvent.keyCode===9&&(i.jqEvent.shiftKey?this._FocusIndex>0?(t.preventTabKey=!0,this._TabButtons[this.Tabs.ElementAt(this._FocusIndex).Name()].Blur(),this._FocusIndex--,this._TabButtons[this.Tabs.ElementAt(this._FocusIndex).Name()].Focus(),n.StopEvent(i.jqEvent)):this._FocusIndex===-1?(this._FocusIndex=this.Tabs.Count()-1,this._TabButtons[this.Tabs.ElementAt(this._FocusIndex).Name()].Blur(),t.preventTabKey=!0,n.StopEvent(i.jqEvent)):(this._FocusIndex=-1,t.preventTabKey=!1):this._FocusIndex===-1&&this.Tabs.Count()>0?(t.preventTabKey=!0,this._FocusIndex++,this._TabButtons[this.Tabs.ElementAt(this._FocusIndex).Name()].Focus(),n.StopEvent(i.jqEvent)):this._FocusIndex<this.Tabs.Count()-1?(t.preventTabKey=!0,this._TabButtons[this.Tabs.ElementAt(this._FocusIndex).Name()].Blur(),this._FocusIndex++,this._TabButtons[this.Tabs.ElementAt(this._FocusIndex).Name()].Focus(),n.StopEvent(i.jqEvent)):(this._FocusIndex!==-1&&this._TabButtons[this.Tabs.ElementAt(this._FocusIndex).Name()].Blur(),this._GetElementWithHighestSequentialTabIndex().Focus(),t.preventTabKey=!1,this._FocusIndex=-1)):n.StopEvent(i.jqEvent)},r.prototype._GetElementWithHighestSequentialTabIndex=function(){var r,t,n,s;if(this._GetElementWithHighestSequentialTabIndex_Cache===null){var u=this._TabButtons[this.Tabs.ElementAt(0).Name()].TabIndex(),f=this._TabButtons[this.Tabs.ElementAt(0).Name()],i=0,e=[],o=[];for(n=0;n<this.Tabs.Count();n++)r=this._TabButtons[this.Tabs.ElementAt(n).Name()],t=r.TabIndex(),e.push(t),t>i&&(i=t,o[t]=r);for(n=u+1;n<=i;n++)if(e.indexOf(n)===-1){if(s=$('*[tabindex="'+n.toString(10)+'"]'),s.length>0)break}else u=n,f=o[n];this._GetElementWithHighestSequentialTabIndex_Cache=f}return this._GetElementWithHighestSequentialTabIndex_Cache},r.prototype._Tabs_OnModified=function(t){var i,r;switch(t.Modification){case n.Events.CollectionModifications.Add:for(i=0;i<t.ModifiedElements.Count();i++)r=t.ModifiedElements.ElementAt(i),this._ConstructTab(r);break;case n.Events.CollectionModifications.Remove:for(i=0;i<t.ModifiedElements.Count();i++)r=t.ModifiedElements.ElementAt(i),this._DestroyTab(r);break;case n.Events.CollectionModifications.Reorder:for(this._TabButtonsInnerPanel.Children.Clear(),this._TabsContainer.Children.Clear(),this._TabButtons=[],i=0;i<t.ModifiedElements.Count();i++)r=t.ModifiedElements.ElementAt(i),this._ConstructTab(r)}},r.prototype._ConstructTab=function(i){var r,f,u,i,e;if(this._TabsContainer.Children.Add(i),r=new t.Button,r.AddClass("TabButton"),r.Text(i.Name()),r.RelativeLayoutOn(),r.OnClick.Attach(new n.Events.ClickEventHandler(this._TabButton_Clicked,this)),r.OnKeyDown.Attach(new n.Events.KeyDownEventHandler(this._UnderlyingControl_KeyDown,this)),this._TabButtonsInnerPanel.Children.Add(r),this._TabButtons[i.Name()]=r,this.DOMConstructed){for(f=0,u=0;u<this.Tabs.Count();u++)i=this.Tabs.ElementAt(u),e=this._TabButtons[i.Name()],f+=e.ActualWidth();this._TabButtonsInnerPanel.Width(new t.CSSNumber(f+10))}},r.prototype._DestroyTab=function(n){this._TabsContainer.Children.Remove(n);var t=n.Name(),i=this._TabButtons[t];this._TabButtonsInnerPanel.Children.Remove(i),this._TabButtons[t]=undefined},r.prototype._Tab_NameChanged=function(n){var t=this._TabButtons[n.oldName],i=n.Sender.Name();t.Text(i),this._TabButtons[n.oldName]=undefined,this._TabButtons[i]=t},r.prototype._TabButton_Clicked=function(n){var t=this._TabButtonsInnerPanel.Children.IndexOf(n.Sender)-1;this.SelectedIndex(t)},r.prototype.SelectedIndex=function(t){var i,r,u;return typeof t=="undefined"&&(t=null),t!==null&&t>-1&&t<this.Tabs.Count()&&(i=this._SelectedIndex,this._SelectedIndex=t,i!==t&&(this.OnSelectedIndexChange.Invoke(new n.Events.SelectedIndexChangeEventArgs(this)),r=this,u=this.Enabled(),r.Enabled(!1),i!==-1&&this._HideTab(i),this._ShowTab(t,function(){r.Enabled(u)}))),this._SelectedIndex},r.prototype._ShowTab=function(n,t){typeof t=="undefined"&&(t=null);var i=this.Tabs.ElementAt(n),r=this._TabButtons[i.Name()],u=r.AnimationElement().position().left,f=r.ActualWidth();this._SelectedTabBar.AnimationElement().animate({left:u,width:f},350,"swing"),r.AddClass("Selected"),i.ApplyStyle("z-index","2"),i.Show(t)},r.prototype._HideTab=function(n,t){typeof t=="undefined"&&(t=null);var i=this.Tabs.ElementAt(n),r=this._TabButtons[i.Name()];r.RemoveClass("Selected"),i.ApplyStyle("z-index","1"),i.Hide(t)},r}(t.Control);t.TabControl=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(i){function r(r,u){typeof r=="undefined"&&(r=t.TileSizes.Large),typeof u=="undefined"&&(u=t.TileTypes.Flip),i.call(this),this.Backgrounds=new n.Collections.List,this._Size=null,this._Type=null,this.MaxTime=12e3,this.MinTime=6e3,this.DelayTimeMax=2e3,this.ShouldCycle=!0,this._CycleCallback=null,this._CycleRef=-1,this._CycleTime=-1,this.doCycle=!0,this._CurrBgIndex=-1,this._ShowingBg=!1,this._HidingBg=!1,this._rootElement.addClass("Tile"),this.Focusable(!0),this.NameLabel=new t.Label,this.NameLabel.AddClass("Name"),this.Children.Add(this.NameLabel),this.TextLabel=new t.Label,this.TextLabel.AddClass("Text"),this.Children.Add(this.TextLabel),this.IconBox=new t.TileIcon,this.Children.Add(this.IconBox),this.Counter=new t.TileCounter,this.Children.Add(this.Counter),this.Size(r),this.Type(u),this.Backgrounds.OnModified.Attach(new n.Events.CollectionModifiedEventHandler(this._Backgrounds_Modified,this))}return __extends(r,i),r.prototype.ConstructDOM=function(n,t){typeof t=="undefined"&&(t=null),i.prototype.ConstructDOM.call(this,n,t),this.StartCycle()},r.prototype._Backgrounds_Modified=function(t){var i,r;switch(t.Modification){case n.Events.CollectionModifications.Add:for(i=0;i<t.ModifiedElements.Count();i++)r=t.ModifiedElements.ElementAt(i),this._ConstructBackground(r);this._CurrBgIndex===-1&&this.ShowBackground(0);break;case n.Events.CollectionModifications.Remove:for(i=0;i<t.ModifiedElements.Count();i++)r=t.ModifiedElements.ElementAt(i),r.DestroyDOM()}},r.prototype._ConstructBackground=function(n){n.SetPosition(t.TileBackgroundPositions.OffTop),this.Children.Add(n)},r.prototype.Size=function(n){if(typeof n=="undefined"&&(n=null),n!==null){this._Size=n,this.RemoveClass("Large"),this.RemoveClass("Medium"),this.RemoveClass("Small");switch(n){case t.TileSizes.Small:this.AddClass("Small");break;case t.TileSizes.Medium:this.AddClass("Medium");break;case t.TileSizes.Large:this.AddClass("Large")}}return this._Size},r.prototype.Type=function(n){if(typeof n=="undefined"&&(n=null),n!==null){this._Type=n,this.RemoveClass("Flip"),this.RemoveClass("Iconic"),this.RemoveClass("Cycle");switch(n){case t.TileTypes.Flip:this.AddClass("Flip"),this.StartCycle();break;case t.TileTypes.Iconic:this.AddClass("Iconic"),this.StopCycle(),this.HideBackground();break;case t.TileTypes.Cycle:this.AddClass("Cycle"),this.StartCycle()}}return this._Type},r.prototype.ShowCounter=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(n&&!this.ShowCounter()?this.RemoveClass("NoCounter"):!n&&this.ShowCounter()&&this.AddClass("NoCounter")),!this.HasClass("NoCounter")},r.prototype.StartCycle=function(){if(this._CycleCallback===null&&this.ShouldCycle&&this.DOMConstructed){var t=this;this._CycleTime=Math.random()*(t.MaxTime-t.MinTime)+t.MinTime,this._CycleCallback=new n.Animation.AnimationCallback(this._OnCycle,this),this._SetupCycleTimeout()}},r.prototype.StopCycle=function(){this._CycleCallback!==null&&(n.Animation.UnregisterAnimationCallback(this._CycleCallback),this._CycleCallback=null),this._CycleRef!==-1&&(clearTimeout(this._CycleRef),this._CycleRef=-1)},r.prototype._SetupCycleTimeout=function(){if(this._CycleCallback!==null){var t=this;this._CycleRef=setTimeout(function(){n.Animation.RegisterAnimationForSingleCallback(t._CycleCallback)},this._CycleTime)}},r.prototype._OnCycle=function(){this.ActuallyEnabled()&&(this.Type()===t.TileTypes.Flip?this.Flip():this.Type()===t.TileTypes.Cycle&&this.CycleBackground()),this._SetupCycleTimeout()},r.prototype.Flip=function(){this.Flipped(!this.Flipped())},r.prototype.Flipped=function(n){var i;return typeof n=="undefined"&&(n=null),n!==null&&this.Visible()&&this.ActuallyEnabled()&&(n&&!this.Flipped()?Modernizr.csstransitions||this.Size()===t.TileSizes.Small?this.AddClass("Flipped"):(i=this,i.TextLabel.ApplyStyles({display:"inline-block",visiblity:"visible",opacity:0}),i.Counter.ApplyStyles({opacity:1}),i.Counter.AnimationElement().animate({opacity:0},500,"linear",function(){i.TextLabel.AnimationElement().animate({opacity:1},500,"linear",function(){i.AddClass("Flipped"),i.TextLabel.ApplyStyles({display:"",visiblity:"",opacity:1}),i.Counter.ApplyStyles({opacity:0})})}),i._CurrBgIndex!==-1&&i.Backgrounds.ElementAt(i._CurrBgIndex).AnimationElement().animate({opacity:0},500,"linear"),i.IconBox.AnimationElement().animate({opacity:0},500,"linear")):!n&&this.Flipped()&&(Modernizr.csstransitions||this.Size()===t.TileSizes.Small?this.RemoveClass("Flipped"):(i=this,i.TextLabel.ApplyStyles({display:"",visiblity:"",opacity:1}),i.Counter.ApplyStyles({opacity:0}),i.TextLabel.AnimationElement().animate({opacity:0},500,"linear",function(){i.Counter.AnimationElement().animate({opacity:1},500,"linear",function(){i.RemoveClass("Flipped"),i.TextLabel.ApplyStyles({display:"",visiblity:"",opacity:0}),i.Counter.ApplyStyles({opacity:1})}),i._CurrBgIndex!==-1&&i.Backgrounds.ElementAt(i._CurrBgIndex).AnimationElement().animate({opacity:1},500,"linear"),i.IconBox.AnimationElement().animate({opacity:1},500,"linear")})))),this.HasClass("Flipped")},r.prototype.CycleBackground=function(){this.Backgrounds.Count()>0&&this.Visible()&&this.ActuallyEnabled()&&this.ShowBackground(this._CurrBgIndex+1==this.Backgrounds.Count()?0:this._CurrBgIndex+1)},r.prototype.ShowBackground=function(n){var r,i,u;!this._ShowingBg&&n!==this._CurrBgIndex&&n>-1&&n<this.Backgrounds.Count()&&(this._ShowingBg=!0,r=this.Backgrounds.ElementAt(n),r.SetPosition(t.TileBackgroundPositions.OffTop),i=this,Modernizr.csstransitions?setTimeout(function(){r.SetPosition(t.TileBackgroundPositions.In),i.HideBackground(function(){i._CurrBgIndex=n,i._ShowingBg=!1})},2e3):(u=r.AnimationElement(),this.HideBackground(function(){i._CurrBgIndex=n}),u.animate({top:0},1e3,"linear",function(){r.ApplyStyle("top",""),r.SetPosition(t.TileBackgroundPositions.In),i._CurrBgIndex=n,i._ShowingBg=!1})))},r.prototype.HideBackground=function(n){var i,r,u;!this._HidingBg&&this._CurrBgIndex!=-1&&this._CurrBgIndex<this.Backgrounds.Count()?(this._HidingBg=!0,i=this.Backgrounds.ElementAt(this._CurrBgIndex),r=this,Modernizr.csstransitions?(i.SetPosition(t.TileBackgroundPositions.OffBottom),setTimeout(function(){r._HidingBg=!1,r._CurrBgIndex=-1,n&&n()},2e3)):(u=i.AnimationElement(),u.animate({top:"100%"},1e3,"linear",function(){i.ApplyStyle("top",""),i.SetPosition(t.TileBackgroundPositions.OffBottom),r._CurrBgIndex=-1,r._HidingBg=!1,n&&n()}))):n&&n()},r.prototype.InvokeDefaultAction=function(){this._rootElement.click()},r}(t.Control);t.Tile=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(n){var t=function(n){function t(){n.call(this),this._rootElement.addClass("Counter")}return __extends(t,n),t}(n.Label);n.TileCounter=t})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(n){n.IconsDirectory="Images/",n.TileIcons={About:n.IconsDirectory+"InfoIcon.png",Download:n.IconsDirectory+"DownloadIcon.png"};var t=function(n){function t(){n.call(this),this._rootElement.addClass("Icon")}return __extends(t,n),t}(n.ImageBox);n.TileIcon=t})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(i){function r(){i.call(this),this._Grip_Dragging=!1,this._Mode=t.TrackBarModes.Discrete,this._Max=100,this._Min=0,this._Divisions=10,this._Value=0,this._rootElement.addClass("TrackBar"),this._BarElement=new t.Panel,this._BarElement.AddClass("Bar"),this.Children.Add(this._BarElement),this._GripElement=new t.Panel,this._GripElement.AddClass("Grip"),this.Children.Add(this._GripElement),this.OnValueChange=new n.Events.ValueChangeEvent,this._GripElement.OnMouseDown.Attach(new n.Events.MouseDownEventHandler(this._Grip_OnMouseDown,this)),this._MouseUpHandler=new n.Events.MouseUpEventHandler(this._Grip_OnMouseUp,this),this._MouseMoveHandler=new n.Events.MouseMoveEventHandler(this._Grip_OnMouseMove,this),this.OnKeyDown.Attach(new n.Events.KeyDownEventHandler(this._This_OnKeyDown,this)),this.OnClick.Attach(new n.Events.ClickEventHandler(this._This_OnClick,this)),this.Focusable(!0)}return __extends(r,i),r.prototype.Mode=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(this._Mode=n),this._Mode},r.prototype.Max=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(this._Max=n,this.Value(this.Value())),this._Max},r.prototype.Min=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(this._Min=n,this.Value(this.Value())),this._Min},r.prototype.Divisions=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(this._Divisions=n),this._Divisions},r.prototype.Value=function(i){var u;if(typeof i=="undefined"&&(i=null),i!==null){i=Math.max(this._Min,Math.min(this._Max,i)),u=this._Value,this._Value=i;var f=this.ActualWidth(),o=this._Max-this._Min,s=(i-this._Min)/o,r=s*f,e=this._GripElement.ActualWidth();r-=e/2,r=Math.max(0,Math.min(f-e,r)),this._GripElement.Left(new t.CSSNumber(r)),u!==i&&this.OnValueChange.Invoke(new n.Events.ValueChangeEventArgs(this))}return this._Value},r.prototype._Grip_OnMouseDown=function(t){this._Grip_Dragging=!0,n.StopEvent(t.jqEvent),this._GripElement.OnMouseUp.Attach(this._MouseUpHandler),this._GripElement.OnMouseMove.Attach(this._MouseMoveHandler),this.Focus()},r.prototype._Grip_OnMouseUp=function(t){this._Grip_Dragging&&(this._Grip_Dragging=!1,n.StopEvent(t.jqEvent),this._GripElement.OnMouseUp.Detach(this._MouseUpHandler),this._GripElement.OnMouseMove.Detach(this._MouseMoveHandler))},r.prototype._Grip_OnMouseMove=function(i){var f;if(this._Grip_Dragging){var e=this._rootElement.offset().left,o=i.jqEvent.pageX-e,s=this.ActualWidth(),u=this._Max-this._Min,h=o/s,r=this._Min+u*h;switch(this._Mode){case t.TrackBarModes.Discrete:f=u/this._Divisions,r=n.roundTo(r,f)}this.Value(r),n.StopEvent(i.jqEvent)}},r.prototype._This_OnClick=function(i){var o=i.jqEvent.pageX-this._rootElement.offset().left,s=this.ActualWidth(),f=this._Max-this._Min,h=o/s,r=this._Value,e=this._Min+f*h,u;switch(this._Mode){case t.TrackBarModes.Continuous:r=e;break;case t.TrackBarModes.Discrete:u=f/this._Divisions,e>r?r+=u:r-=u}this.Value(r),n.StopEvent(i.jqEvent)},r.prototype._This_OnKeyDown=function(i){var f;if(i.jqEvent.keyCode===37){var e=this.ActualWidth(),u=this._Max-this._Min,r=this._Value;switch(this._Mode){case t.TrackBarModes.Continuous:r-=u/100;break;case t.TrackBarModes.Discrete:f=u/this._Divisions,r-=f}this.Value(r),n.StopEvent(i.jqEvent)}else if(i.jqEvent.keyCode===39){var e=this.ActualWidth(),u=this._Max-this._Min,r=this._Value;switch(this._Mode){case t.TrackBarModes.Continuous:r+=u/100;break;case t.TrackBarModes.Discrete:f=u/this._Divisions,r+=f}this.Value(r),n.StopEvent(i.jqEvent)}},r.prototype.InvokeDefaultAction=function(){},r}(t.Control);t.TrackBar=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(n){var t=function(t){function i(){t.call(this),this._rootElement.addClass("TitleBar"),this._TitleLabel=new n.Label,this._TitleLabel.AddClass("Title"),this.Children.Add(this._TitleLabel)}return __extends(i,t),i.prototype.WindowMinSuitableWidth=function(){return this._TitleLabel.ActualWidth()+50},i.prototype.Title=function(n){return typeof n=="undefined"&&(n=null),n!==null&&this._TitleLabel.Text(n),this._TitleLabel.Text()},i.prototype.Draggable=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(this._Draggable=n,this._Draggable?this._rootElement.removeClass("Undraggable"):this._rootElement.addClass("Undraggable")),this._Draggable},i}(n.Control);n.TitleBar=t})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(n){var t=function(t){function i(){t.call(this),this.GripColor="#969696",this._rootElement.addClass("ResizeGrip"),this._GripCanvas=new n.CanvasBox,this.Children.Add(this._GripCanvas)}return __extends(i,t),i.prototype.ConstructDOM=function(n,i){typeof i=="undefined"&&(i=null);var r=this;t.prototype.ConstructDOM.call(this,n,function(){r.Render(),i&&i()})},i.prototype.Enabled=function(n){typeof n=="undefined"&&(n=null);var i=t.prototype.Enabled.call(this,n);return n!==null&&this.Render(),i},i.prototype.Render=function(){var t=100,i=100,r=this.GripColor,n;this._Enabled||(r="#FAFAFA"),n=this._GripCanvas.Context(),n.lineWidth=8,n.strokeStyle=r,n.beginPath(),n.moveTo(0*t,i),n.lineTo(t,0),n.moveTo(2.75*(t/6),i),n.lineTo(t,2.75*(i/6)),n.moveTo(5*(t/6),i),n.lineTo(t,5*(i/6)),n.stroke()},i}(n.Control);n.ResizeGrip=t})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(i){function r(r){typeof r=="undefined"&&(r=!1),i.call(this),this._Expanded=!1,this._rootElement.addClass("Expandable"),this.MainTitleBar=new t.TitleBar,this.Children.Add(this.MainTitleBar),this.MainTitleBar.OnClick.Attach(new n.Events.ClickEventHandler(this._MainTitleBar_Clicked,this)),this.MainToggleIndiciator=new t.ToggleIndicatorLabel,this.MainToggleIndiciator.AddClass("ToggleIndicator"),this.Children.Add(this.MainToggleIndiciator),r?this.MainToggleIndiciator.SetIndicatorToOn():(this.MainToggleIndiciator.SetIndicatorToOff(),this._rootElement.addClass("Collapsed")),this._Expanded=r,this.MainToggleIndiciator.Focusable(!0),this.MainToggleIndiciator.OnClick.Attach(new n.Events.ClickEventHandler(this._MainTitleBar_Clicked,this)),this.ContentPanel=new t.Panel,this.Children.Add(this.ContentPanel),this.Height(new t.CSSNumber(30))}return __extends(r,i),r.prototype.ConstructDOM=function(n,r){typeof r=="undefined"&&(r=null);var u=this;i.prototype.ConstructDOM.call(this,n,function(){u._Expanded?(u.Height(new t.CSSNumber(u.ContentPanel.Top().Value+u.ContentPanel.Height().Value+15)),u.ContentPanel.Enabled(!0)):(u.Height(new t.CSSNumber(u.MainTitleBar.ActualHeight())),u.ContentPanel.Enabled(!1)),r&&r()})},r.prototype._MainTitleBar_Clicked=function(){this.Toggle()},r.prototype.Title=function(n){return this.MainTitleBar.Title(n)},r.prototype.Expanded=function(){return this._Expanded},r.prototype.Toggle=function(){this._Expanded?this.Collapse():this.Expand()},r.prototype.Expand=function(i,r){if(typeof i=="undefined"&&(i=null),typeof r=="undefined"&&(r=new n.Animation.ExpandableAnimator),!this.Expanded()){var u=this;this.MainToggleIndiciator.SetIndicatorToOn(),this._rootElement.removeClass("Collapsed"),r.Show(this,function(){u.ContentPanel.HasClass("RelativeLayout")&&u.ContentPanel.Height(new t.CSSNumber(u.Height().Value-60)),u.ContentPanel.Enabled(!0),u._Expanded=!0,i!==null&&i()})}},r.prototype.Collapse=function(i,r){if(typeof i=="undefined"&&(i=null),typeof r=="undefined"&&(r=new n.Animation.ExpandableAnimator),this.Expanded()){var u=this;this.MainToggleIndiciator.SetIndicatorToOff(),this._rootElement.addClass("Collapsed"),this.ContentPanel.Enabled(!1),r.Hide(this,function(){u.ContentPanel.HasClass("RelativeLayout")&&u.ContentPanel.Height(new t.CSSNumber(0,"",!0)),u._Expanded=!1,i!==null&&i()})}},r.prototype.EnableByParent=function(){i.prototype.EnableByParent.call(this),this._Expanded||this.ContentPanel.Enabled(!1)},r}(t.Control);t.Expandable=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(i){function r(){i.call(this),this._DraggingEnabled=!0,this._DraggingWindow=!1,this._DraggingOffset=null,this._ResizingEnabled=!0,this._ResizingWindow=!1,this._ResizingOffset=null,this.DestroyDOMOnClose=!0,this.EnableSelection(),this._rootElement.addClass("Window"),this.ApplyStyle("visibility","hidden"),this.OnClose=new n.Events.CloseEvent,this.MainTitleBar=new t.TitleBar,this.Children.Add(this.MainTitleBar),this._MainTitleBar_MouseUpHandler=new n.Events.MouseUpEventHandler(this._MainTitleBar_OnMouseUp,this),this._MainTitleBar_MouseMoveHandler=new n.Events.MouseMoveEventHandler(this._MainTitleBar_OnMouseMove,this),this.MainTitleBar.OnMouseDown.Attach(new n.Events.MouseDownEventHandler(this._MainTitleBar_OnMouseDown,this)),this.MainTitleBar.OnMouseUp.Attach(this._MainTitleBar_MouseUpHandler),this.MainTitleBar.OnMouseMove.Attach(this._MainTitleBar_MouseMoveHandler),this.CloseButton=new t.Button,this.CloseButton.AddClass("WindowCloseButton"),this.CloseButton.Text("X"),this.Children.Add(this.CloseButton),this.ContentPanel=new t.Panel,this.Children.Add(this.ContentPanel),this.MainResizeGrip=new t.ResizeGrip,this.Children.Add(this.MainResizeGrip),this._MainResizeGrip_MouseUpHandler=new n.Events.MouseUpEventHandler(this._MainResizeGrip_OnMouseUp,this),this._MainResizeGrip_MouseMoveHandler=new n.Events.MouseMoveEventHandler(this._MainResizeGrip_OnMouseMove,this),this.MainResizeGrip.OnMouseDown.Attach(new n.Events.MouseDownEventHandler(this._MainResizeGrip_OnMouseDown,this)),this.CloseButton.OnClick.Attach(new n.Events.ClickEventHandler(this._CloseButton_Click,this))}return __extends(r,i),r.prototype._MainTitleBar_OnMouseDown=function(i){if(this._DraggingEnabled){this._DraggingWindow=!0,this.Enabled(!1),t.CurrentFocusedControl!==null&&t.CurrentFocusedControl.Blur(),$("*").css({cursor:"pointer"});var r=this._rootElement.parent().position(),u=i.jqEvent.pageX-this.PageLeft(),f=i.jqEvent.pageY-this.PageTop();this._DraggingOffset={x:u+r.left,y:f+r.top},n.StopEvent(i.jqEvent),this.MainTitleBar.OnMouseUp.Attach(this._MainTitleBar_MouseUpHandler),this.MainTitleBar.OnMouseMove.Attach(this._MainTitleBar_MouseMoveHandler)}},r.prototype._MainTitleBar_OnMouseUp=function(t){this._DraggingWindow&&(this._DraggingWindow=!1,this.Enabled(!0),$("*").css({cursor:""}),n.StopEvent(t.jqEvent),this.MainTitleBar.OnMouseUp.Detach(this._MainTitleBar_MouseUpHandler),this.MainTitleBar.OnMouseMove.Detach(this._MainTitleBar_MouseMoveHandler))},r.prototype._MainTitleBar_OnMouseMove=function(i){if(this._DraggingWindow){if(this._DraggingEnabled){var r=i.jqEvent.pageY-this._DraggingOffset.y,u=i.jqEvent.pageX-this._DraggingOffset.x,f=this._rootElement.parent().width(),e=this._rootElement.parent().height();r=Math.min(Math.max(r,0),e-this.ActualHeight()),u=Math.min(Math.max(u,0),f-this.ActualWidth()),this.Top(new t.CSSNumber(r/e*100,"%")),this.Left(new t.CSSNumber(u/f*100,"%"))}else this._DraggingWindow=!1;n.StopEvent(i.jqEvent)}},r.prototype._MainResizeGrip_OnMouseDown=function(i){this._ResizingEnabled&&(this._ResizingWindow=!0,this.Enabled(!1),t.CurrentFocusedControl!==null&&t.CurrentFocusedControl.Blur(),$("*").css({cursor:"pointer"}),n.StopEvent(i.jqEvent),this.MainResizeGrip.OnMouseUp.Attach(this._MainResizeGrip_MouseUpHandler),this.MainResizeGrip.OnMouseMove.Attach(this._MainResizeGrip_MouseMoveHandler))},r.prototype._MainResizeGrip_OnMouseUp=function(t){this._ResizingWindow&&(this._ResizingWindow=!1,this.Enabled(!0),$("*").css({cursor:""}),n.StopEvent(t.jqEvent),this.MainResizeGrip.OnMouseUp.Detach(this._MainResizeGrip_MouseUpHandler),this.MainResizeGrip.OnMouseMove.Detach(this._MainResizeGrip_MouseMoveHandler))},r.prototype._MainResizeGrip_OnMouseMove=function(i){if(this._ResizingWindow){if(this._ResizingEnabled){var r=i.jqEvent.pageY-this.PageTop()+5,u=i.jqEvent.pageX-this.PageLeft()+5;r=r/this._rootElement.parent().height()*100,u=u/this._rootElement.parent().width()*100,this.Height(new t.CSSNumber(r,"%")),this.Width(new t.CSSNumber(u,"%"))}else this._ResizingWindow=!1;n.StopEvent(i.jqEvent)}},r.prototype._CloseButton_Click=function(){var n=this;this.Hide(function(){n.DestroyDOMOnClose&&n.DestroyDOM()})},r.prototype.DragEnabled=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(this._DraggingEnabled=n,this.MainTitleBar.Draggable(this._DraggingEnabled)),this._DraggingEnabled},r.prototype.ResizeEnabled=function(n){return typeof n=="undefined"&&(n=null),n!==null&&(this._ResizingEnabled=n,this.MainResizeGrip.Visible(this._ResizingEnabled)),this._ResizingEnabled},r.prototype.Title=function(n){return typeof n=="undefined"&&(n=null),this.MainTitleBar.Title(n),this.MainTitleBar.Title()},r.prototype.Show=function(r,u){typeof r=="undefined"&&(r=null),typeof u=="undefined"&&(u=new n.Animation.AppWindowAnimator),t.OpenWindows++,this.ApplyStyle("z-index",(t.OpenWindows*10).toString()),i.prototype.Show.call(this,r,u)},r.prototype.Hide=function(r,u){typeof r=="undefined"&&(r=null),typeof u=="undefined"&&(u=new n.Animation.AppWindowAnimator),t.OpenWindows--;var f=this;i.prototype.Hide.call(this,function(){f.ApplyStyle("z-index",""),f.OnClose.Invoke(new n.Events.CloseEventArgs(this)),r!==null&&r()},u)},r}(t.Control);t.Window=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(n){var t=function(t){function i(i,r){t.call(this),this._rootElement.addClass("MessageBox"),this.ContentPanel.ApplyStyles({padding:"15px"}),this.TextLabel=new n.Label,this.TextLabel.ApplyStyles({position:"relative"}),this.ContentPanel.Children.Add(this.TextLabel),this.EnableSelection(),this.ContentPanel.EnableSelection(),this.TextLabel.EnableSelection(),this.Title(i),this.Text(r)}return __extends(i,t),i.prototype.ConstructDOM=function(i,r){typeof r=="undefined"&&(r=null);var u=this;t.prototype.ConstructDOM.call(this,i,function(){u.Width(new n.CSSNumber($(window).width())),u.Height(new n.CSSNumber($(window).height())),u.ContentPanel.Width(new n.CSSNumber(0,"",!0)),u.ContentPanel.Height(new n.CSSNumber(0,"",!0)),u.ContentPanel.Right(new n.CSSNumber(0,"",!0)),u.ContentPanel.Bottom(new n.CSSNumber(0,"",!0)),u.Width(new n.CSSNumber(Math.max(u.ContentPanel.ActualWidth()+10,u.MainTitleBar.WindowMinSuitableWidth()+10))),u.Height(new n.CSSNumber(u.TextLabel.ActualHeight()+u.MainTitleBar.ActualHeight()+35)),u.ContentPanel.MaxWidth(new n.CSSNumber(100,"%")),u.TextLabel.Width(new n.CSSNumber(100,"%")),u.TextLabel.Height(new n.CSSNumber(0,"",!0)),r&&r()})},i.prototype.PositionCenterParent=function(t){this.Top(new n.CSSNumber((t.ActualHeight()-this.ActualHeight())/2/t.ActualHeight()*100,"%")),this.Left(new n.CSSNumber((t.ActualWidth()-this.ActualWidth())/2/t.ActualWidth()*100,"%"))},i.prototype.Text=function(n){return this.TextLabel.Text(n)},i.prototype.Width=function(i){typeof i=="undefined"&&(i=null);var r=t.prototype.Width.call(this,i);return i!==null&&this.ContentPanel.Width(new n.CSSNumber(this.ActualWidth()-30)),r},i}(n.Window);n.MessageBox=t})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(i){function r(){i.call(this),this.DestroyDOMOnClose=!1,this._rootElement.addClass("PageWindow"),this.MainTitleBar.Visible(!1),this.MainResizeGrip.Visible(!1),this.DragEnabled(!1),this.ResizeEnabled(!1),this.ContentPanel.Top(new t.CSSNumber(24)),this.ContentPanel.Bottom(new t.CSSNumber(0)),this.ContentPanel.Left(new t.CSSNumber(0)),this.ContentPanel.Width(new t.CSSNumber(100,"%")),this.ContentPanel.Height(new t.CSSNumber(100,"%",!0));var n=$("body");n.find(".PageWindow_DisableOverlay").length===0&&n.append($('<div class="PageWindow_DisableOverlay">')),this.Visible(!1)}return __extends(r,i),r.prototype.PositionCenterWindow=function(){var i=$(window).height(),n=$(window).width(),r=this.GetStyle("visibility"),u=this.GetStyle("display"),f=this.GetStyle("z-index");this.ApplyStyle("z-index","-1"),this.ApplyStyle("visibility","hidden"),this.ApplyStyle("display","block"),this.Width(new t.CSSNumber(Math.max(n/2,Math.min(400,n-50))/n*100,"%")),this.Height(new t.CSSNumber(Math.max(i/2,Math.min(500,i-50))+29)),this.Top(new t.CSSNumber((i-this.ActualHeight())/2/i*100,"%")),this.Left(new t.CSSNumber((n-this.ActualWidth())/2/n*100,"%")),this.ApplyStyle("z-index",f),this.ApplyStyle("visibility",r),this.ApplyStyle("display",u)},r.prototype.Show=function(t,r){typeof t=="undefined"&&(t=null),typeof r=="undefined"&&(r=new n.Animation.PageWindowAnimator),this.ContentPanel.Children.Count()>0?i.prototype.Show.call(this,t,r):t&&t()},r.prototype.Hide=function(t,r){typeof t=="undefined"&&(t=null),typeof r=="undefined"&&(r=new n.Animation.PageWindowAnimator),i.prototype.Hide.call(this,t,r)},r.prototype.Height=function(n){typeof n=="undefined"&&(n=null);var r=i.prototype.Height.call(this,n);return n!==null&&this.ContentPanel.Height(new t.CSSNumber(100,"%",!0)),r},r}(t.Window);t.PageWindow=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=function(i){function r(){i.call(this),this.DestroyDOMOnClose=!1,this._rootElement.addClass("SelectionWindow"),this.MainTitleBar.Visible(!1),this.MainResizeGrip.Visible(!1),this.DragEnabled(!1),this.ResizeEnabled(!1),this.Children.Remove(this.ContentPanel),this.ContentPanel=new t.ListBox,this.ContentPanel.Top(new t.CSSNumber(24)),this.ContentPanel.Bottom(new t.CSSNumber(0)),this.ContentPanel.Left(new t.CSSNumber(0)),this.ContentPanel.Width(new t.CSSNumber(100,"%")),this.ContentPanel.Height(new t.CSSNumber(100,"%",!0)),this.Children.Add(this.ContentPanel);var n=$("body");n.find(".SelectionWindow_DisableOverlay").length===0&&n.append($('<div class="SelectionWindow_DisableOverlay">')),this.Visible(!1)}return __extends(r,i),r.prototype.PositionCenterWindow=function(){var i=$(window).height(),n=$(window).width(),u=this.GetStyle("visibility"),f=this.GetStyle("display"),e=this.GetStyle("z-index"),r;this.ApplyStyle("z-index","-1"),this.ApplyStyle("visibility","hidden"),this.ApplyStyle("display","block"),r=this.ContentPanel.Items.Count()>0?this.ContentPanel.Items.Count()*this.ContentPanel.Children.ElementAt(0).ActualHeight():0,this.Width(new t.CSSNumber(Math.max(Math.min(n/2,300),200)/n*100,"%")),this.Height(new t.CSSNumber(Math.max(Math.min(r,300),100)+29)),this.Top(new t.CSSNumber((i-this.ActualHeight())/2/i*100,"%")),this.Left(new t.CSSNumber((n-this.ActualWidth())/2/n*100,"%")),this.ApplyStyle("z-index",e),this.ApplyStyle("visibility",u),this.ApplyStyle("display",f)},r.prototype.Show=function(t,r){if(typeof t=="undefined"&&(t=null),typeof r=="undefined"&&(r=new n.Animation.SelectionWindowAnimator),this.ContentPanel.Children.Count()>0){var u=this;i.prototype.Show.call(this,function(){u.ContentPanel.Children.ElementAt(u.ContentPanel.SelectedIndex()>-1?u.ContentPanel.SelectedIndex():0).Focus(),t&&t()},r)}else t&&t()},r.prototype.Hide=function(t,r){typeof t=="undefined"&&(t=null),typeof r=="undefined"&&(r=new n.Animation.SelectionWindowAnimator),i.prototype.Hide.call(this,t,r)},r.prototype.Height=function(n){typeof n=="undefined"&&(n=null);var r=i.prototype.Height.call(this,n);return n!==null&&this.ContentPanel.Height(new t.CSSNumber(100,"%",!0)),r},r}(t.Window);t.SelectionWindow=i})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(n){var t=function(t){function i(i){t.call(this),this._rootElement.addClass("StaticPageWindow"),this.ContentLabel=new n.Label,this.ContentLabel.AddClass("ContentLabel"),this.ContentPanel.Children.Add(this.ContentLabel),this.LoadContent(i)}return __extends(i,t),i.prototype.LoadContent=function(n,t){var i=this;$.get(n,t,function(n){i.ContentLabel.HTML(n)}).fail(function(){i.ContentLabel.HTML("<i>Failed to load content.<\/i>")})},i}(n.PageWindow);n.StaticPageWindow=t})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},function(n){(function(t){var i=0,r;t.VisibleNotifications=[],r=function(r){function u(i){r.call(this),this._HideTimeoutRef=-1,this._OffsetAdded=0,this._Showing=!1,this._rootElement.addClass("Notification"),this._rootElement.css("visibility","hidden"),this.OnClose=new n.Events.CloseEvent,this.CloseButton=new t.Button,this.CloseButton.AddClass("NotificationCloseButton"),this.CloseButton.Text("X"),this.Children.Add(this.CloseButton),this._TextLabel=new t.Label,this._TextLabel.RelativeLayoutOn(),this.Children.Add(this._TextLabel),this.Text(i),this.CloseButton.OnClick.Attach(new n.Events.ClickEventHandler(this._CloseButton_Click,this))}return __extends(u,r),u.prototype.Text=function(n){return typeof n=="undefined"&&(n=null),this._TextLabel.Text(n)},u.prototype._CloseButton_Click=function(){var n=this;this.Hide()},u.prototype.Show=function(u,f){if(typeof u=="undefined"&&(u=null),typeof f=="undefined"&&(f=new n.Animation.NotificationAnimator),this._HideTimeoutRef!==-1&&(clearTimeout(this._HideTimeoutRef),this._HideTimeoutRef=-1),this.Visible()||this._Showing)u!==null&&u();else{this._Showing=!0;var e=this;this.Bottom(new t.CSSNumber(i)),t.VisibleNotifications.push(this),r.prototype.Show.call(this,function(){e._Showing=!1,u!==null&&u()},f),i+=this._OffsetAdded=this.AnimationElement().outerHeight()}},u.prototype.ShowFor=function(n,t,i){typeof t=="undefined"&&(t=null);var r=this;this.Show(function(){this._HideTimeoutRef!==-1&&(clearTimeout(this._HideTimeoutRef),this._HideTimeoutRef=-1),r._HideTimeoutRef=setTimeout(function(){r.Hide(null,i)},n*1e3),t!==null&&t()},i)},u.prototype.Hide=function(f,e){typeof f=="undefined"&&(f=null),typeof e=="undefined"&&(e=new n.Animation.NotificationAnimator);var o=this;i-=this._OffsetAdded,t.VisibleNotifications.splice(t.VisibleNotifications.indexOf(this),1),u.RestackAll(),this._OffsetAdded=0,r.prototype.Hide.call(this,function(){o.OnClose.Invoke(new n.Events.CloseEventArgs(o)),f!==null&&f()},e)},u.prototype._Restack=function(){(new n.Animation.NotificationRestackAnimator).AnimateRestack(this,i),i+=this._OffsetAdded=this.AnimationElement().outerHeight()},u.RestackAll=function(){i=0;for(var n=0;n<t.VisibleNotifications.length;n++)t.VisibleNotifications[n]._Restack()},u}(t.Control),t.Notification=r})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),function(n){(function(t){t.OpenWindows=0,t.JustUsedTabKeyTime=0,t.CurrentFocusedControl=null,t._currTabIndex=0,t.Global_MouseUpEvent=new n.Events.MouseUpEvent,t.Global_MouseMoveEvent=new n.Events.MouseMoveEvent,t.preventTabKey=!1,t.OnKeyDown_Global_First=function(n){return n.keyCode===9&&(t.JustUsedTabKeyTime=Date.now()),!0},t.OnKeyDown_Global_Last=function(i){return i.keyCode===9&&t.preventTabKey?(t.preventTabKey=!1,n.StopEvent(i),!1):!i.isDefaultPrevented()};var i=Number.MAX_VALUE-1e3,r=null;if(document.documentElement.hasOwnProperty("ontouchstart"))$(document).on("touchstart",function(n){i=Date.now(),r=$(n.target)});$(document).on(t.Control.OnMouseUpEventName,function(u){!1&&i+10<Date.now()?(r=null,i=-1):(u=n.standardiseEvent(u),t.Global_MouseUpEvent.Invoke(new n.Events.MouseUpEventArgs(null,u)),u.isPropagationStopped()||t.CurrentFocusedControl===null||$(u.target).is("input")||t.CurrentFocusedControl.Blur())});$(document).on(t.Control.OnMouseMoveEventName,function(i){i=n.standardiseEvent(i),t.Global_MouseMoveEvent.Invoke(new n.Events.MouseMoveEventArgs(null,i))});$(document).on("keyup",function(n){n.isPropagationStopped()||t.CurrentFocusedControl===null||n.keyCode!==27||t.CurrentFocusedControl.Blur()})})(n.UI||(n.UI={}));var t=n.UI}(TSUI||(TSUI={})),$(function(){$("body").append('<div class="Bg">')});